import{ai as k,aj as f,ak as j,i as w,a7 as x,u as D,a as p,r as N,as as S,j as n,am as T}from"./index-8f324225.js";import{z as b,t as i,N as c}from"./Views-a6cda74e.js";import{T as K}from"./TenderForm-19e71671.js";import{f as v}from"./TenderService-e0c5ed39.js";import"./AdaptableCard-54b628e2.js";import"./SvgIcon-d3af2c92.js";import"./ConfirmDialog-cacab1ef.js";import"./DataTable-66df47f9.js";import"./StickyFooter-e17b8275.js";import"./formik.esm-79e86e67.js";import"./react-number-format.es-53214375.js";import"./index-7235128c.js";import"./index.esm-02ea902b.js";import"./useThemeClass-fe409b1f.js";import"./index-fee04496.js";const l="proyekNew",d=k(l+"/getKliens",async()=>(await b()).data),A={loadingKliens:!0},E=f({name:`${l}/state`,initialState:A,reducers:{},extraReducers:r=>{r.addCase(d.fulfilled,(a,o)=>{a.kliensData=o.payload,a.loadingKliens=!1}).addCase(d.pending,a=>{a.loadingKliens=!0})}}),C=E.reducer,R=j({data:C});w("proyekNew",R);const F=()=>{const r=x(),a=D(),{selectDivisi:o,loadingSelectDivisi:m}=p(s=>s.base.common),u=p(s=>{var e;return((e=s.proyekNew.data.kliensData)==null?void 0:e.data)||[]}),g=async s=>{try{return{success:!0,data:(await v(s)).data}}catch(e){let t="Terjadi kesalahan saat menambahkan tender";return e.response&&e.response.data&&e.response.data.message&&(t=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message),{success:!1,message:t}}},h=async(s,e)=>{try{e(!0);const t=await g(s);e(!1),t.success?(i.push(n.jsx(c,{title:"Successfuly added",type:"success",duration:2500,children:"Tender berhasil ditambahkan"}),{placement:"top-center"}),r("/manajemen-proyek/tender")):i.push(n.jsx(c,{title:"Gagal menambahkan",type:"danger",duration:3500,children:t.message}),{placement:"top-center"})}catch(t){console.error("Error tidak tertangkap:",t),i.push(n.jsx(c,{title:"Kesalahan Sistem",type:"danger",duration:2500,children:"Terjadi kesalahan saat memproses permintaan"}),{placement:"top-center"})}},y=()=>{r("/manajemen-proyek/tender")};return N.useEffect(()=>{a(d()),a(S())},[location.pathname]),n.jsx(T,{loading:m,children:n.jsx(K,{type:"new",dataDivisi:o.data,kliensData:u,onFormSubmit:h,onDiscard:y})})},V=F;export{V as default};
