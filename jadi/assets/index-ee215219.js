import{ai as j,aj as x,ak as D,al as E,i as B,u as S,a9 as C,a7 as N,r as A,j as s,am as v}from"./index-8f324225.js";import{D as F}from"./DoubleSidedImage-429e335d.js";import{bl as T,bm as w,b5 as M,i as m,t as i,N as c}from"./Views-a6cda74e.js";import{B as R}from"./BerkasForm-98bcdeaa.js";import"./StickyFooter-e17b8275.js";import"./ConfirmDialog-cacab1ef.js";import"./formik.esm-79e86e67.js";import"./AdaptableCard-54b628e2.js";import"./index-7235128c.js";import"./index.esm-02ea902b.js";const h="berkasEdit",d=j(h+"/getBerkases",async t=>{try{return(await T(t)).data}catch(e){if(e.response&&e.response.data){const r=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:r}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}}),G=async t=>{try{return(await w(t)).data}catch(e){if(e.response&&e.response.data){const r=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:r}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}},I=async t=>(await M(t)).data,L={loading:!0,berkasData:{}},$=x({name:`${h}/state`,initialState:L,reducers:{},extraReducers:t=>{t.addCase(d.fulfilled,(e,r)=>{e.berkasData=r.payload,e.loading=!1}).addCase(d.pending,e=>{e.loading=!0})}}),P=$.reducer,q=D({data:P}),g=E;B("berkasEdit",q);const O=()=>{const t=S(),e=C(),r=N(),o=g(a=>a.berkasEdit.data.berkasData),p=g(a=>a.berkasEdit.data.loading),k=a=>{t(d(a))},l=a=>{i.push(s.jsxs(c,{title:`Successfuly ${a}`,type:"success",duration:2500,children:["Berkas successfuly ",a]}),{placement:"top-center"}),r("/master/berkas")},f=async(a,n)=>{try{n(!0);const u=await G(a);u.statusCode===200?l("updated"):i.push(s.jsx(c,{title:"Gagal menambahkan",type:"danger",duration:3500,children:u.message}),{placement:"top-center"})}finally{n(!1)}},y=()=>{r("/master/berkas")},b=async a=>{a(!1);const n=await I({id:o.id});n.statusCode===200?l("deleted"):i.push(s.jsx(c,{title:"Gagal menghapus",type:"danger",duration:3500,children:n.message}),{placement:"top-center"})};return A.useEffect(()=>{const n={id:e.pathname.substring(e.pathname.lastIndexOf("/")+1)};k(n)},[e.pathname]),s.jsxs(s.Fragment,{children:[s.jsx(v,{loading:p,children:!m(o)&&s.jsx(s.Fragment,{children:s.jsx(R,{type:"edit",initialData:o,onFormSubmit:f,onDiscard:y,onDelete:b})})}),!p&&m(o)&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[s.jsx(F,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No product found!"}),s.jsx("h3",{className:"mt-8",children:"No product found!"})]})]})},Y=O;export{Y as default};
