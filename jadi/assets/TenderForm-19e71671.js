import{j as a,W as C,r as v}from"./index-8f324225.js";import{F as c,K as x,x as b,w as k,J as f,P as y,B as h,H as F}from"./Views-a6cda74e.js";import{S as D}from"./StickyFooter-e17b8275.js";import{C as N}from"./ConfirmDialog-cacab1ef.js";import{b as u,F as _,a as S}from"./formik.esm-79e86e67.js";import{A as M}from"./AdaptableCard-54b628e2.js";import{N as w}from"./react-number-format.es-53214375.js";import{a as P}from"./index-7235128c.js";import{c as T,a as g}from"./index.esm-02ea902b.js";const Y=d=>{const{touched:t,errors:i,kliensData:o,dataDivisi:r}=d;return a.jsxs(M,{divider:!0,className:"mb-4",children:[a.jsx("h5",{children:"Informasi Dasar"}),a.jsx("p",{className:"mb-6",children:"Sesi untuk mengatur informasi dasar tender"}),a.jsx(c,{label:"Pekerjaan",invalid:i.pekerjaan&&t.pekerjaan,errorMessage:i.pekerjaan,children:a.jsx(u,{type:"text",autoComplete:"off",name:"pekerjaan",placeholder:"Nama",component:x})}),a.jsx(c,{label:"Tanggal Pengajuan",invalid:i.tanggal_pengajuan&&t.tanggal_pengajuan,errorMessage:i.tanggal_pengajuan,children:a.jsx(u,{name:"tanggal_pengajuan",children:({field:n,form:s})=>a.jsx(b,{placeholder:"Pilih Tanggal",value:n.value?new Date(n.value):null,inputFormat:"DD-MM-YYYY",onChange:e=>{const m=e?C(e).format("YYYY-MM-DD"):"";s.setFieldValue(n.name,m)}})})}),a.jsx(c,{label:"Nilai Kontrak",invalid:i.nilai_kontrak&&t.nilai_kontrak,errorMessage:i.nilai_kontrak,children:a.jsx(u,{name:"nilai_kontrak",children:({field:n,form:s})=>a.jsx(w,{...n,customInput:x,placeholder:"0",thousandSeparator:".",decimalSeparator:",",onValueChange:e=>{s.setFieldValue(n.name,e.value)}})})}),a.jsx(c,{label:"Klien",invalid:i.idClient&&t.idClient,errorMessage:i.idClient,children:a.jsx(u,{name:"idClient",children:({field:n,form:s})=>{const e=n.value?o==null?void 0:o.find(l=>l.id===n.value):null,m=Array.isArray(o)?o.map(l=>({value:l.id,label:l.nama})):[];return a.jsx(k,{field:n,form:s,options:m,value:e?{value:e.nama,label:`${e.nama}`}:null,placeholder:"Pilih klien",onChange:l=>{s.setFieldValue(n.name,l==null?void 0:l.value)}})}})}),a.jsx(c,{label:"Divisi",invalid:i.idDivisi&&t.idDivisi,errorMessage:i.idDivisi,children:a.jsx(u,{name:"idDivisi",children:({field:n,form:s})=>a.jsx(k,{placeholder:"Pilih divisi",options:r==null?void 0:r.map(e=>({label:e.name,value:e.id})),value:r==null?void 0:r.map(e=>({label:e.name,value:e.id})).find(e=>e.value===n.value),onChange:e=>{s.setFieldValue(n.name,(e==null?void 0:e.value)||"")}})})})]})},A=T().shape({pekerjaan:g().required("Pekerjaan wajib diisi"),tanggal_pengajuan:g().required("Tanggal pengajuan wajib diisi"),nilai_kontrak:g().required("Nilai kontrak wajib diisi")}),O=({onDelete:d})=>{const[t,i]=v.useState(!1),o=()=>{i(!0)},r=()=>{i(!1)},n=()=>{d==null||d(i)};return a.jsxs(a.Fragment,{children:[a.jsx(h,{className:"text-red-600",variant:"plain",size:"sm",icon:a.jsx(F,{}),type:"button",onClick:o,children:"Hapus"}),a.jsx(N,{isOpen:t,type:"danger",title:"Hapus tender",confirmButtonColor:"red-600",onClose:r,onRequestClose:r,onCancel:r,onConfirm:n,children:a.jsx("p",{children:"Apakah Anda yakin ingin menghapus tender ini?"})})]})},B=v.forwardRef((d,t)=>{const{type:i,initialData:o={idClient:"",pekerjaan:"",tanggal_pengajuan:"",nilai_kontrak:0,idDivisi:""},dataDivisi:r,kliensData:n,onFormSubmit:s,onDiscard:e,onDelete:m}=d;return a.jsx(a.Fragment,{children:a.jsx(_,{innerRef:t,initialValues:{...o},validationSchema:A,onSubmit:(l,{setSubmitting:p})=>{const j=f(l);s==null||s(j,p)},children:({touched:l,errors:p,isSubmitting:j})=>a.jsx(S,{children:a.jsxs(y,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:a.jsx("div",{className:"lg:col-span-2",children:a.jsx(Y,{touched:l,errors:p,kliensData:n,dataDivisi:r})})}),a.jsxs(D,{className:"-mx-8 px-8 flex items-center justify-between py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[a.jsx("div",{children:i==="edit"&&a.jsx(O,{onDelete:m})}),a.jsxs("div",{className:"md:flex items-center",children:[a.jsx(h,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:()=>e==null?void 0:e(),children:"Batal"}),a.jsx(h,{size:"sm",variant:"solid",loading:j,icon:a.jsx(P,{}),type:"submit",children:"Simpan"})]})]})]})})})})});B.displayName="TenderForm";export{B as T};
