import{i as f,a7 as j,u as x,r as y,as as k,j as t,am as D,ax as b}from"./index-8f324225.js";import{P as v}from"./PenggunaForm-7e2c25d6.js";import{t as r,N as n}from"./Views-a6cda74e.js";import"./AdaptableCard-54b628e2.js";import"./SvgIcon-d3af2c92.js";import"./ConfirmDialog-cacab1ef.js";import"./DataTable-66df47f9.js";import{u as o,s as P,r as R}from"./index-4305b949.js";import"./StickyFooter-e17b8275.js";import"./formik.esm-79e86e67.js";import"./index-7235128c.js";import"./index.esm-02ea902b.js";import"./useThemeClass-fe409b1f.js";import"./index-fee04496.js";f("peranList",R);const S=()=>{const i=j(),p=x(),{selectDivisi:c,loadingSelectDivisi:m}=o(a=>a.base.common),d=o(a=>a.peranList.data.selectRoles),l=o(a=>a.peranList.data.loadingSelectRoles),g=async a=>{try{return{success:!0,data:(await b(a)).data}}catch(e){let s="Terjadi kesalahan saat menambahkan pengguna";return e.response&&e.response.data&&e.response.data.message&&(s=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message),{success:!1,message:s}}},u=async(a,e)=>{try{e(!0);const s=await g(a);e(!1),s.success?(r.push(t.jsx(n,{title:"Berhasil ditambahkan",type:"success",duration:2500,children:"Pengguna berhasil ditambahkan"}),{placement:"top-center"}),i("/peran-dan-pengguna/pengguna")):r.push(t.jsx(n,{title:"Gagal menambahkan",type:"danger",duration:3500,children:s.message}),{placement:"top-center"})}catch(s){console.error("Error tidak tertangkap:",s),r.push(t.jsx(n,{title:"Kesalahan Sistem",type:"danger",duration:2500,children:"Terjadi kesalahan saat memproses permintaan"}),{placement:"top-center"})}},h=()=>{i("/peran-dan-pengguna/pengguna")};return y.useEffect(()=>{p(P()),p(k())},[]),t.jsx(D,{loading:l||m,children:t.jsx(v,{type:"new",roleData:d,divisiData:c.data,onFormSubmit:u,onDiscard:h})})},C=S;export{C as default};
