import{ai as D,aj as N,ak as b,al as v,i as C,u as K,a9 as F,a7 as A,r as G,j as a,am as R,as as w}from"./index-8f324225.js";import{D as I}from"./DoubleSidedImage-429e335d.js";import{i as h,t as o,N as c}from"./Views-a6cda74e.js";import{d as L,e as $,b as M}from"./TenderService-e0c5ed39.js";import{a as P}from"./KlienService-a48e76b8.js";import{T as q}from"./TenderForm-19e71671.js";import"./StickyFooter-e17b8275.js";import"./ConfirmDialog-cacab1ef.js";import"./formik.esm-79e86e67.js";import"./AdaptableCard-54b628e2.js";import"./react-number-format.es-53214375.js";import"./index-7235128c.js";import"./index.esm-02ea902b.js";const m="tenderEdit",l=D(m+"/getTender",async n=>(await L(n)).data),p=D(m+"/getKliens",async()=>(await P()).data),O={loading:!0,loadingKliens:!0,tenderData:[],kliensData:[]},_=N({name:`${m}/state`,initialState:O,reducers:{},extraReducers:n=>{n.addCase(l.fulfilled,(t,i)=>{t.tenderData=i.payload,t.loading=!1}).addCase(l.pending,t=>{t.loading=!0}).addCase(p.fulfilled,(t,i)=>{t.kliensData=i.payload,t.loadingKliens=!1}).addCase(p.pending,t=>{t.loadingKliens=!0})}}),z=_.reducer,B=b({data:z}),d=v;C("tenderEdit",B);const H=()=>{const n=K(),t=F(),i=A(),{selectDivisi:x,loadingSelectDivisi:y}=d(e=>e.base.common),r=d(e=>e.tenderEdit.data.tenderData),j=d(e=>{var s;return((s=e.tenderEdit.data.kliensData)==null?void 0:s.data)||[]}),u=d(e=>e.tenderEdit.data.loading),E=e=>{n(l(e)),n(p()),n(w())},g=e=>{o.push(a.jsxs(c,{title:`Successfuly ${e}`,type:"success",duration:2500,children:["Tender successfuly ",e]}),{placement:"top-center"}),i("/manajemen-proyek/tender")},S=async(e,s)=>{try{s(!0);const f=await $(e);f.data.statusCode===200?g("updated"):o.push(a.jsx(c,{title:"Gagal menambahkan",type:"danger",duration:3500,children:f.data.message}),{placement:"top-center"})}finally{s(!1)}},T=()=>{i("/manajemen-proyek/tender")},k=async e=>{e(!1);const s=await M({id:r.id});s.statusCode===200?g("deleted"):o.push(a.jsx(c,{title:"Gagal menghapus",type:"danger",duration:3500,children:s.message}),{placement:"top-center"})};return G.useEffect(()=>{const s={id:t.pathname.substring(t.pathname.lastIndexOf("/")+1)};E(s)},[t.pathname]),a.jsxs(a.Fragment,{children:[a.jsx(R,{loading:u||y,children:!h(r)&&a.jsx(a.Fragment,{children:a.jsx(q,{type:"edit",initialData:r,kliensData:j,dataDivisi:x.data,onFormSubmit:S,onDelete:k,onDiscard:T})})}),!u&&h(r)&&a.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[a.jsx(I,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No tender found!"}),a.jsx("h3",{className:"mt-8",children:"No tender found!"})]})]})},ie=H;export{ie as default};
