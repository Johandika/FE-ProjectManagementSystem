import{r as a,j as n,am as F,c as O}from"./index-8f324225.js";import{aZ as y,a_ as B,w as L,aD as V}from"./Views-a6cda74e.js";import{u as Z,f as k,T as $,a as q,b as G,c as J,d as K}from"./index-fee04496.js";const{Tr:T,Th:Q,Td:U,THead:X,TBody:Y,Sorter:ee}=y,M=h=>{const{indeterminate:d,onChange:f,onCheckBoxChange:r,onIndeterminateCheckBoxChange:c,...s}=h,o=a.useRef(null);a.useEffect(()=>{typeof d=="boolean"&&o.current&&(o.current.indeterminate=!s.checked&&d)},[o,d]);const g=l=>{f(l),r==null||r(l),c==null||c(l)};return n.jsx(V,{ref:o,className:"mb-0",onChange:(l,m)=>g(m),...s})};function te(h,d){const{skeletonAvatarColumns:f,columns:r=[],data:c=[],loading:s=!1,onCheckBoxChange:o,onIndeterminateCheckBoxChange:g,onPaginationChange:l,onSelectChange:m,onSort:S,onRowClick:p,pageSizes:j=[10,25,50,100],selectable:R=!1,skeletonAvatarProps:D,pagingData:w={total:0,pageIndex:1,pageSize:10}}=h,{pageSize:x,pageIndex:I,total:P}=w,[i,A]=a.useState(null),b=a.useMemo(()=>j.map(t=>({value:t,label:`${t} / page`})),[j]),z=(t,e)=>{s||o==null||o(t,e)},H=(t,e)=>{s||g==null||g(t,e)},N=t=>{s||l==null||l(t)},W=t=>{s||m==null||m(Number(t))};a.useEffect(()=>{if(Array.isArray(i)){const t=i.length>0?i[0].desc?"desc":"asc":"",e=i.length>0?i[0].id:"";S==null||S({order:t,key:e})}},[i]);const v=a.useMemo(()=>{const t=r;return R?[{id:"select",header:({table:e})=>n.jsx(M,{checked:e.getIsAllRowsSelected(),indeterminate:e.getIsSomeRowsSelected(),onChange:e.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:C=>{H(C.target.checked,e.getRowModel().rows)}}),cell:({row:e})=>n.jsx(M,{checked:e.getIsSelected(),disabled:!e.getCanSelect(),indeterminate:e.getIsSomeSelected(),onChange:e.getToggleSelectedHandler(),onCheckBoxChange:C=>z(C.target.checked,e.original)})},...t]:t},[r,R]),u=Z({data:c,columns:v,getCoreRowModel:q(),getFilteredRowModel:G(),getPaginationRowModel:J(),getSortedRowModel:K(),manualPagination:!0,manualSorting:!0,onSortingChange:t=>{A(t)},state:{sorting:i}}),E=()=>{u.resetSorting()},_=()=>{u.toggleAllRowsSelected(!1)};return a.useImperativeHandle(d,()=>({resetSorting:E,resetSelected:_})),n.jsxs(F,{loading:s&&c.length!==0,type:"cover",children:[n.jsxs(y,{children:[n.jsx(X,{children:u.getHeaderGroups().map(t=>n.jsx(T,{children:t.headers.map(e=>n.jsx(Q,{colSpan:e.colSpan,style:{width:e.column.columnDef.width,minWidth:e.column.columnDef.minWidth},children:e.isPlaceholder?null:n.jsxs("div",{className:O(e.column.getCanSort()&&"cursor-pointer select-none point",s&&"pointer-events-none"),onClick:e.column.getToggleSortingHandler(),children:[k(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&n.jsx(ee,{sort:e.column.getIsSorted()})]})},e.id))},t.id))}),s&&c.length===0?n.jsx($,{columns:v.length,rows:w.pageSize,avatarInColumns:f,avatarProps:D}):n.jsx(Y,{children:u.getRowModel().rows.slice(0,x).map(t=>n.jsx(T,{className:p?"cursor-pointer hover:bg-gray-50":"",onClick:()=>p&&p(t.original),children:t.getVisibleCells().map(e=>n.jsx(U,{style:{width:e.column.columnDef.width,minWidth:e.column.columnDef.minWidth},children:k(e.column.columnDef.cell,e.getContext())},e.id))},t.id))})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsx(B,{pageSize:x,currentPage:I,total:P,onChange:N}),n.jsx("div",{style:{minWidth:130},children:n.jsx(L,{size:"sm",menuPlacement:"top",isSearchable:!1,value:b.filter(t=>t.value===x),options:b,onChange:t=>W(t==null?void 0:t.value)})})]})]})}const le=a.forwardRef(te);export{le as D};
