import{ai as j,aj as x,ak as E,al as S,i as C,u as N,a9 as k,a7 as A,r as b,j as a,am as F}from"./index-8f324225.js";import{D as T}from"./DoubleSidedImage-429e335d.js";import{i as m,t as o,N as d}from"./Views-a6cda74e.js";import{c as w,d as M,b as R}from"./DivisiService-dc0d5bfb.js";import{D as G}from"./DivisiForm-dfd1dc2b.js";import"./StickyFooter-e17b8275.js";import"./ConfirmDialog-cacab1ef.js";import"./formik.esm-79e86e67.js";import"./AdaptableCard-54b628e2.js";import"./index-7235128c.js";import"./index.esm-02ea902b.js";const h="divisiEdit",c=j(h+"/getDivisies",async t=>{try{return(await w(t)).data}catch(e){if(e.response&&e.response.data){const i=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:i}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}}),I=async t=>{try{return(await M(t)).data}catch(e){if(e.response&&e.response.data){const i=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:i}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}},L=async t=>(await R(t)).data,$={loading:!0,divisiData:{}},q=x({name:`${h}/state`,initialState:$,reducers:{},extraReducers:t=>{t.addCase(c.fulfilled,(e,i)=>{e.divisiData=i.payload,e.loading=!1}).addCase(c.pending,e=>{e.loading=!0})}}),O=q.reducer,P=E({data:O}),g=S;C("divisiEdit",P);const U=()=>{const t=N(),e=k(),i=A(),n=g(s=>s.divisiEdit.data.divisiData),p=g(s=>s.divisiEdit.data.loading),f=s=>{t(c(s))},l=s=>{o.push(a.jsxs(d,{title:`Successfuly ${s}`,type:"success",duration:2500,children:["Divisi successfuly ",s]}),{placement:"top-center"}),i("/master/divisi")},v=async(s,r)=>{try{r(!0);const u=await I(s);u.statusCode===200?l("updated"):o.push(a.jsx(d,{title:"Gagal menambahkan",type:"danger",duration:3500,children:u.message}),{placement:"top-center"})}finally{r(!1)}},D=()=>{i("/master/divisi")},y=async s=>{s(!1);const r=await L({id:n.id});r.statusCode===200?l("deleted"):o.push(a.jsx(d,{title:"Gagal menghapus",type:"danger",duration:3500,children:r.message}),{placement:"top-center"})};return b.useEffect(()=>{const r={id:e.pathname.substring(e.pathname.lastIndexOf("/")+1)};f(r)},[e.pathname]),a.jsxs(a.Fragment,{children:[a.jsx(F,{loading:p,children:!m(n)&&a.jsx(a.Fragment,{children:a.jsx(G,{type:"edit",initialData:n,onFormSubmit:v,onDiscard:D,onDelete:y})})}),!p&&m(n)&&a.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[a.jsx(T,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No product found!"}),a.jsx("h3",{className:"mt-8",children:"No product found!"})]})]})},Z=U;export{Z as default};
