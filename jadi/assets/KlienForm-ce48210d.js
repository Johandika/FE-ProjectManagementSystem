import{j as a,r as j}from"./index-8f324225.js";import{F as c,K as u,w as f,J as v,P as k,B as x,H as b}from"./Views-a6cda74e.js";import{S as C}from"./StickyFooter-e17b8275.js";import{C as y}from"./ConfirmDialog-cacab1ef.js";import{b as p,F,a as D}from"./formik.esm-79e86e67.js";import{A as N}from"./AdaptableCard-54b628e2.js";import{a as S}from"./index-7235128c.js";import{c as w,a as h}from"./index.esm-02ea902b.js";const A=r=>{const{touched:t,errors:i,divisiData:s}=r;return a.jsxs(N,{divider:!0,className:"mb-4",children:[a.jsx("h5",{children:"Informasi Dasar"}),a.jsx("p",{className:"mb-6",children:"Sesi untuk mengatur informasi dasar klien"}),a.jsx(c,{label:"Nama klien",invalid:i.nama&&t.nama,errorMessage:i.nama,children:a.jsx(p,{type:"text",autoComplete:"off",name:"nama",placeholder:"Nama",component:u})}),a.jsx(c,{label:"Divisi",invalid:i.idDivisi&&t.idDivisi,errorMessage:i.idDivisi,children:a.jsx(p,{name:"idDivisi",children:({field:n,form:l})=>a.jsx(f,{placeholder:"Pilih divisi",options:s==null?void 0:s.map(e=>({label:e.name,value:e.id})),value:s==null?void 0:s.map(e=>({label:e.name,value:e.id})).find(e=>e.value===n.value),onChange:e=>{l.setFieldValue(n.name,(e==null?void 0:e.value)||"")}})})}),a.jsx(c,{label:"Keterangan",labelClass:"!justify-start",invalid:i.keterangan&&t.keterangan,errorMessage:i.keterangan,children:a.jsx(p,{textArea:!0,name:"keterangan",placeholder:"Masukkan keterangan",component:u})})]})},B=w().shape({nama:h().required("Nama wajib diisi"),idDivisi:h().required("Divisi wajib dipilih")}),K=({onDelete:r})=>{const[t,i]=j.useState(!1),s=()=>{i(!0)},n=()=>{i(!1)},l=()=>{r==null||r(i)};return a.jsxs(a.Fragment,{children:[a.jsx(x,{className:"text-red-600",variant:"plain",size:"sm",icon:a.jsx(b,{}),type:"button",onClick:s,children:"Hapus"}),a.jsx(y,{isOpen:t,type:"danger",title:"Hapus klien",confirmButtonColor:"red-600",onClose:n,onRequestClose:n,onCancel:n,onConfirm:l,children:a.jsx("p",{children:"Apakah Anda yakin ingin menghapus klien ini?"})})]})},O=j.forwardRef((r,t)=>{const{type:i,initialData:s={nama:"",keterangan:"",idDivisi:""},dataDivisi:n,onFormSubmit:l,onDiscard:e,onDelete:g}=r;return a.jsx(a.Fragment,{children:a.jsx(F,{innerRef:t,initialValues:{...s},validationSchema:B,onSubmit:(o,{setSubmitting:m})=>{const d=v(o);l==null||l(d,m)},children:({touched:o,errors:m,isSubmitting:d})=>a.jsx(D,{children:a.jsxs(k,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:a.jsx("div",{className:"lg:col-span-2",children:a.jsx(A,{touched:o,errors:m,divisiData:n})})}),a.jsxs(C,{className:"-mx-8 px-8 flex items-center justify-between py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[a.jsx("div",{children:i==="edit"&&a.jsx(K,{onDelete:g})}),a.jsxs("div",{className:"md:flex items-center",children:[a.jsx(x,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:()=>e==null?void 0:e(),children:"Batal"}),a.jsx(x,{size:"sm",variant:"solid",loading:d,icon:a.jsx(S,{}),type:"submit",children:"Simpan"})]})]})]})})})})});O.displayName="KlienForm";export{O as K};
