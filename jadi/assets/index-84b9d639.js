import{ai as E,aj as K,ak as S,al as v,i as C,u as N,a9 as A,a7 as b,r as F,j as s,am as T,as as w}from"./index-8f324225.js";import{D as M}from"./DoubleSidedImage-429e335d.js";import{i as g,t as o,N as c}from"./Views-a6cda74e.js";import{c as R,d as G,b as I}from"./KlienService-a48e76b8.js";import{K as L}from"./KlienForm-ce48210d.js";import"./StickyFooter-e17b8275.js";import"./ConfirmDialog-cacab1ef.js";import"./formik.esm-79e86e67.js";import"./AdaptableCard-54b628e2.js";import"./index-7235128c.js";import"./index.esm-02ea902b.js";const h="klienEdit",l=E(h+"/getKliens",async t=>{try{return(await R(t)).data}catch(e){if(e.response&&e.response.data){const n=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:n}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}}),$=async t=>{try{return(await G(t)).data}catch(e){if(e.response&&e.response.data){const n=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:n}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}},P=async t=>(await I(t)).data,q={loading:!0,klienData:{}},O=K({name:`${h}/state`,initialState:q,reducers:{},extraReducers:t=>{t.addCase(l.fulfilled,(e,n)=>{e.klienData=n.payload,e.loading=!1}).addCase(l.pending,e=>{e.loading=!0})}}),_=O.reducer,z=S({data:_}),d=v;C("klienEdit",z);const B=()=>{const t=N(),e=A(),n=b(),{selectDivisi:f,loadingSelectDivisi:y}=d(a=>a.base.common),i=d(a=>a.klienEdit.data.klienData),p=d(a=>a.klienEdit.data.loading),j=a=>{t(l(a)),t(w())},u=a=>{o.push(s.jsxs(c,{title:`Successfuly ${a}`,type:"success",duration:2500,children:["Klien successfuly ",a]}),{placement:"top-center"}),n("/master/klien")},k=async(a,r)=>{try{r(!0);const m=await $(a);m.statusCode===200?u("updated"):o.push(s.jsx(c,{title:"Gagal menambahkan",type:"danger",duration:3500,children:m.message}),{placement:"top-center"})}finally{r(!1)}},x=()=>{n("/master/klien")},D=async a=>{a(!1);const r=await P({id:i.id});r.statusCode===200?u("deleted"):o.push(s.jsx(c,{title:"Gagal menghapus",type:"danger",duration:3500,children:r.message}),{placement:"top-center"})};return F.useEffect(()=>{const r={id:e.pathname.substring(e.pathname.lastIndexOf("/")+1)};j(r)},[e.pathname]),s.jsxs(s.Fragment,{children:[s.jsx(T,{loading:p||y,children:!g(i)&&s.jsx(s.Fragment,{children:s.jsx(L,{type:"edit",initialData:i,dataDivisi:f.data,onFormSubmit:k,onDiscard:x,onDelete:D})})}),!p&&g(i)&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[s.jsx(M,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No product found!"}),s.jsx("h3",{className:"mt-8",children:"No product found!"})]})]})},se=B;export{se as default};
