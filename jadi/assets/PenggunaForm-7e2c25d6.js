import{r as v,j as e}from"./index-8f324225.js";import{F as m,K as u,w as b,by as y,aY as C,J as w,P as F,B as f,H as N}from"./Views-a6cda74e.js";import{S as k}from"./StickyFooter-e17b8275.js";import{C as P}from"./ConfirmDialog-cacab1ef.js";import{b as d,F as R,a as O}from"./formik.esm-79e86e67.js";import{A as S}from"./AdaptableCard-54b628e2.js";import{a as D}from"./index-7235128c.js";import{c as E,a as h}from"./index.esm-02ea902b.js";const I=l=>{const{touched:r,errors:i,type:p,roleData:s,divisiData:o}=l,[c,x]=v.useState("password"),g=n=>{n.preventDefault(),x(c==="password"?"text":"password")},j=e.jsx("span",{className:"cursor-pointer",onClick:n=>g(n),children:c==="password"?e.jsx(y,{}):e.jsx(C,{})});return e.jsxs(S,{divider:!0,className:"mb-4",children:[e.jsx("h5",{children:"Informasi Dasar"}),e.jsx("p",{className:"mb-6",children:"Sesi untuk mengatur informasi dasar pengguna"}),e.jsx(m,{label:"Pengguna",invalid:i.nama&&r.nama,errorMessage:i.nama,children:e.jsx(d,{type:"text",autoComplete:"off",name:"nama",placeholder:"Nama",component:u})}),e.jsx(m,{label:"Email",invalid:i.email&&r.email,errorMessage:i.email,children:e.jsx(d,{type:"mail",autoComplete:"off",name:"email",placeholder:"Email",component:u})}),e.jsx(m,{label:"Nomor Telepon",invalid:i.nomor_telepon&&r.nomor_telepon,errorMessage:i.nomor_telepon,children:e.jsx(d,{type:"text",autoComplete:"off",name:"nomor_telepon",placeholder:"08xxxxxxxxxx",component:u})}),p==="new"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{label:"Password",invalid:i.password&&r.password,errorMessage:i.password,children:e.jsx(d,{autoComplete:"off",name:"password",suffix:j,type:c,placeholder:"password",component:u})}),e.jsx(m,{label:"Role",invalid:i.idRole&&r.idRole,errorMessage:i.idRole,children:e.jsx(d,{name:"idRole",children:({field:n,form:t})=>e.jsx(b,{options:s==null?void 0:s.map(a=>({label:a.nama,value:a.id})),value:s==null?void 0:s.map(a=>({label:a.nama,value:a.id})).find(a=>a.value===n.value),onChange:a=>{t.setFieldValue(n.name,(a==null?void 0:a.value)||"")}})})}),e.jsx(m,{label:"Divisi",invalid:i.idDivisi&&r.idDivisi,errorMessage:i.idDivisi,children:e.jsx(d,{name:"idDivisi",children:({field:n,form:t})=>e.jsx(b,{placeholder:"Pilih divisi",options:o==null?void 0:o.map(a=>({label:a.name,value:a.id})),value:o==null?void 0:o.map(a=>({label:a.name,value:a.id})).find(a=>a.value===n.value),onChange:a=>{t.setFieldValue(n.name,(a==null?void 0:a.value)||"")}})})})]})]})},B=E().shape({nama:h().required("Nama wajib diisi"),email:h().email("Email tidak valid").required("Email wajib diisi"),nomor_telepon:h().required("Nomor telepon wajib diisi")}),H=({onDelete:l})=>{const[r,i]=v.useState(!1),p=()=>{i(!0)},s=()=>{i(!1)},o=()=>{l==null||l(i)};return e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"text-red-600",variant:"plain",size:"sm",icon:e.jsx(N,{}),type:"button",onClick:p,children:"Hapus"}),e.jsx(P,{isOpen:r,type:"danger",title:"Hapus pengguna",confirmButtonColor:"red-600",onClose:s,onRequestClose:s,onCancel:s,onConfirm:o,children:e.jsx("p",{children:"Apakah Anda yakin ingin menghapus pengguna ini?"})})]})},M=v.forwardRef((l,r)=>{const{type:i,initialData:p,onFormSubmit:s,onDiscard:o,onDelete:c,roleData:x,divisiData:g}=l,j={id:"",nama:"",email:"",nomor_telepon:"",idRole:"",idDivisi:"",password:"",...p};return e.jsx(e.Fragment,{children:e.jsx(R,{innerRef:r,initialValues:j,validationSchema:B,onSubmit:(n,{setSubmitting:t})=>{const a=w(n);s==null||s(a,t)},children:({touched:n,errors:t,isSubmitting:a})=>e.jsx(O,{children:e.jsxs(F,{children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx(I,{touched:n,errors:t,type:i,roleData:x,divisiData:g})})}),e.jsxs(k,{className:"-mx-8 px-8 flex items-center justify-between py-4",stickyClass:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsx("div",{children:i==="edit"&&e.jsx(H,{onDelete:c})}),e.jsxs("div",{className:"md:flex items-center",children:[e.jsx(f,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:()=>o==null?void 0:o(),children:"Batal"}),e.jsx(f,{size:"sm",variant:"solid",loading:a,icon:e.jsx(D,{}),type:"submit",children:"Simpan"})]})]})]})})})})});M.displayName="PenggunaForm";export{M as P};
