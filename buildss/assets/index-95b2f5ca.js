import{ah as x,ai as D,aj as E,ak as K,al as S,a as C,a8 as N,a6 as A,r as b,j as s,am as v}from"./index-b009c0ac.js";import{D as F}from"./DoubleSidedImage-eb3e49ea.js";import{i as m,t as o,N as c}from"./Views-3aa30f3b.js";import{c as T,d as w,b as M}from"./KlienService-b60295c6.js";import{K as R}from"./KlienForm-e318acc9.js";import"./StickyFooter-132dd9b0.js";import"./ConfirmDialog-ac6f9f6d.js";import"./formik.esm-e4f7a6c1.js";import"./index-7729926c.js";import"./index.esm-0e511974.js";const h="klienEdit",d=x(h+"/getKliens",async t=>{try{return(await T(t)).data}catch(e){if(e.response&&e.response.data){const n=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:n}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}}),G=async t=>{try{return(await w(t)).data}catch(e){if(e.response&&e.response.data){const n=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:n}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}},I=async t=>(await M(t)).data,L={loading:!0,klienData:{}},P=D({name:`${h}/state`,initialState:L,reducers:{},extraReducers:t=>{t.addCase(d.fulfilled,(e,n)=>{e.klienData=n.payload,e.loading=!1}).addCase(d.pending,e=>{e.loading=!0})}}),$=P.reducer,q=E({data:$}),g=K;S("klienEdit",q);const O=()=>{const t=C(),e=N(),n=A(),i=g(a=>a.klienEdit.data.klienData),l=g(a=>a.klienEdit.data.loading),f=a=>{t(d(a))},p=a=>{o.push(s.jsxs(c,{title:`Successfuly ${a}`,type:"success",duration:2500,children:["Product successfuly ",a]}),{placement:"top-center"}),n("/master/klien")},y=async(a,r)=>{try{r(!0);const u=await G(a);u.statusCode===200?p("updated"):o.push(s.jsx(c,{title:"Gagal menambahkan",type:"danger",duration:3500,children:u.message}),{placement:"top-center"})}finally{r(!1)}},j=()=>{n("/master/klien")},k=async a=>{a(!1);const r=await I({id:i.id});r.statusCode===200?p("deleted"):o.push(s.jsx(c,{title:"Gagal menghapus",type:"danger",duration:3500,children:r.message}),{placement:"top-center"})};return b.useEffect(()=>{const r={id:e.pathname.substring(e.pathname.lastIndexOf("/")+1)};f(r)},[e.pathname]),s.jsxs(s.Fragment,{children:[s.jsx(v,{loading:l,children:!m(i)&&s.jsx(s.Fragment,{children:s.jsx(R,{type:"edit",initialData:i,onFormSubmit:y,onDiscard:j,onDelete:k})})}),!l&&m(i)&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[s.jsx(F,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No product found!"}),s.jsx("h3",{className:"mt-8",children:"No product found!"})]})]})},Y=O;export{Y as default};
