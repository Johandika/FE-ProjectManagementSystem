import{ah as O,ai as H,aj as M,ak as q,a as f,j as e,r as x,a6 as G,L as S,al as B}from"./index-b009c0ac.js";import{a as V,b as $}from"./KlienService-b60295c6.js";import{C as _,A as Q}from"./ConfirmDialog-ac6f9f6d.js";import{D as W}from"./DataTable-1ce7dae1.js";import{t as J,N as U,w as X,H as Y,x as y,I as F,y as w,F as Z,z as D,am as h,R as k,B as b,E as ee,h as ae,aF as te,G as se}from"./Views-3aa30f3b.js";import{u as ne}from"./useThemeClass-c7400041.js";import{d as le}from"./debounce-4e92db93.js";import{F as ie,a as oe,b as C}from"./formik.esm-e4f7a6c1.js";const L="klienList",j=O(L+"/getKliens",async t=>{const a=await V(t);return{data:a.data.data,total:a.data.totaldataClient,totalPage:a.data.totalPage}}),re=async t=>(await $(t)).data,P={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},ce={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:P,filterData:{name:"",category:["bags","cloths","devices","shoes","d"],status:[0,1,2],productStatus:0}},K=H({name:`${L}/state`,initialState:ce,reducers:{updateProductList:(t,a)=>{t.productList=a.payload},setTableData:(t,a)=>{t.tableData=a.payload},setFilterData:(t,a)=>{t.filterData=a.payload},toggleDeleteConfirmation:(t,a)=>{t.deleteConfirmation=a.payload},setSelectedProduct:(t,a)=>{t.selectedProduct=a.payload}},extraReducers:t=>{t.addCase(j.fulfilled,(a,i)=>{a.productList=i.payload.data,a.tableData.total=i.payload.total,a.tableData.totalPage=i.payload.totalPage,a.loading=!1}).addCase(j.pending,a=>{a.loading=!0})}}),{updateProductList:Pe,setTableData:N,setFilterData:de,toggleDeleteConfirmation:v,setSelectedProduct:me}=K.actions,ue=K.reducer,he=M({data:ue}),p=q,xe=()=>{const t=f(),a=p(c=>c.klienList.data.deleteConfirmation),i=p(c=>c.klienList.data.selectedProduct),d=p(c=>c.klienList.data.tableData),r=()=>{t(v(!1))},n=async()=>{t(v(!1)),await re({id:i})&&(t(j(d)),J.push(e.jsx(U,{title:"Successfuly Deleted",type:"success",duration:2500,children:"Item berhasil dihapus"}),{placement:"top-center"}))};return e.jsx(_,{isOpen:a,type:"danger",title:"Hapus Klien",confirmButtonColor:"red-600",onClose:r,onRequestClose:r,onCancel:r,onConfirm:n,children:e.jsx("p",{children:"Apakah kamu yakin ingin menghapus klien ini?"})})},pe=({row:t})=>{const a=f(),{textTheme:i}=ne(),d=G(),r=()=>{d(`/master/klien-edit/${t.id}`)},n=()=>{a(v(!0)),a(me(t.id))};return e.jsxs("div",{className:"flex justify-end text-lg",children:[e.jsx("span",{className:`cursor-pointer p-2 hover:${i}`,onClick:r,children:e.jsx(X,{})}),e.jsx("span",{className:"cursor-pointer p-2 hover:text-red-500",onClick:n,children:e.jsx(Y,{})})]})},ge=()=>{const t=x.useRef(null),a=f(),{pageIndex:i,pageSize:d,sort:r,query:n,total:c}=p(l=>l.klienList.data.tableData),s=p(l=>l.klienList.data.filterData),o=p(l=>l.klienList.data.loading),g=p(l=>l.klienList.data.productList);x.useEffect(()=>{I()},[i,d,r]),x.useEffect(()=>{var l;t&&((l=t.current)==null||l.resetSorting())},[s]);const m=x.useMemo(()=>({pageIndex:i,pageSize:d,sort:r,query:n,total:c}),[i,d,r,n,c]),I=()=>{a(j({pageIndex:i,pageSize:d,sort:r,query:n,filterData:s}))},R=x.useMemo(()=>[{header:"Nama",accessorKey:"nama",cell:l=>{const u=l.row.original;return e.jsx("span",{className:"capitalize",children:u.nama})}},{header:"Keterangan",accessorKey:"keterangan",cell:l=>{const u=l.row.original;return e.jsx("span",{className:"capitalize",children:u.keterangan})}},{header:"",id:"action",cell:l=>e.jsx(pe,{row:l.row.original})}],[]),z=l=>{const u=y(m);u.pageIndex=l,a(N(u))},A=l=>{const u=y(m);u.pageSize=Number(l),u.pageIndex=1,a(N(u))},E=l=>{const u=y(m);u.sort=l,a(N(u))};return e.jsxs(e.Fragment,{children:[e.jsx(W,{ref:t,columns:R,data:g,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:o,pagingData:{total:m.total,pageIndex:m.pageIndex,pageSize:m.pageSize,totalPage:m.totalPage},onPaginationChange:z,onSelectChange:A,onSort:E}),e.jsx(xe,{})]})},je=()=>{const t=f(),a=x.useRef(null),i=p(s=>s.klienList.data.tableData),d=le(r,500);function r(s){const o=y(i);o.query=s,o.pageIndex=1,typeof s=="string"&&s.length>1&&n(o),typeof s=="string"&&s.length===0&&n(o)}const n=s=>{t(N(s)),t(j(s))},c=s=>{d(s.target.value)};return e.jsx(F,{ref:a,className:"max-w-md md:w-52 md:mb-0 mb-4",size:"sm",placeholder:"Cari klien",prefix:e.jsx(w,{className:"text-lg"}),onChange:c})},T=x.forwardRef(({onSubmitComplete:t},a)=>{const i=f(),d=p(n=>n.klienList.data.filterData),r=n=>{t==null||t(),i(de(n)),i(j(P))};return e.jsx(ie,{enableReinitialize:!0,innerRef:a,initialValues:d,onSubmit:n=>{r(n)},children:({values:n,touched:c,errors:s})=>e.jsx(oe,{children:e.jsxs(Z,{children:[e.jsxs(D,{invalid:s.name&&c.name,errorMessage:s.name,children:[e.jsx("h6",{className:"mb-4",children:"Included text"}),e.jsx(C,{type:"text",autoComplete:"off",name:"name",placeholder:"Keyword",component:F,prefix:e.jsx(w,{className:"text-lg"})})]}),e.jsxs(D,{invalid:s.category&&c.category,errorMessage:s.category,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(C,{name:"category",children:({field:o,form:g})=>e.jsx(e.Fragment,{children:e.jsxs(h.Group,{vertical:!0,value:n.category,onChange:m=>g.setFieldValue(o.name,m),children:[e.jsxs(h,{className:"mb-3",name:o.name,value:"bags",children:["Bags"," "]}),e.jsxs(h,{className:"mb-3",name:o.name,value:"cloths",children:["Cloths"," "]}),e.jsxs(h,{className:"mb-3",name:o.name,value:"devices",children:["Devices"," "]}),e.jsxs(h,{className:"mb-3",name:o.name,value:"shoes",children:["Shoes"," "]}),e.jsxs(h,{name:o.name,value:"watches",children:["Watches"," "]})]})})})]}),e.jsxs(D,{invalid:s.status&&c.status,errorMessage:s.status,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(C,{name:"status",children:({field:o,form:g})=>e.jsx(e.Fragment,{children:e.jsxs(h.Group,{vertical:!0,value:n.status,onChange:m=>g.setFieldValue(o.name,m),children:[e.jsxs(h,{className:"mb-3",name:o.name,value:0,children:["In Stock"," "]}),e.jsxs(h,{className:"mb-3",name:o.name,value:1,children:["Limited"," "]}),e.jsxs(h,{className:"mb-3",name:o.name,value:2,children:["Out Of Stock"," "]})]})})})]}),e.jsxs(D,{invalid:s.productStatus&&c.productStatus,errorMessage:s.productStatus,children:[e.jsx("h6",{className:"mb-4",children:"Product Status"}),e.jsx(C,{name:"productStatus",children:({field:o,form:g})=>e.jsxs(k.Group,{vertical:!0,value:n.productStatus,onChange:m=>g.setFieldValue(o.name,m),children:[e.jsx(k,{value:0,children:"Published"}),e.jsx(k,{value:1,children:"Disabled"}),e.jsx(k,{value:2,children:"Archive"})]})})]})]})})})}),be=({onSaveClick:t,onCancel:a})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(b,{size:"sm",className:"mr-2",onClick:a,children:"Cancel"}),e.jsx(b,{size:"sm",variant:"solid",onClick:t,children:"Query"})]}),fe=()=>{const t=x.useRef(null),[a,i]=x.useState(!1),d=()=>{i(!0)},r=()=>{i(!1)},n=()=>{var c;(c=t.current)==null||c.submitForm()};return e.jsxs(e.Fragment,{children:[e.jsx(b,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:e.jsx(ee,{}),onClick:()=>d(),children:"Filter"}),e.jsx(ae,{title:"Filter",isOpen:a,footer:e.jsx(be,{onCancel:r,onSaveClick:n}),onClose:r,onRequestClose:r,children:e.jsx(T,{ref:t,onSubmitComplete:r})})]})};T.displayName="FilterForm";const De=()=>e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[e.jsx(je,{}),e.jsx(fe,{}),e.jsx(S,{download:!0,className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",to:"/data/product-list.csv",target:"_blank",children:e.jsx(b,{block:!0,size:"sm",icon:e.jsx(te,{}),children:"Export"})}),e.jsx(S,{className:"block lg:inline-block md:mb-0 mb-4",to:"/master/klien-new",children:e.jsx(b,{block:!0,variant:"solid",size:"sm",icon:e.jsx(se,{}),children:"Tambah Klien"})})]});B("klienList",he);const ke=()=>e.jsxs(Q,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Daftar Klien"}),e.jsx(De,{})]}),e.jsx(ge,{})]}),Ke=ke;export{Ke as default};
