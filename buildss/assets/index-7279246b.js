import{ah as H,ai as P,aj as M,ak as G,a as j,j as e,r as x,a6 as q,L as S,al as V}from"./index-b009c0ac.js";import{aG as $,aH as K,t as _,N as Q,w as W,H as J,x as y,I as F,y as B,F as U,z as f,am as h,R as D,B as k,E as X,h as Y,aF as Z,G as ee}from"./Views-3aa30f3b.js";import{C as ae,A as se}from"./ConfirmDialog-ac6f9f6d.js";import{D as te}from"./DataTable-1ce7dae1.js";import{u as ne}from"./useThemeClass-c7400041.js";import{d as re}from"./debounce-4e92db93.js";import{F as le,a as ie,b as C}from"./formik.esm-e4f7a6c1.js";const w="berkasList",g=H(w+"/getBerkases",async a=>(await $(a)).data),oe=async a=>(await K(a)).data,L={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},ce={loading:!1,deleteConfirmation:!1,selectedBerkas:"",berkasList:[],tableData:L,filterData:{name:"",category:["bags","cloths","devices","shoes","b"],status:[0,1,2],berkasStatus:0}},T=P({name:`${w}/state`,initialState:ce,reducers:{updateBerkasList:(a,s)=>{a.berkasList=s.payload},setTableData:(a,s)=>{a.tableData=s.payload},setFilterData:(a,s)=>{a.filterData=s.payload},toggleDeleteConfirmation:(a,s)=>{a.deleteConfirmation=s.payload},setSelectedBerkas:(a,s)=>{a.selectedBerkas=s.payload}},extraReducers:a=>{a.addCase(g.fulfilled,(s,i)=>{s.berkasList=i.payload.data,s.tableData.total=i.payload.total,s.loading=!1}).addCase(g.pending,s=>{s.loading=!0})}}),{updateBerkasList:we,setTableData:N,setFilterData:de,toggleDeleteConfirmation:v,setSelectedBerkas:me}=T.actions,ue=T.reducer,he=M({data:ue}),b=G,xe=()=>{const a=j(),s=b(c=>c.berkasList.data.deleteConfirmation),i=b(c=>c.berkasList.data.selectedBerkas),d=b(c=>c.berkasList.data.tableData),o=()=>{a(v(!1))},n=async()=>{a(v(!1)),await oe({id:i})&&(a(g(d)),_.push(e.jsx(Q,{title:"Successfuly Deleted",type:"success",duration:2500,children:"Item berhasil dihapus"}),{placement:"top-center"}))};return e.jsx(ae,{isOpen:s,type:"danger",title:"Hapus Berkas",confirmButtonColor:"red-600",onClose:o,onRequestClose:o,onCancel:o,onConfirm:n,children:e.jsx("p",{children:"Apakah kamu yakin ingin menghapus berkas ini?"})})},be=({row:a})=>{const s=j(),{textTheme:i}=ne(),d=q(),o=()=>{d(`/master/berkas-edit/${a.id}`)},n=()=>{s(v(!0)),s(me(a.id))};return e.jsxs("div",{className:"flex justify-end text-lg",children:[e.jsx("span",{className:`cursor-pointer p-2 hover:${i}`,onClick:o,children:e.jsx(W,{})}),e.jsx("span",{className:"cursor-pointer p-2 hover:text-red-500",onClick:n,children:e.jsx(J,{})})]})},pe=()=>{const a=x.useRef(null),s=j(),{pageIndex:i,pageSize:d,sort:o,query:n,total:c}=b(l=>l.berkasList.data.tableData),t=b(l=>l.berkasList.data.filterData),r=b(l=>l.berkasList.data.loading),p=b(l=>l.berkasList.data.berkasList);x.useEffect(()=>{R()},[i,d,o]),x.useEffect(()=>{var l;a&&((l=a.current)==null||l.resetSorting())},[t]);const m=x.useMemo(()=>({pageIndex:i,pageSize:d,sort:o,query:n,total:c}),[i,d,o,n,c]),R=()=>{s(g({pageIndex:i,pageSize:d,sort:o,query:n,filterData:t}))},z=x.useMemo(()=>[{header:"Nama",accessorKey:"nama",cell:l=>{const u=l.row.original;return e.jsx("span",{className:"capitalize",children:u.nama})}},{header:"",id:"action",cell:l=>e.jsx(be,{row:l.row.original})}],[]),A=l=>{const u=y(m);u.pageIndex=l,s(N(u))},E=l=>{const u=y(m);u.pageSize=Number(l),u.pageIndex=1,s(N(u))},O=l=>{const u=y(m);u.sort=l,s(N(u))};return e.jsxs(e.Fragment,{children:[e.jsx(te,{ref:a,columns:z,data:p,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:r,pagingData:{total:m.total,pageIndex:m.pageIndex,pageSize:m.pageSize},onPaginationChange:A,onSelectChange:E,onSort:O}),e.jsx(xe,{})]})},ge=()=>{const a=j(),s=x.useRef(null),i=b(t=>t.berkasList.data.tableData),d=re(o,500);function o(t){const r=y(i);r.query=t,r.pageIndex=1,typeof t=="string"&&t.length>1&&n(r),typeof t=="string"&&t.length===0&&n(r)}const n=t=>{a(N(t)),a(g(t))},c=t=>{d(t.target.value)};return e.jsx(F,{ref:s,className:"max-w-md md:w-52 md:mb-0 mb-4",size:"sm",placeholder:"Cari berkas",prefix:e.jsx(B,{className:"text-lg"}),onChange:c})},I=x.forwardRef(({onSubmitComplete:a},s)=>{const i=j(),d=b(n=>n.berkasList.data.filterData),o=n=>{a==null||a(),i(de(n)),i(g(L))};return e.jsx(le,{enableReinitialize:!0,innerRef:s,initialValues:d,onSubmit:n=>{o(n)},children:({values:n,touched:c,errors:t})=>e.jsx(ie,{children:e.jsxs(U,{children:[e.jsxs(f,{invalid:t.name&&c.name,errorMessage:t.name,children:[e.jsx("h6",{className:"mb-4",children:"Included text"}),e.jsx(C,{type:"text",autoComplete:"off",name:"name",placeholder:"Keyword",component:F,prefix:e.jsx(B,{className:"text-lg"})})]}),e.jsxs(f,{invalid:t.category&&c.category,errorMessage:t.category,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(C,{name:"category",children:({field:r,form:p})=>e.jsx(e.Fragment,{children:e.jsxs(h.Group,{vertical:!0,value:n.category,onChange:m=>p.setFieldValue(r.name,m),children:[e.jsxs(h,{className:"mb-3",name:r.name,value:"bags",children:["Bags"," "]}),e.jsxs(h,{className:"mb-3",name:r.name,value:"cloths",children:["Cloths"," "]}),e.jsxs(h,{className:"mb-3",name:r.name,value:"devices",children:["Devices"," "]}),e.jsxs(h,{className:"mb-3",name:r.name,value:"shoes",children:["Shoes"," "]}),e.jsxs(h,{name:r.name,value:"watches",children:["Watches"," "]})]})})})]}),e.jsxs(f,{invalid:t.status&&c.status,errorMessage:t.status,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(C,{name:"status",children:({field:r,form:p})=>e.jsx(e.Fragment,{children:e.jsxs(h.Group,{vertical:!0,value:n.status,onChange:m=>p.setFieldValue(r.name,m),children:[e.jsxs(h,{className:"mb-3",name:r.name,value:0,children:["In Stock"," "]}),e.jsxs(h,{className:"mb-3",name:r.name,value:1,children:["Limited"," "]}),e.jsxs(h,{className:"mb-3",name:r.name,value:2,children:["Out Of Stock"," "]})]})})})]}),e.jsxs(f,{invalid:t.berkasStatus&&c.berkasStatus,errorMessage:t.berkasStatus,children:[e.jsx("h6",{className:"mb-4",children:"Product Status"}),e.jsx(C,{name:"berkasStatus",children:({field:r,form:p})=>e.jsxs(D.Group,{vertical:!0,value:n.berkasStatus,onChange:m=>p.setFieldValue(r.name,m),children:[e.jsx(D,{value:0,children:"Published"}),e.jsx(D,{value:1,children:"Disabled"}),e.jsx(D,{value:2,children:"Archive"})]})})]})]})})})}),ke=({onSaveClick:a,onCancel:s})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(k,{size:"sm",className:"mr-2",onClick:s,children:"Cancel"}),e.jsx(k,{size:"sm",variant:"solid",onClick:a,children:"Query"})]}),je=()=>{const a=x.useRef(null),[s,i]=x.useState(!1),d=()=>{i(!0)},o=()=>{i(!1)},n=()=>{var c;(c=a.current)==null||c.submitForm()};return e.jsxs(e.Fragment,{children:[e.jsx(k,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:e.jsx(X,{}),onClick:()=>d(),children:"Filter"}),e.jsx(Y,{title:"Filter",isOpen:s,footer:e.jsx(ke,{onCancel:o,onSaveClick:n}),onClose:o,onRequestClose:o,children:e.jsx(I,{ref:a,onSubmitComplete:o})})]})};I.displayName="FilterForm";const fe=()=>e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[e.jsx(ge,{}),e.jsx(je,{}),e.jsx(S,{download:!0,className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",to:"/data/product-list.csv",target:"_blank",children:e.jsx(k,{block:!0,size:"sm",icon:e.jsx(Z,{}),children:"Export"})}),e.jsx(S,{className:"block lg:inline-block md:mb-0 mb-4",to:"/master/berkas-new",children:e.jsx(k,{block:!0,variant:"solid",size:"sm",icon:e.jsx(ee,{}),children:"Tambah Berkas"})})]});V("berkasList",he);const De=()=>e.jsxs(se,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Daftar Berkas Tagihan"}),e.jsx(fe,{})]}),e.jsx(pe,{})]}),Le=De;export{Le as default};
