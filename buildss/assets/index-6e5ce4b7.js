import{ah as P,ai as M,aj as q,ak as G,a as f,j as a,r as x,a6 as B,L as k,al as V}from"./index-b009c0ac.js";import{a as $,b as K}from"./SatuanService-190aa774.js";import{C as _,A as Q}from"./ConfirmDialog-ac6f9f6d.js";import{D as W}from"./DataTable-1ce7dae1.js";import{t as J,N as U,w as X,H as Y,x as y,I as F,y as w,F as Z,z as S,am as h,R as D,B as b,E as aa,h as ea,aF as sa,G as ta}from"./Views-3aa30f3b.js";import{u as na}from"./useThemeClass-c7400041.js";import{d as la}from"./debounce-4e92db93.js";import{F as ia,a as oa,b as C}from"./formik.esm-e4f7a6c1.js";const L="satuanList",j=P(L+"/getSatuans",async e=>(await $(e)).data),ca=async e=>(await K(e)).data,T={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},ra={loading:!1,deleteConfirmation:!1,selectedSatuan:"",satuanList:[],tableData:T,filterData:{name:"",category:["bags","cloths","devices","shoes","c"],status:[0,1,2],satuanStatus:0}},I=M({name:`${L}/state`,initialState:ra,reducers:{updateSatuanList:(e,s)=>{e.satuanList=s.payload},setTableData:(e,s)=>{e.tableData=s.payload},setFilterData:(e,s)=>{e.filterData=s.payload},toggleDeleteConfirmation:(e,s)=>{e.deleteConfirmation=s.payload},setSelectedSatuan:(e,s)=>{e.selectedSatuan=s.payload}},extraReducers:e=>{e.addCase(j.fulfilled,(s,o)=>{s.satuanList=o.payload.data,s.tableData.total=o.payload.total,s.loading=!1}).addCase(j.pending,s=>{s.loading=!0})}}),{updateSatuanList:Ta,setTableData:v,setFilterData:ua,toggleDeleteConfirmation:N,setSelectedSatuan:da}=I.actions,ma=I.reducer,ha=q({data:ma}),p=G,xa=()=>{const e=f(),s=p(r=>r.satuanList.data.deleteConfirmation),o=p(r=>r.satuanList.data.selectedSatuan),u=p(r=>r.satuanList.data.tableData),c=()=>{e(N(!1))},n=async()=>{e(N(!1)),await ca({id:o})&&(e(j(u)),J.push(a.jsx(U,{title:"Successfuly Deleted",type:"success",duration:2500,children:"Item berhasil dihapus"}),{placement:"top-center"}))};return a.jsx(_,{isOpen:s,type:"danger",title:"Hapus Satuan",confirmButtonColor:"red-600",onClose:c,onRequestClose:c,onCancel:c,onConfirm:n,children:a.jsx("p",{children:"Apakah kamu yakin ingin menghapus satuan ini?"})})},pa=({row:e})=>{const s=f(),{textTheme:o}=na(),u=B(),c=()=>{u(`/master/satuan-edit/${e.id}`)},n=()=>{s(N(!0)),s(da(e.id))};return a.jsxs("div",{className:"flex justify-end text-lg",children:[a.jsx("span",{className:`cursor-pointer p-2 hover:${o}`,onClick:c,children:a.jsx(X,{})}),a.jsx("span",{className:"cursor-pointer p-2 hover:text-red-500",onClick:n,children:a.jsx(Y,{})})]})},ga=()=>{const e=x.useRef(null),s=f(),{pageIndex:o,pageSize:u,sort:c,query:n,total:r}=p(i=>i.satuanList.data.tableData),t=p(i=>i.satuanList.data.filterData),l=p(i=>i.satuanList.data.loading),g=p(i=>i.satuanList.data.satuanList);x.useEffect(()=>{z()},[o,u,c]),x.useEffect(()=>{var i;e&&((i=e.current)==null||i.resetSorting())},[t]);const d=x.useMemo(()=>({pageIndex:o,pageSize:u,sort:c,query:n,total:r}),[o,u,c,n,r]),z=()=>{s(j({pageIndex:o,pageSize:u,sort:c,query:n,filterData:t}))},A=x.useMemo(()=>[{header:"Satuan",accessorKey:"satuan",cell:i=>{const m=i.row.original;return a.jsx("span",{className:"capitalize",children:m.satuan})}},{header:"",id:"action",cell:i=>a.jsx(pa,{row:i.row.original})}],[]),E=i=>{const m=y(d);m.pageIndex=i,s(v(m))},O=i=>{const m=y(d);m.pageSize=Number(i),m.pageIndex=1,s(v(m))},H=i=>{const m=y(d);m.sort=i,s(v(m))};return a.jsxs(a.Fragment,{children:[a.jsx(W,{ref:e,columns:A,data:g,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:l,pagingData:{total:d.total,pageIndex:d.pageIndex,pageSize:d.pageSize},onPaginationChange:E,onSelectChange:O,onSort:H}),a.jsx(xa,{})]})},ja=()=>{const e=f(),s=x.useRef(null),o=p(t=>t.satuanList.data.tableData),u=la(c,500);function c(t){const l=y(o);l.query=t,l.pageIndex=1,typeof t=="string"&&t.length>1&&n(l),typeof t=="string"&&t.length===0&&n(l)}const n=t=>{e(v(t)),e(j(t))},r=t=>{u(t.target.value)};return a.jsx(F,{ref:s,className:"max-w-md md:w-52 md:mb-0 mb-4",size:"sm",placeholder:"Cari satuan",prefix:a.jsx(w,{className:"text-lg"}),onChange:r})},R=x.forwardRef(({onSubmitComplete:e},s)=>{const o=f(),u=p(n=>n.satuanList.data.filterData),c=n=>{e==null||e(),o(ua(n)),o(j(T))};return a.jsx(ia,{enableReinitialize:!0,innerRef:s,initialValues:u,onSubmit:n=>{c(n)},children:({values:n,touched:r,errors:t})=>a.jsx(oa,{children:a.jsxs(Z,{children:[a.jsxs(S,{invalid:t.name&&r.name,errorMessage:t.name,children:[a.jsx("h6",{className:"mb-4",children:"Included text"}),a.jsx(C,{type:"text",autoComplete:"off",name:"name",placeholder:"Keyword",component:F,prefix:a.jsx(w,{className:"text-lg"})})]}),a.jsxs(S,{invalid:t.category&&r.category,errorMessage:t.category,children:[a.jsx("h6",{className:"mb-4",children:"Product Category"}),a.jsx(C,{name:"category",children:({field:l,form:g})=>a.jsx(a.Fragment,{children:a.jsxs(h.Group,{vertical:!0,value:n.category,onChange:d=>g.setFieldValue(l.name,d),children:[a.jsxs(h,{className:"mb-3",name:l.name,value:"bags",children:["Bags"," "]}),a.jsxs(h,{className:"mb-3",name:l.name,value:"cloths",children:["Cloths"," "]}),a.jsxs(h,{className:"mb-3",name:l.name,value:"devices",children:["Devices"," "]}),a.jsxs(h,{className:"mb-3",name:l.name,value:"shoes",children:["Shoes"," "]}),a.jsxs(h,{name:l.name,value:"watches",children:["Watches"," "]})]})})})]}),a.jsxs(S,{invalid:t.status&&r.status,errorMessage:t.status,children:[a.jsx("h6",{className:"mb-4",children:"Product Category"}),a.jsx(C,{name:"status",children:({field:l,form:g})=>a.jsx(a.Fragment,{children:a.jsxs(h.Group,{vertical:!0,value:n.status,onChange:d=>g.setFieldValue(l.name,d),children:[a.jsxs(h,{className:"mb-3",name:l.name,value:0,children:["In Stock"," "]}),a.jsxs(h,{className:"mb-3",name:l.name,value:1,children:["Limited"," "]}),a.jsxs(h,{className:"mb-3",name:l.name,value:2,children:["Out Of Stock"," "]})]})})})]}),a.jsxs(S,{invalid:t.satuanStatus&&r.satuanStatus,errorMessage:t.satuanStatus,children:[a.jsx("h6",{className:"mb-4",children:"Product Status"}),a.jsx(C,{name:"satuanStatus",children:({field:l,form:g})=>a.jsxs(D.Group,{vertical:!0,value:n.satuanStatus,onChange:d=>g.setFieldValue(l.name,d),children:[a.jsx(D,{value:0,children:"Published"}),a.jsx(D,{value:1,children:"Disabled"}),a.jsx(D,{value:2,children:"Archive"})]})})]})]})})})}),ba=({onSaveClick:e,onCancel:s})=>a.jsxs("div",{className:"text-right w-full",children:[a.jsx(b,{size:"sm",className:"mr-2",onClick:s,children:"Cancel"}),a.jsx(b,{size:"sm",variant:"solid",onClick:e,children:"Query"})]}),fa=()=>{const e=x.useRef(null),[s,o]=x.useState(!1),u=()=>{o(!0)},c=()=>{o(!1)},n=()=>{var r;(r=e.current)==null||r.submitForm()};return a.jsxs(a.Fragment,{children:[a.jsx(b,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:a.jsx(aa,{}),onClick:()=>u(),children:"Filter"}),a.jsx(ea,{title:"Filter",isOpen:s,footer:a.jsx(ba,{onCancel:c,onSaveClick:n}),onClose:c,onRequestClose:c,children:a.jsx(R,{ref:e,onSubmitComplete:c})})]})};R.displayName="FilterForm";const Sa=()=>a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[a.jsx(ja,{}),a.jsx(fa,{}),a.jsx(k,{download:!0,className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",to:"/data/product-list.csv",target:"_blank",children:a.jsx(b,{block:!0,size:"sm",icon:a.jsx(sa,{}),children:"Export"})}),a.jsx(k,{className:"block lg:inline-block md:mb-0 mb-4",to:"/master/satuan-new",children:a.jsx(b,{block:!0,variant:"solid",size:"sm",icon:a.jsx(ta,{}),children:"Tambah Satuan"})})]});V("satuanList",ha);const Da=()=>a.jsxs(Q,{className:"h-full",bodyClass:"h-full",children:[a.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"mb-4 lg:mb-0",children:"Daftar Satuan"}),a.jsx(Sa,{})]}),a.jsx(ga,{})]}),Ia=Da;export{Ia as default};
