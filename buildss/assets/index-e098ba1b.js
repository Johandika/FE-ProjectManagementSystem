import{ah as x,ai as b,aj as D,ak as E,al as B,a as S,a8 as C,a6 as N,r as A,j as s,am as v}from"./index-b009c0ac.js";import{D as F}from"./DoubleSidedImage-eb3e49ea.js";import{aI as T,aJ as w,aH as I,i as m,t as i,N as c}from"./Views-3aa30f3b.js";import{B as M}from"./BerkasForm-0c2fda47.js";import"./StickyFooter-132dd9b0.js";import"./ConfirmDialog-ac6f9f6d.js";import"./formik.esm-e4f7a6c1.js";import"./index-7729926c.js";import"./index.esm-0e511974.js";const h="berkasEdit",d=x(h+"/getBerkases",async t=>{try{return(await T(t)).data}catch(e){if(e.response&&e.response.data){const r=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:r}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}}),R=async t=>{try{return(await w(t)).data}catch(e){if(e.response&&e.response.data){const r=Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message||"Terjadi kesalahan";return{statusCode:e.response.status||400,message:r}}return{statusCode:500,message:"Terjadi kesalahan pada server"}}},G=async t=>(await I(t)).data,L={loading:!0,berkasData:{}},$=b({name:`${h}/state`,initialState:L,reducers:{},extraReducers:t=>{t.addCase(d.fulfilled,(e,r)=>{e.berkasData=r.payload,e.loading=!1}).addCase(d.pending,e=>{e.loading=!0})}}),P=$.reducer,q=D({data:P}),g=E;B("berkasEdit",q);const H=()=>{const t=S(),e=C(),r=N(),o=g(a=>a.berkasEdit.data.berkasData),p=g(a=>a.berkasEdit.data.loading),k=a=>{t(d(a))},l=a=>{i.push(s.jsxs(c,{title:`Successfuly ${a}`,type:"success",duration:2500,children:["Berkas successfuly ",a]}),{placement:"top-center"}),r("/master/berkas")},f=async(a,n)=>{try{n(!0);const u=await R(a);u.statusCode===200?l("updated"):i.push(s.jsx(c,{title:"Gagal menambahkan",type:"danger",duration:3500,children:u.message}),{placement:"top-center"})}finally{n(!1)}},y=()=>{r("/master/berkas")},j=async a=>{a(!1);const n=await G({id:o.id});n.statusCode===200?l("deleted"):i.push(s.jsx(c,{title:"Gagal menghapus",type:"danger",duration:3500,children:n.message}),{placement:"top-center"})};return A.useEffect(()=>{const n={id:e.pathname.substring(e.pathname.lastIndexOf("/")+1)};k(n)},[e.pathname]),s.jsxs(s.Fragment,{children:[s.jsx(v,{loading:p,children:!m(o)&&s.jsx(s.Fragment,{children:s.jsx(M,{type:"edit",initialData:o,onFormSubmit:f,onDiscard:y,onDelete:j})})}),!p&&m(o)&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[s.jsx(F,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No product found!"}),s.jsx("h3",{className:"mt-8",children:"No product found!"})]})]})},X=H;export{X as default};
