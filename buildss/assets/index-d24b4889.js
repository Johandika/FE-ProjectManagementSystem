import{j as a,a as pn,a8 as mg,r as N,al as Wn,am as In,V as ju,G as hg,ag as qe,ah as ht,ai as pg,aj as gg,ak as xg,c as la,K as Sa}from"./index-b009c0ac.js";import{J as en,B as $,K as Oi,L as vg,O as Su,P as bg,t as ie,N as se,Q as Du,U as gr,z as ke,I as We,W as wn,G as kg,w as mn,H as $t,X as yg,Y as at,Z as _g,$ as jg,a0 as Sg,a1 as Dg,a2 as Ng,a3 as wg,a4 as Ig,a5 as Fi,a6 as Cg,a7 as Pg,a8 as Ag,a9 as Tg,aa as Eg,ab as Bg,ac as Lg,ad as Og,ae as Fg,af as Mg,ag as Rg,ah as Ug,ai as Wg,F as Na,aj as Hg,C as Wi,ak as qg,al as Jg,am as Nu,an as $g,ao as Gg,ap as zg,aq as Kg,ar as Yg,as as Vg,at as Zg,au as wu}from"./Views-3aa30f3b.js";import{a as Un}from"./formatDate-07229bbd.js";import{C as _t,A as Hn}from"./ConfirmDialog-ac6f9f6d.js";import"./chart.constant-a47010a0.js";import"./SvgIcon-60957c66.js";import"./DataTable-1ce7dae1.js";import{F as tn,a as hn,b as Be}from"./formik.esm-e4f7a6c1.js";import{N as Mt}from"./react-number-format.es-92e434c6.js";import{c as Gt,a as Ze,b as Xg,d as xu,e as Mi,f as Qg}from"./index.esm-0e511974.js";import{i as ua}from"./isLastChild-83eb4c23.js";import{a as Iu,b as ex,c as tx,d as nx,e as ax}from"./SubkontraktorService-16494bf1.js";import{a as rx}from"./SatuanService-190aa774.js";import{I as ix}from"./index-3c1a1a0d.js";import"./useThemeClass-c7400041.js";const sx=({title:h,desc:m,...u})=>a.jsxs("div",{...u,children:[a.jsx("h5",{children:h}),a.jsx("p",{children:m})]}),gn=sx;Wn("proyekEdit",Du);function lx(){var Ee,je,pe;const h=pn(),m=mg(),[u,Q]=N.useState(!1),[Ne,z]=N.useState(!1),[K,he]=N.useState(null),{proyekData:U}=en(ne=>ne.proyekEdit.data),ye=ne=>{h(Oi(ne)).unwrap().then(O=>{O&&O.pekerjaan&&h(vg(O.pekerjaan))}),h(Su(ne))},_e=()=>{he({id:U.id,newStatus:!U.status_retensi,nama:U.pekerjaan}),z(!0)},G=async()=>{var ne,O,re,M;z(!1),Q(!0);try{const H=await bg({id:K.id,status_retensi:K.newStatus});H&&((ne=H.data)==null?void 0:ne.statusCode)>=200&&((O=H.data)==null?void 0:O.statusCode)<300?(await h(Oi({id:K.id})).unwrap(),ie.push(a.jsx(se,{title:"Status berhasil diperbarui",type:"success",duration:2500,children:"Status Retensi berhasil di update"}),{placement:"top-center"})):ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:H?H==null?void 0:H.message:"Gagal memperbarui status"}),{placement:"top-center"})}catch(H){ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:((M=(re=H==null?void 0:H.response)==null?void 0:re.data)==null?void 0:M.message)||"Gagal memperbarui status"}),{placement:"top-center"})}finally{Q(!1)}},V=()=>{z(!1)};return N.useEffect(()=>{const O={id:m.pathname.substring(m.pathname.lastIndexOf("/")+1)};ye(O)},[m.pathname]),a.jsxs("section",{className:" ",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex flex-col gap-4 border-b border-gray-200 py-6",children:[a.jsx(gn,{title:"Informasi Dasar",desc:"Informasi dasar proyek"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4 ",children:[a.jsx("div",{className:"text-sm",children:"Nama Pekerjaan :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:U.pekerjaan})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Klien :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:(Ee=U.Client)==null?void 0:Ee.nama})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"PIC :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:U.pic})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Nomor Kontrak :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:U.nomor_kontrak||"-"})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Tgl. Kontrak :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:Un(U.tanggal_kontrak||"-")})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Status :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:U.status||"-"})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Nilai Kontrak :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:((je=U.nilai_kontrak)==null?void 0:je.toLocaleString("id-ID"))||"-"})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Uang Muka :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:((pe=U.uang_muka)==null?void 0:pe.toLocaleString("id-ID"))||"-"})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Progress (%) :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:U.progress})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Waktu Pengerjaan (hari) :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:U.timeline})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Retensi :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:U.is_retensi?"Ya":"Tidak"})]}),U.is_retensi===!0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Persen Retensi :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:`${U.persen_retensi}%`||"-"})]}),a.jsxs("div",{className:"flex flex-col gap-0 border-b py-4",children:[a.jsx("div",{className:"text-sm",children:"Tgl. Jatuh Tempo Retensi :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:Un(U.jatuh_tempo_retensi)||"-"})]}),a.jsxs("div",{className:"flex flex-col gap-0  border-b md:border-0  py-4",children:[a.jsx("div",{className:"text-sm",children:"Status Retensi :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:!u&&(U.status_retensi===!0?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-green-500",children:"Sudah Dibayar"}),a.jsx($,{size:"xs",variant:"solid",onClick:_e,children:"Ubah Status"})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-rose-500",children:"Belum Bayar"}),a.jsx($,{size:"xs",variant:"solid",onClick:_e,children:"Ubah Status"})]}))})]})]}),a.jsxs("div",{className:"flex flex-col gap-0  py-4",children:[a.jsx("div",{className:"text-sm",children:"Keterangan :"}),a.jsx("div",{className:"text-base font-semibold text-neutral-500",children:U.keterangan||"-"})]})]})]})]})}),a.jsx(_t,{isOpen:Ne,onClose:V,onRequestClose:V,onCancel:V,type:"warning",title:"Ubah Status",onConfirm:G,children:a.jsxs("p",{children:["Apakah kamu yakin ingin mengubah status retensi berkas menjadi"," ",a.jsx("strong",{children:K!=null&&K.newStatus?"sudah dibayar":"belum dibayar"}),"?"]})})]})}const ux=Gt().shape({tempPabrik:Ze().required("Pabrik harus diisi"),tempNomorPo:Ze().required("Nomor PO harus diisi"),tempTanggalPo:Ze().required("Tanggal PO harus diisi"),tempDetails:Xg().of(Gt().shape({nama_barang:Ze().required("Nama barang harus diisi"),harga:Ze().required("Harga harus diisi"),estimasi_delivery:Ze().required("Estimasi pengerjaan harus diisi")})).min(1,"Minimal satu detail barang harus diisi")}),ox=()=>{const[h,m]=N.useState(!1),[u,Q]=N.useState(null),[Ne,z]=N.useState(!1),K=location.pathname.substring(location.pathname.lastIndexOf("/")+1),he=pn(),{purchaseOrdersData:U,loadingPurchaseOrders:ye}=en(H=>H.proyekEdit.data),[_e,G]=N.useState(!1),[V,Ee]=N.useState(null),[je,pe]=N.useState(!1),[ne,O]=N.useState(null);N.useState(null);const re=H=>{ie.push(a.jsxs(se,{title:`Successfully ${H}`,type:"success",duration:2500,children:["Purchase Order successfully ",H]}),{placement:"top-center"})};N.useEffect(()=>{K&&he(gr({id:K}))},[he,K]);const M={purchases:U||[],tempPabrik:"",tempNomorPo:"",tempTanggalPo:"",tempIdProject:K||"",tempStatus:"",tempDetails:[{nama_barang:"",harga:"",estimasi_delivery:""}]};return a.jsx(In,{loading:ye||Ne,children:a.jsx(tn,{enableReinitialize:!0,initialValues:M,validationSchema:ux,onSubmit:()=>{},children:H=>{const{values:ae,errors:_,touched:A,setFieldValue:T,validateField:J}=H,Y=()=>{m(!0),Q(null),T("tempPabrik",""),T("tempNomorPo",""),T("tempTanggalPo",""),T("tempDetails",[{nama_barang:"",harga:"",estimasi_delivery:""}])},Re=()=>{const R=[...ae.tempDetails];R.push({nama_barang:"",harga:"",estimasi_delivery:""}),T("tempDetails",R)},y=R=>{O(R),pe(!0)},F=async()=>{var R,w;if(ne!==null){z(!0);const Se={id:ne};try{await yg(Se)&&(he(gr({id:K})),re("deleted"))}catch(Z){console.error("Error deleting detail purchase:",Z),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:((w=(R=Z.response)==null?void 0:R.data)==null?void 0:w.message)||"Gagal menghapus detail purchase"}),{placement:"top-center"})}finally{z(!1),pe(!1),O(null)}}},S=async()=>{try{if(await J("tempPabrik"),await J("tempNomorPo"),await J("tempTanggalPo"),await J("tempDetails"),!_.tempPabrik&&!_.tempNomorPo&&!_.tempTanggalPo&&!_.tempDetails){z(!0);const R=ae.tempDetails.map(w=>({nama_barang:w.nama_barang,harga:at(w.harga),estimasi_delivery:at(w.estimasi_delivery)}));try{let w;if(u!==null&&U){const Se=U[u].id;w=await _g({id:Se,nomor_po:ae.tempNomorPo,tanggal_po:ae.tempTanggalPo,pabrik:ae.tempPabrik,status:U[u].status});for(const Z of ae.tempDetails)Z.id?await jg({id:Z.id,nama_barang:Z.nama_barang,harga:at(Z.harga),estimasi_delivery:at(Z.estimasi_delivery)}):await Sg({idPurchase:Se,nama_barang:Z.nama_barang,harga:at(Z.harga),estimasi_delivery:at(Z.estimasi_delivery)})}else{const Se={idProject:ae.tempIdProject,nomor_po:ae.tempNomorPo,pabrik:ae.tempPabrik,tanggal_po:ae.tempTanggalPo,detail:R};w=await Dg(Se)}z(!1),w&&w.data.statusCode>=200&&w.data.statusCode<300?(he(gr({id:K})),ie.push(a.jsx(se,{title:"Purchase Order saved",type:"success",duration:2500,children:"Purchase Order berhasil disimpan"}),{placement:"top-center"}),oe(),m(!1),Q(null)):ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:w?w.message:"Failed to save purchase order"}),{placement:"top-center"})}catch(w){z(!1),console.error("Error:",w),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Terjadi kesalahan saat memproses permintaan"}),{placement:"top-center"})}}}catch(R){console.error("Validation error:",R)}},oe=()=>{T("tempPabrik",""),T("tempNomorPo",""),T("tempTanggalPo",""),T("tempDetails",[{nama_barang:"",harga:"",estimasi_delivery:""}])},we=()=>{m(!1),Q(null),oe()},Pe=R=>{if(U){const w=U[R];T("tempPabrik",w.pabrik),T("tempNomorPo",w.nomor_po),T("tempTanggalPo",w.tanggal_po),T("tempIdProject",w.idProject);const Se=w.DetailPurchases.length>0?w.DetailPurchases.map(Z=>({id:Z.id,nama_barang:Z.nama_barang,harga:Z.harga,estimasi_delivery:Z.estimasi_delivery})):[{nama_barang:"",harga:"",estimasi_delivery:""}];T("tempDetails",Se),Q(R),m(!0)}},Ge=R=>{Ee(R),G(!0)},B=()=>{G(!1),Ee(null)},q=()=>{pe(!1),O(null)},ce=async()=>{if(V!==null&&U){const R=U[V].id;z(!0);try{await Ng({id:R})&&(he(gr({id:K})),re("deleted"))}catch(w){console.error("Error deleting purchase order:",w),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Gagal menghapus purchase order"}),{placement:"top-center"})}finally{z(!1),G(!1),Ee(null)}}};return a.jsxs(hn,{children:[a.jsxs(Hn,{divider:!0,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(gn,{title:"Purchase Order",desc:"Tambahkan data purchase order"}),!h&&a.jsx($,{size:"sm",variant:"twoTone",onClick:Y,className:"w-fit text-xs",type:"button",children:"Tambah Purchase Order"})]}),h&&a.jsxs("div",{className:"mb-4 border bg-slate-50 rounded-md p-4",children:[a.jsx("h6",{className:"mb-3",children:u!==null?"Edit Purchase Order":"Tambah Purchase Order Baru"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 mb-4 gap-x-4",children:[a.jsx(ke,{label:"Nomor PO",errorMessage:_.tempNomorPo&&A.tempNomorPo?_.tempNomorPo:"",invalid:!!(_.tempNomorPo&&A.tempNomorPo),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempNomorPo",placeholder:"Nomor PO",component:We})}),a.jsx(ke,{label:"Tanggal PO",invalid:!!(_.tempTanggalPo&&A.tempTanggalPo),errorMessage:_.tempTanggalPo,children:a.jsx(Be,{name:"tempTanggalPo",children:({field:R,form:w})=>a.jsx(wn,{placeholder:"Pilih Tanggal",value:R.value?new Date(R.value):null,inputFormat:"DD-MM-YYYY",onChange:Se=>{const Z=Se?ju(Se).format("YYYY-MM-DD"):"";w.setFieldValue(R.name,Z)}})})}),a.jsx(ke,{label:"Pabrik",errorMessage:_.tempPabrik&&A.tempPabrik?_.tempPabrik:"",invalid:!!(_.tempPabrik&&A.tempPabrik),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempPabrik",placeholder:"Nama pabrik",component:We})})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h6",{children:"Detail Barang"}),a.jsx($,{size:"sm",variant:"twoTone",onClick:Re,className:"w-fit text-xs",type:"button",icon:a.jsx(kg,{}),children:"Tambah Detail"})]}),ae.tempDetails.map((R,w)=>{var Se,Z,j,fe,xe,Xe,Ke,Ae,k,P,C,le,I,Le,dt,Ut,lt,Ye,zt,nn,qn,Kt,Jn,L;return a.jsxs("div",{className:"border rounded-md p-3 mb-3 bg-white",children:[a.jsx("div",{className:"flex justify-between items-center mb-2",children:a.jsxs("h6",{children:["Item ",w+1]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-0 sm:gap-4",children:[a.jsx(ke,{label:"Nama Barang",errorMessage:(Z=(Se=_.tempDetails)==null?void 0:Se[w])!=null&&Z.nama_barang&&((fe=(j=A.tempDetails)==null?void 0:j[w])!=null&&fe.nama_barang)?_.tempDetails[w].nama_barang:"",invalid:!!((Xe=(xe=_.tempDetails)==null?void 0:xe[w])!=null&&Xe.nama_barang&&((Ae=(Ke=A.tempDetails)==null?void 0:Ke[w])!=null&&Ae.nama_barang)),children:a.jsx(Be,{type:"text",autoComplete:"off",name:`tempDetails.${w}.nama_barang`,placeholder:"Nama barang",component:We})}),a.jsx(ke,{label:"Harga",errorMessage:(P=(k=_.tempDetails)==null?void 0:k[w])!=null&&P.harga&&((le=(C=A.tempDetails)==null?void 0:C[w])!=null&&le.harga)?_.tempDetails[w].harga:"",invalid:!!((Le=(I=_.tempDetails)==null?void 0:I[w])!=null&&Le.harga&&((Ut=(dt=A.tempDetails)==null?void 0:dt[w])!=null&&Ut.harga)),children:a.jsx(Be,{name:`tempDetails.${w}.harga`,children:({field:ue,form:Oe})=>a.jsx(Mt,{...ue,customInput:We,placeholder:"Harga",thousandSeparator:".",decimalSeparator:",",onValueChange:De=>{Oe.setFieldValue(ue.name,De.value)}})})}),a.jsx(ke,{label:"Estimasi Delivery (hari)",errorMessage:(Ye=(lt=_.tempDetails)==null?void 0:lt[w])!=null&&Ye.estimasi_delivery&&((nn=(zt=A.tempDetails)==null?void 0:zt[w])!=null&&nn.estimasi_delivery)?_.tempDetails[w].estimasi_delivery:"",invalid:!!((Kt=(qn=_.tempDetails)==null?void 0:qn[w])!=null&&Kt.estimasi_delivery&&((L=(Jn=A.tempDetails)==null?void 0:Jn[w])!=null&&L.estimasi_delivery)),children:a.jsx(Be,{type:"number",autoComplete:"off",name:`tempDetails.${w}.estimasi_delivery`,placeholder:"Estimasi dalam hari",component:We})})]})]},w)}),Array.isArray(_.tempDetails)&&typeof _.tempDetails=="string"&&a.jsx("div",{className:"text-red-500 text-xs mt-1",children:_.tempDetails})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[a.jsx($,{size:"sm",variant:"plain",onClick:we,type:"button",children:"Batal"}),a.jsx($,{size:"sm",variant:"solid",onClick:S,type:"button",loading:Ne,children:"Simpan"})]})]}),U&&U.map((R,w)=>{var Se;return u===w?null:a.jsx("div",{className:"overflow-x-scroll sm:overflow-auto",children:a.jsxs("div",{className:"mb-4 border bg-slate-50 rounded-md p-4 min-w-[500px]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h6",{children:R.pabrik}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",icon:a.jsx(mn,{}),className:"text-indigo-500",onClick:()=>Pe(w)}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>Ge(w)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Nomor PO:"}),a.jsx("p",{children:R.nomor_po})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Tanggal PO:"}),a.jsx("p",{children:Un(R.tanggal_po)})]})]}),R.DetailPurchases&&R.DetailPurchases.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{className:"text-sm font-semibold mb-2",children:"Detail Barang:"}),a.jsx("div",{children:(Se=R.DetailPurchases)==null?void 0:Se.map((Z,j)=>{var fe;return a.jsx("div",{className:`${j===R.DetailPurchases.length-1?"border-y rounded-b":"border-t rounded-t"} border-x  bg-white p-3`,children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex items-center mr-5",children:[j+1," ."]}),a.jsxs("div",{className:"flex-auto",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Nama Barang:"}),a.jsx("p",{className:"text-sm",children:Z.nama_barang})]}),a.jsxs("div",{className:"flex-auto",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Harga:"}),a.jsxs("p",{className:"text-sm",children:["Rp"," ",(fe=Z.harga)==null?void 0:fe.toLocaleString("id-ID")]})]}),a.jsxs("div",{className:"flex-auto",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Estimasi Delivery:"}),a.jsxs("p",{className:"text-sm",children:[Z.estimasi_delivery," ","hari"]})]}),a.jsx("div",{className:"flex",children:a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>{console.log("detail22",Z),y(Z==null?void 0:Z.id)}})})]})},Z.id)})})]})]})},R.id)}),U&&U.length===0&&!h&&a.jsx("div",{className:"text-center py-5",children:a.jsx("p",{className:"text-gray-500",children:"Belum ada data purchase order. Silahkan tambahkan data."})})]}),a.jsx(_t,{isOpen:_e,onClose:B,onRequestClose:B,type:"danger",title:"Hapus Purchase Order",onCancel:B,onConfirm:ce,confirmButtonColor:"red-600",children:a.jsx("p",{children:"Apakah Anda yakin ingin menghapus purchase order ini? Tindakan ini tidak dapat dibatalkan."})}),a.jsx(_t,{isOpen:je,onClose:q,onRequestClose:q,type:"danger",title:"Hapus Detail Barang",onCancel:q,onConfirm:F,confirmButtonColor:"red-600",children:a.jsx("p",{children:"Apakah Anda yakin ingin menghapus detail barang ini? Tindakan ini tidak dapat dibatalkan."})})]})}})})},cx=ox,dx=Gt().shape({nomor:Ze().required("Nomor wajib diisi"),tanggal:Ze().required("Tanggal wajib diisi"),keterangan:Ze()}),fx=Gt().shape({keterangan:Ze().required("Keterangan wajib diisi")});function mx(){const h=pn(),[m,u]=N.useState(!1),[Q,Ne]=N.useState(!1),[z,K]=N.useState(null),[he,U]=N.useState(null),[ye,_e]=N.useState(!1),[G,V]=N.useState({nomor:"",nominal:0,tanggal:"",keterangan:""}),[Ee,je]=N.useState(!1),[pe,ne]=N.useState(!1),[O,re]=N.useState(null),[M,H]=N.useState(!1),[ae,_]=N.useState({persen:0,keterangan:""}),A=()=>location.pathname.substring(location.pathname.lastIndexOf("/")+1),T=en(k=>k.proyekEdit.data.terminsData),J=en(k=>k.proyekEdit.data.fakturPajakByProyekData),Y=en(k=>k.proyekEdit.data.loadingTermins),Re=en(k=>k.proyekEdit.data.loadingFakturPajakByProyekData),F=(()=>!T||T.length===0?0:T.reduce((k,P)=>k+(P.persen||0),0))(),S=100-F,oe=(k,P=!1)=>{if(K(k),Ne(P),!P)V({nomor:"",nominal:0,tanggal:"",keterangan:""});else{const C=J==null?void 0:J.find(le=>{var I;return le.id===((I=k.FakturPajak)==null?void 0:I.id)});C&&V({nomor:C.nomor||"",nominal:C.nominal||0,tanggal:C.tanggal||"",keterangan:C.keterangan||""})}u(!0)},we=()=>{u(!1),Ne(!1)},Pe=(k,P="Faktur")=>{ie.push(a.jsxs(se,{title:`Successfully ${k}`,type:"success",duration:2500,children:[P," successfully ",k]}),{placement:"top-center"})},Ge=async(k,{setSubmitting:P})=>{P(!0);const C={...k,nominal:Cg(k.nominal),idTerminProject:(z==null?void 0:z.id)||"",idProject:(z==null?void 0:z.idProject)||""};try{let le=!1;if(Q){const I=z==null?void 0:z.FakturPajak,Le={...C,id:I.id};le=await Pg({...Le}),le&&Pe("updated")}else le=await Ag(C),le&&Pe("added");le&&Ke({id:A()})}catch(le){console.error(`Error ${Q?"updating":"creating"} faktur pajak:`,le),ie.push(a.jsxs(se,{title:`${Q?"Update":"Create"} Failed`,type:"danger",duration:2500,children:["Failed to ",Q?"update":"create"," faktur"]}),{placement:"top-center"})}finally{P(!1),u(!1)}},B=k=>{oe(k,!0)},q=k=>{U(k),_e(!0)},ce=()=>{_e(!1),U(null)},R=async()=>{var k;if(he)try{const P=(k=he.FakturPajak)==null?void 0:k.id;if(!P){console.error("Invalid faktur ID");return}await Tg(P)&&(Pe("deleted"),Ke({id:A()}))}catch(P){console.error("Error deleting faktur:",P),ie.push(a.jsx(se,{title:"Delete Failed",type:"danger",duration:2500,children:"Failed to delete faktur"}),{placement:"top-center"})}finally{_e(!1),U(null)}},w=(k=null,P=!1)=>{ne(P),re(k),_(P&&k?{persen:k.persen||0,keterangan:k.keterangan||""}:{persen:0,keterangan:""}),je(!0)},Se=()=>{je(!1),ne(!1),re(null)},Z=async(k,{setSubmitting:P})=>{P(!0),console.log("processedData before",{...k});const C=A(),le={...k,persen:at(k.persen),idProject:C};console.log("processedData after",le);try{let I=!1;if(pe&&O){const Le={...le,id:O.id};I=await Eg(Le),I&&Pe("updated","Termin")}else I=await Bg(le),I&&Pe("added","Termin");I&&Ke({id:C})}catch(I){console.error(`Error ${pe?"updating":"creating"} termin:`,I),ie.push(a.jsxs(se,{title:`${pe?"Update":"Create"} Failed`,type:"danger",duration:2500,children:["Failed to ",pe?"update":"create"," termin"]}),{placement:"top-center"})}finally{P(!1),je(!1)}},j=k=>{w(k,!0)},fe=k=>{re(k),H(!0)},xe=()=>{H(!1),re(null)},Xe=async()=>{if(O!=null&&O.id)try{await Lg(O)&&(Pe("deleted","Termin"),Ke({id:A()}))}catch(k){console.error("Error deleting termin:",k),ie.push(a.jsx(se,{title:"Delete Failed",type:"danger",duration:2500,children:"Failed to delete termin"}),{placement:"top-center"})}finally{H(!1),re(null)}},Ke=k=>{h(Su(k)),h(Og(k))},Ae=async k=>{try{const P={id:k.id,status:"Sudah Bayar"};(await Fg(P)).data.statusCode===200?(Pe("updated","Status Faktur"),Ke({id:A()})):ie.push(a.jsx(se,{title:"Update Status Failed",type:"danger",duration:2500,children:"Gagal memperbarui status faktur"}),{placement:"top-center"})}catch(P){console.error("Error updating status faktur:",P),ie.push(a.jsx(se,{title:"Update Status Failed",type:"danger",duration:2500,children:"Gagal memperbarui status faktur"}),{placement:"top-center"})}};return N.useEffect(()=>{const P={id:A()};Ke(P)},[location.pathname]),a.jsx(a.Fragment,{children:a.jsxs(In,{loading:Y||Re,children:[a.jsxs("div",{className:"flex flex-col py-6 space-y-2",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center",children:[a.jsxs("div",{children:[a.jsx(gn,{title:"Termin",desc:"Tambahkan data termin dan faktur"}),a.jsxs("div",{className:"mt-2 text-sm",children:["Total:"," ",a.jsxs("span",{className:"font-bold",children:[F,"%"]})," ","(",S,"% remaining)"]})]}),a.jsx($,{size:"sm",variant:"twoTone",onClick:()=>w(),className:"w-fit text-xs",disabled:S<=0,children:"Tambah Termin"})]}),(T==null?void 0:T.length)===0&&a.jsx("div",{className:"text-center py-8 bg-slate-50 rounded-md",children:"Belum ada termin yang ditambahkan"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[400px]",children:T==null?void 0:T.map((k,P)=>{var le,I,Le,dt;const C=J==null?void 0:J.find(Ut=>{var lt;return Ut.id===((lt=k.FakturPajak)==null?void 0:lt.id)});return a.jsxs("div",{className:` flex flex-row 
                                    ${P===0?"rounded-t-md border":P===T.length-1?"rounded-b-md border-b border-x":"border-b border-x"}
                                         sm:flex-row justify-center sm:justify-between`,children:[a.jsxs("div",{className:"border-r p-6 flex flex-1 flex-row ",children:[a.jsxs("div",{className:"flex flex-col w-full items-center sm:items-start ",children:[a.jsx("span",{children:k.keterangan}),a.jsxs("span",{className:"font-bold text-2xl",children:[k.persen,"%"]}),a.jsxs("div",{children:["Rp."," ",(le=k.nilai_termin)==null?void 0:le.toLocaleString("id-ID")]})]}),a.jsx("div",{className:" w-full flex space-x-2 justify-center sm:justify-end ",children:a.jsxs("div",{children:[!((I=k.FakturPajak)!=null&&I.id)&&a.jsx($,{type:"button",shape:"circle",variant:"twoTone",size:"sm",icon:a.jsx(wg,{}),className:"text-indigo-500",onClick:()=>oe(k),children:"Faktur"}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",icon:a.jsx(mn,{}),className:"text-indigo-500",onClick:()=>j(k)}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>fe(k)})]})})]}),((Le=k.FakturPajak)==null?void 0:Le.id)&&a.jsx(a.Fragment,{children:C&&a.jsxs("div",{className:"bg-white flex-1 p-6 w-full flex flex-col sm:flex-row gap-4 rounded-lg justify-between",children:[a.jsxs("div",{className:"flex flex-col items-center sm:items-start ",children:[a.jsxs("div",{children:[a.jsxs("span",{children:["Nomor Faktur:"," "]}),C.nomor||"-"]}),a.jsxs("div",{children:[a.jsxs("span",{children:["Nominal :"," "]}),((dt=C.nominal)==null?void 0:dt.toLocaleString("id-ID"))||"-"]}),a.jsxs("div",{children:[a.jsxs("span",{children:["Tanggal :"," "]}),Un(C.tanggal||"")||"-"]}),C.keterangan&&a.jsxs("div",{children:[a.jsxs("span",{children:["Keterangan :"," "]}),C.keterangan]})]}),a.jsxs("div",{className:"flex space-x-6 sm:space-x-0 justify-center sm:justify-start",children:[a.jsx($,{type:"button",shape:"circle",variant:"twoTone",size:"sm",icon:a.jsx(Ig,{}),className:"text-indigo-500",onClick:()=>Ae(C),disabled:C.status==="Sudah Bayar"&&!0,children:C.status==="Sudah Bayar"?"Sudah Bayar":"Update Status"}),C.status!=="Sudah Bayar"&&a.jsxs(a.Fragment,{children:[a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",icon:a.jsx(mn,{}),className:"text-indigo-500",onClick:()=>B(k)}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>q(k)})]})]})]})})]},P)})})})]}),a.jsx(tn,{initialValues:G,validationSchema:dx,onSubmit:Ge,enableReinitialize:!0,children:({errors:k,touched:P,isSubmitting:C})=>a.jsxs(a.Fragment,{children:[a.jsx(Fi,{isOpen:m,onClose:we,onRequestClose:we,children:a.jsxs(hn,{children:[a.jsx("h5",{className:"mb-4",children:Q?"Edit Faktur":"Tambah Faktur"}),a.jsxs("div",{className:"flex flex-col max-h-[60vh] overflow-y-auto border-b-[1px] pb-4",children:[a.jsx(ke,{label:"Nomor",invalid:k.nomor&&P.nomor,errorMessage:k.nomor,children:a.jsx(Be,{type:"text",autoComplete:"off",name:"nomor",placeholder:"Nomor",component:We})}),a.jsx(ke,{label:"Nominal",invalid:k.nominal&&P.nominal,errorMessage:k.nominal,children:a.jsx(Be,{name:"nominal",children:({field:le,form:I})=>a.jsx(Mt,{...le,customInput:We,placeholder:"0",thousandSeparator:".",decimalSeparator:",",onValueChange:Le=>{I.setFieldValue(le.name,Le.value)}})})}),a.jsx(ke,{label:"Tanggal",invalid:k.tanggal&&P.tanggal,errorMessage:k.tanggal,children:a.jsx(Be,{name:"tanggal",children:({field:le,form:I})=>a.jsx(wn,{placeholder:"Pilih Tanggal",value:le.value?new Date(le.value):null,inputFormat:"DD-MM-YYYY",onChange:Le=>{const dt=Le?ju(Le).format("YYYY-MM-DD"):"";I.setFieldValue(le.name,dt)}})})}),a.jsx(ke,{label:"Keterangan",invalid:k.keterangan&&P.keterangan,errorMessage:k.keterangan,children:a.jsx(Be,{textArea:!0,name:"keterangan",placeholder:"Masukkan keterangan",component:We})})]}),a.jsxs("div",{className:"text-right mt-6",children:[a.jsx($,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:we,type:"button",disabled:C,children:"Cancel"}),a.jsx($,{variant:"solid",type:"submit",loading:C,children:Q?"Update":"Simpan"})]})]})}),a.jsx(_t,{isOpen:ye,type:"danger",title:"Hapus Faktur",confirmButtonColor:"red-600",onClose:ce,onRequestClose:ce,onCancel:ce,onConfirm:R,children:a.jsx("p",{children:"Apakah kamu yakin ingin menghapus faktur pada termin ini?"})})]})}),a.jsx(tn,{initialValues:ae,validationSchema:fx,onSubmit:Z,enableReinitialize:!0,children:({errors:k,touched:P,isSubmitting:C,values:le,setFieldValue:I})=>{var Le;return a.jsxs(a.Fragment,{children:[a.jsx(Fi,{isOpen:Ee,onClose:Se,onRequestClose:Se,children:a.jsxs(hn,{children:[a.jsx("h5",{className:"mb-4",children:pe?"Edit Termin":"Tambah Termin"}),!pe&&a.jsxs("div",{className:"mb-4 p-2 bg-blue-50 text-blue-600 rounded-md",children:["Tersisa ",S,"% dari total"]}),a.jsxs("div",{className:"flex flex-col max-h-[60vh] overflow-y-auto border-b-[1px] pb-4",children:[a.jsx(ke,{label:"Persentase (%)",invalid:k.persen&&P.persen,errorMessage:k.persen,children:a.jsx(Be,{name:"persen",children:({field:dt,form:Ut})=>a.jsx(Mt,{...dt,customInput:We,placeholder:"0",suffix:"%",allowNegative:!1,decimalScale:2,isAllowed:lt=>{const{floatValue:Ye}=lt;return pe?Ye!==void 0&&Ye>=0&&Ye<=100:Ye!==void 0&&Ye>=0&&Ye<=S},onValueChange:lt=>{Ut.setFieldValue(dt.name,lt.value)}})})}),a.jsx(ke,{label:"Keterangan",invalid:k.keterangan&&P.keterangan,errorMessage:k.keterangan,children:a.jsx(Be,{name:"keterangan",placeholder:"Masukkan keterangan termin",component:We})})]}),a.jsxs("div",{className:"text-right mt-6",children:[a.jsx($,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:Se,type:"button",disabled:C,children:"Cancel"}),a.jsx($,{variant:"solid",type:"submit",loading:C,children:pe?"Update":"Simpan"})]})]})}),a.jsx(_t,{isOpen:M,type:"danger",title:"Hapus Termin",confirmButtonColor:"red-600",onClose:xe,onRequestClose:xe,onCancel:xe,onConfirm:Xe,children:a.jsxs("p",{children:["Apakah kamu yakin ingin menghapus termin ini?",((Le=O==null?void 0:O.FakturPajak)==null?void 0:Le.id)&&a.jsx("span",{className:"block mt-2 text-red-500",children:"Faktur yang terkait dengan termin ini juga akan dihapus!"})]})})]})}})]})})}function Cu(h){return hg({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"},child:[]},{tag:"path",attr:{d:"M14 2v4a2 2 0 0 0 2 2h4"},child:[]},{tag:"path",attr:{d:"M3 15h6"},child:[]},{tag:"path",attr:{d:"M6 12v6"},child:[]}]})(h)}async function hx(h){return(await qe.fetchData({url:`/lokasi/project/${h.id}`,method:"get",data:h})).data}async function Pu(h){return(await qe.fetchData({url:`/lokasi/${h.id}`,method:"get",data:h})).data}async function px(h){return qe.fetchData({url:"/lokasi",method:"post",data:h})}async function gx(h){return qe.fetchData({url:`/lokasi/${h.id}`,method:"patch",data:h})}async function xx(h){return Array.isArray(h.id)?qe.fetchData({url:"/lokasi/delete",method:"delete",data:h}):qe.fetchData({url:`/lokasi/${h.id}`,method:"delete"})}async function vx(h){return(await qe.fetchData({url:`/adendum/project/${h.id}`,method:"get",data:h})).data}async function Au(h){return(await qe.fetchData({url:`/adendum/${h.id}`,method:"get",data:h})).data}async function bx(h){return qe.fetchData({url:"/adendum",method:"post",data:h})}async function kx(h){return qe.fetchData({url:`/adendum/${h.id}`,method:"patch",data:h})}async function yx(h){return qe.fetchData({url:`/adendum/status/${h.id}`,method:"patch",data:h})}async function _x(h){return Array.isArray(h.id)?qe.fetchData({url:"/adendum/delete",method:"delete",data:h}):qe.fetchData({url:`/adendum/${h.id}`,method:"delete"})}async function jx(h){return(await qe.fetchData({url:`/itemProject/project/${h.id}`,method:"get",data:h})).data}async function Sx(h){return(await qe.fetchData({url:`/itemProject/${h.id}`,method:"get",data:h})).data}async function Dx(h){return qe.fetchData({url:"/itemProject",method:"post",data:h})}async function Nx(h){return qe.fetchData({url:`/itemProject/${h.id}`,method:"patch",data:h})}async function wx(h){return qe.fetchData({url:`/itemProject/status/${h.id}`,method:"patch",data:h})}async function Ix(h){return Array.isArray(h.id)?qe.fetchData({url:"/itemProject/delete",method:"delete",data:h}):qe.fetchData({url:`/itemProject/${h.id}`,method:"delete"})}async function Cx(h){return qe.fetchData({url:"/itemProject/detail",method:"post",data:h})}async function Px(h){return qe.fetchData({url:`/itemProject/detail/${h.id}`,method:"patch",data:h})}async function Ax(h){return qe.fetchData({url:`/itemProject/detail/${h.id}`,method:"delete"})}async function Tx(h){return await qe.fetchData({url:`/bastp/project/${h.id}`,method:"get",data:h})}async function Ex(h){return qe.fetchData({url:`/bastp/${h.id}`,method:"delete"})}async function Bx(h){return qe.fetchData({url:`/bastp/${h.id}`,method:"patch",data:h})}async function Lx(h){return qe.fetchData({url:"/bastp",method:"post",data:h})}const ct="proyekDetail",Mn=ht(ct+"/getItemsByProyek",async h=>(await jx(h)).data),vu=ht(ct+"/getItem",async h=>(await Sx(h)).data),Rn=ht(ct+"/getAdendumsByProyek",async h=>(await vx(h)).data),bu=ht(ct+"/getAdendum",async h=>(await Au(h)).data),ia=ht(ct+"/getSubkonsByProyek",async h=>(await Iu(h)).data),Ri=ht(ct+"/getSubkontraktors",async()=>(await ex()).data),Bi=ht(ct+"/getSubkonProyek",async h=>(await Iu(h)).data),ku=ht(ct+"/getBerkasProyek",async h=>(await Mg(h)).data),yu=ht(ct+"/selectBerkas",async()=>(await Rg()).data),sa=ht(ct+"/getLokasisByProyek",async h=>await hx(h)),Li=ht(ct+"/getLokasi",async h=>(await Pu(h)).data);ht(ct+"/updateLokasi",async h=>(await Pu(h)).data);const _u=ht(ct+"/getFakturPajak",async h=>(await Ug(h)).data),Ox=ht(ct+"/updateBerkasProyekStatus",async h=>(await Wg(h)).data),Ui=ht(ct+"/getSatuans",async()=>(await rx()).data),Da=ht(ct+"/getBastpsByProyek",async h=>(await Tx(h)).data),Fx={loadingBerkasProyeks:!0,loadingFakturPajaks:!0,loadingSelectBerkas:!0,loadingLokasiProyeks:!0,loadingLokasi:!0,loadingSubkonsByProyek:!0,loadingSubkonProyek:!0,loadingSubkontraktors:!0,loadingAdendumsByProyek:!0,loadingAdendum:!0,loadingItemsByProyek:!0,loadingItem:!0,loadingSatuan:!0,loadingBastpProyeks:!0,bastpProyekData:[],satuansData:[],lokasisByProyekData:[],lokasiData:[],itemsByProyekData:[],itemData:[],selectBerkasData:[],berkasProyekData:[],adendumsByProyekData:[],adendumData:[],berkasFakturPajaks:[],subkonByProyekData:[],subkonProyekData:[]},Mx=pg({name:`${ct}/state`,initialState:Fx,reducers:{},extraReducers:h=>{h.addCase(Da.fulfilled,(m,u)=>{m.bastpProyekData=u.payload,m.loadingBastpProyeks=!1}).addCase(Da.pending,m=>{m.loadingBastpProyeks=!0}).addCase(ku.fulfilled,(m,u)=>{m.berkasProyekData=u.payload,m.loadingBerkasProyeks=!1}).addCase(ku.pending,m=>{m.loadingBerkasProyeks=!0}).addCase(Ui.fulfilled,(m,u)=>{m.satuansData=u.payload,m.loadingSatuan=!1}).addCase(Ui.pending,m=>{m.loadingSatuan=!0}).addCase(Rn.fulfilled,(m,u)=>{m.adendumsByProyekData=u.payload,m.loadingAdendumsByProyek=!1}).addCase(Rn.pending,m=>{m.loadingAdendumsByProyek=!0}).addCase(Mn.fulfilled,(m,u)=>{m.itemsByProyekData=u.payload,m.loadingItemsByProyek=!1}).addCase(Mn.pending,m=>{m.loadingItemsByProyek=!0}).addCase(vu.fulfilled,(m,u)=>{m.itemData=u.payload,m.loadingItem=!1}).addCase(vu.pending,m=>{m.loadingItem=!0}).addCase(bu.fulfilled,(m,u)=>{m.adendumData=u.payload,m.loadingAdendum=!1}).addCase(bu.pending,m=>{m.loadingAdendum=!0}).addCase(sa.fulfilled,(m,u)=>{m.lokasisByProyekData=u.payload,m.loadingLokasiProyeks=!1}).addCase(sa.pending,m=>{m.loadingLokasiProyeks=!0}).addCase(sa.rejected,m=>{m.loadingLokasiProyeks=!1,m.lokasisByProyekData=[]}).addCase(Li.fulfilled,(m,u)=>{m.lokasiData=u.payload,m.loadingLokasi=!1}).addCase(Li.pending,m=>{m.loadingLokasi=!0}).addCase(Li.rejected,m=>{m.loadingLokasi=!1,m.lokasiData=[]}).addCase(ia.fulfilled,(m,u)=>{m.subkonByProyekData=u.payload,m.loadingSubkonsByProyek=!1}).addCase(ia.pending,m=>{m.loadingSubkonsByProyek=!0}).addCase(ia.rejected,m=>{m.loadingSubkonsByProyek=!1,m.subkonByProyekData=[]}).addCase(Ri.fulfilled,(m,u)=>{m.subkontraktorsData=u.payload,m.loadingSubkontraktors=!1}).addCase(Ri.pending,m=>{m.loadingSubkontraktors=!0}).addCase(Bi.fulfilled,(m,u)=>{m.subkonProyekData=u.payload,m.loadingSubkonProyek=!1}).addCase(Bi.pending,m=>{m.loadingSubkonProyek=!0}).addCase(Bi.rejected,m=>{m.loadingSubkonProyek=!1,m.subkonProyekData=[]}).addCase(yu.fulfilled,(m,u)=>{m.selectBerkasData=u.payload,m.loadingSelectBerkas=!1}).addCase(yu.pending,m=>{m.loadingSelectBerkas=!0}).addCase(_u.fulfilled,(m,u)=>{m.berkasProyekData=u.payload,m.loadingFakturPajaks=!1}).addCase(_u.pending,m=>{m.loadingFakturPajaks=!0}).addCase(Ox.fulfilled,(m,u)=>{var z;const Q=u.payload,Ne=(z=m.berkasProyekData)==null?void 0:z.findIndex(K=>K.id===Q.id);Ne!==-1&&(m.berkasProyekData[Ne]=Q)})}}),Rx=Mx.reducer,wa=gg({data:Rx}),Rt=xg,Ux=Gt().shape({tempDasarAdendum:Ze().required("Dasar adendum harus diisi")});Wn("proyekDetail",wa);function Wx(){const h=location.pathname.substring(location.pathname.lastIndexOf("/")+1),[m,u]=N.useState(!1),[Q,Ne]=N.useState(null),[z,K]=N.useState(!1),[he,U]=N.useState({}),[ye,_e]=N.useState(!1),[G,V]=N.useState(null),[Ee,je]=N.useState(!1),[pe,ne]=N.useState({}),[O,re]=N.useState({tempDasarAdendum:"",tempNilaiAdendum:0,tempTanggal:new Date,tempIdProject:"",tempNilaiSebelumAdendum:0,tempTimelineAkhirSebelum:"",tempTimelineAkhirSesudah:""}),[M,H]=N.useState(null),ae=pn(),_=Rt(Y=>Y.proyekDetail.data.adendumsByProyekData),A=Rt(Y=>Y.proyekDetail.data.loadingAdendumsByProyek);N.useEffect(()=>{const Y={id:h};ae(Rn(Y)),(async()=>{var y,F;try{U(await Hg(Y)),re({tempDasarAdendum:"",tempNilaiAdendum:(y=he.data)==null?void 0:y.nilai_kontrak,tempTanggal:new Date,tempIdProject:h||"",tempNilaiSebelumAdendum:(F=he.data)==null?void 0:F.nilai_kontrak,tempTimelineAkhirSebelum:"",tempTimelineAkhirSesudah:""})}catch{ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Gagal mendapatkan data proyekId"}),{placement:"top-center"})}})()},[ae,h]);const T=Y=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Y),J=Y=>{ie.push(a.jsxs(se,{title:`Berhasil ${Y}`,type:"success",duration:2500,children:["Data adendum berhasil ",Y]}),{placement:"top-center"})};return a.jsx(In,{loading:A||z,children:a.jsx(tn,{enableReinitialize:!0,initialValues:O,validationSchema:Ux,onSubmit:()=>{},children:Y=>{const{values:Re,errors:y,touched:F,setFieldValue:S}=Y,oe=()=>{var j,fe;if(u(!0),Ne(null),_&&_.length>0){const xe=_[_.length-1];ne(xe),re({tempDasarAdendum:"",tempNilaiSebelumAdendum:xe.nilai_adendum,tempNilaiAdendum:xe.nilai_adendum,tempTanggal:new Date,tempIdProject:h||"",tempTimelineAkhirSebelum:xe.timeline_akhir_sesudah,tempTimelineAkhirSesudah:""})}else re({tempDasarAdendum:"",tempNilaiSebelumAdendum:(j=he.data)==null?void 0:j.nilai_kontrak,tempNilaiAdendum:0,tempTanggal:new Date,tempIdProject:h||"",tempTimelineAkhirSebelum:(fe=he.data)==null?void 0:fe.timeline_akhir,tempTimelineAkhirSesudah:""})},we=async()=>{var j,fe,xe,Xe;if(!y.tempDasarAdendum&&!y.tempNilaiSebelumAdendum&&!y.tempNilaiAdendum&&!y.tempTanggal&&!y.tempTimelineAkhirSesudah){K(!0);const Ke={dasar_adendum:Re.tempDasarAdendum,nilai_sebelum_adendum:Re.tempNilaiSebelumAdendum,nilai_adendum:at(Re.tempNilaiAdendum),tanggal:(j=Re.tempTanggal)==null?void 0:j.toISOString(),idProject:Re.tempIdProject,timeline_akhir_sebelum:Re.tempTimelineAkhirSebelum,timeline_akhir_sesudah:Re.tempTimelineAkhirSesudah};try{let Ae;if(Q!==null&&_){const k=_[Q].id;Ae=await kx({id:k,...Ke})}else Ae=await bx(Ke);K(!1),Ae&&((fe=Ae.data)==null?void 0:fe.statusCode)>=200&&((xe=Ae.data)==null?void 0:xe.statusCode)<300?(ae(Rn({id:h})),J(Q!==null?"diperbarui":"ditambahkan"),Pe(),u(!1),Ne(null)):ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:Ae?Ae==null?void 0:Ae.message:"Gagal menambahkan adendum"}),{placement:"top-center"})}catch(Ae){K(!1),console.error("Error:",Ae),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:Ae?(Xe=Ae.response.data)==null?void 0:Xe.message:"Gagal menambahkan adendum"}),{placement:"top-center"})}}},Pe=()=>{var j,fe;S("tempDasarAdendum",""),S("tempNilaiSebelumAdendum",(j=he.data)==null?void 0:j.nilai_kontrak),S("tempNilaiAdendum",""),S("tempTanggal",new Date),S("tempTimelineAkhirSebelum",(fe=he.data)==null?void 0:fe.timeline_akhir),S("tempTimelineAkhirSesudah","")},Ge=()=>{u(!1),Ne(null),Pe()},B=j=>{if(_){const fe=_[j];(async()=>{var Xe;try{const Ke=await Au(fe);if(Ke&&Ke.data){const Ae=Ke.data;S("tempDasarAdendum",Ae.dasar_adendum),S("tempNilaiSebelumAdendum",Ae.nilai_sebelum_adendum),S("tempNilaiAdendum",Ae.nilai_adendum),S("tempTanggal",new Date(Ae.tanggal)),S("tempIdProject",Ae.idProject),Ae.timeline_akhir_sebelum?S("tempTimelineAkhirSebelum",Ae.timeline_akhir_sebelum):S("tempTimelineAkhirSebelum",((Xe=he.data)==null?void 0:Xe.timeline_akhir)||""),Ae.timeline_akhir_sesudah?S("tempTimelineAkhirSesudah",new Date(Ae.timeline_akhir_sesudah)):S("tempTimelineAkhirSesudah","")}}catch(Ke){console.error("Error fetching detail adendum:",Ke)}})(),Ne(j),u(!0)}},q=j=>{H(j),je(!0),ae(Rn({id:h}))},ce=async()=>{var j,fe;if(M){K(!0);try{let xe="",Xe="";M.status==="BELUM_DISETUJUI"?(xe="SUDAH_DISETUJUI",Xe="disetujui"):M.status==="SUDAH_DISETUJUI"&&(xe="BELUM_DISETUJUI",Xe="dibatalkan persetujuannya");const Ke=await yx({id:M.id,status:xe});ie.push(a.jsxs(se,{title:"Status berhasil diperbarui",type:"success",duration:2500,children:["Adendum berhasil ",Xe]}),{placement:"top-center"}),ae(Rn({id:h}))}catch(xe){console.error("Error updating status adendum:",xe),ie.push(a.jsx(se,{title:"Gagal memperbarui status",type:"danger",duration:2500,children:((fe=(j=xe==null?void 0:xe.response)==null?void 0:j.data)==null?void 0:fe.message)||"Terjadi kesalahan saat memperbarui status adendum"}),{placement:"top-center"})}finally{K(!1),je(!1),H(null)}}},R=()=>{je(!1),H(null)},w=j=>{V(j),_e(!0)},Se=()=>{_e(!1),V(null)},Z=async()=>{var j;if(G!==null&&_){const fe=_[G];K(!0);try{await _x(fe)&&(ae(Rn({id:h})),J("dihapus"))}catch(xe){console.error("Error deleting adendum:",xe),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:((j=xe.response.data)==null?void 0:j.message)||"Gagal menghapus adendum"}),{placement:"top-center"})}finally{K(!1),_e(!1),V(null)}}};return a.jsx(hn,{children:a.jsxs(Hn,{divider:!0,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(gn,{title:"Informasi Adendum",desc:"Informasi adendum proyek"}),!m&&a.jsx($,{size:"sm",variant:"twoTone",onClick:oe,className:"w-fit text-xs",type:"button",children:"Tambah Adendum"})]}),m&&a.jsxs("div",{className:"mb-4 border bg-slate-50 rounded-md p-4",children:[a.jsx("h6",{className:"mb-3",children:Q!==null?"Edit Adendum":"Tambah Adendum Baru"}),a.jsxs(Na,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ke,{label:"Dasar Adendum",errorMessage:y.tempDasarAdendum&&F.tempDasarAdendum?y.tempDasarAdendum:"",invalid:!!(y.tempDasarAdendum&&F.tempDasarAdendum),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempDasarAdendum",placeholder:"Contoh: Perubahan Spesifikasi Teknis",component:We})}),a.jsx(ke,{label:"Tanggal",errorMessage:y.tempTanggal&&F.tempTanggal?y.tempTanggal:"",invalid:!!(y.tempTanggal&&F.tempTanggal),children:a.jsx(wn,{placeholder:"Pilih tanggal",value:Re.tempTanggal,inputFormat:"DD-MM-YYYY",onChange:j=>{S("tempTanggal",j)}})}),a.jsx(ke,{label:"Nilai Sebelum Adendum",className:"mb-3",errorMessage:y.tempNilaiSebelumAdendum&&F.tempNilaiSebelumAdendum?y.tempNilaiSebelumAdendum:"",invalid:!!(y.tempNilaiSebelumAdendum&&F.tempNilaiSebelumAdendum),children:a.jsx(Be,{name:"tempNilaiSebelumAdendum",children:({field:j,form:fe})=>a.jsx(Mt,{...j,placeholder:"Nilai dalam Rupiah",customInput:We,thousandSeparator:".",decimalSeparator:",",onValueChange:xe=>fe.setFieldValue(j.name,xe.value),disabled:!0})})}),a.jsx(ke,{label:"Nilai Adendum",className:"mb-3",errorMessage:y.tempNilaiAdendum&&F.tempNilaiAdendum?y.tempNilaiAdendum:"",invalid:!!(y.tempNilaiAdendum&&F.tempNilaiAdendum),children:a.jsx(Be,{name:"tempNilaiAdendum",children:({field:j,form:fe})=>a.jsx(Mt,{...j,placeholder:"Nilai dalam Rupiah",customInput:We,thousandSeparator:".",decimalSeparator:",",onValueChange:xe=>fe.setFieldValue(j.name,xe.value)})})}),a.jsx(ke,{label:"Timeline Akhir Sebelum",className:"mb-3",children:a.jsx(wn,{disabled:!0,placeholder:"Pilih Tanggal",value:pe.timeline_akhir_sesudah?new Date(pe.timeline_akhir_sesudah):new Date(he.data.timeline_akhir),inputFormat:"DD-MM-YYYY",onChange:j=>{S("tempTimelineAkhirSebelum",j)}})}),a.jsx(ke,{label:"Timeline Akhir Sesudah",errorMessage:y.tempTimelineAkhirSesudah&&F.tempTimelineAkhirSesudah?y.tempTimelineAkhirSesudah:"",invalid:!!(y.tempTimelineAkhirSesudah&&F.tempTimelineAkhirSesudah),children:a.jsx(wn,{placeholder:"Pilih tanggal",value:Re.tempTimelineAkhirSesudah,inputFormat:"DD-MM-YYYY",onChange:j=>{S("tempTimelineAkhirSesudah",j)}})})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[a.jsx($,{size:"sm",variant:"plain",onClick:Ge,type:"button",children:"Batal"}),a.jsx($,{size:"sm",variant:"solid",onClick:we,type:"button",loading:z,children:"Simpan"})]})]})]}),_&&_.length>0?a.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600",children:_.map((j,fe)=>Q===fe?null:a.jsxs("div",{className:la("flex items-center justify-between px-4 py-6",!ua(_,fe)&&"border-b border-gray-200 dark:border-gray-600"),children:[a.jsxs("div",{className:"flex items-center flex-grow ",children:[a.jsx("div",{className:"text-3xl",children:a.jsx(Cu,{className:"text-indigo-500"})}),a.jsxs("div",{className:"ml-3 rtl:mr-3",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:j.dasar_adendum})}),a.jsxs("div",{className:"text-gray-500 text-sm mt-1",children:[a.jsxs("div",{children:["Tanggal:"," ",Un(j.tanggal)]}),a.jsxs("div",{children:["Nilai Sebelum:"," ",T(j.nilai_sebelum_adendum)]}),a.jsxs("div",{children:["Nilai Adendum:"," ",T(j.nilai_adendum)]}),a.jsxs("div",{children:["Selisih:"," ",T(j.nilai_adendum-j.nilai_sebelum_adendum)]}),j.timeline_akhir_sebelum&&a.jsxs("div",{children:["Timeline Akhir Sebelum:"," ",Un(j.timeline_akhir_sebelum)]}),j.timeline_akhir_sesudah&&a.jsxs("div",{children:["Timeline Akhir Sesudah:"," ",Un(j.timeline_akhir_sesudah)]})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4 items-end space-x-2 ",children:[a.jsx($,{size:"sm",variant:"solid",color:(j==null?void 0:j.status)==="SUDAH_DISETUJUI"?"red":"",onClick:()=>q(j),className:"w-fit text-xs ",type:"button",children:(j==null?void 0:j.status)==="SUDAH_DISETUJUI"?"Batalkan Persetujuan":"Setujui Adendum"}),a.jsxs("div",{children:[a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",icon:a.jsx(mn,{}),className:"text-indigo-500",onClick:()=>B(fe)}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>w(fe)})]})]})]},j.id))}):!A&&a.jsx("div",{className:"text-center py-5",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Belum ada adendum untuk proyek ini"})}),a.jsx(_t,{isOpen:ye,type:"danger",title:"Konfirmasi Hapus",confirmButtonColor:"red-600",confirmText:"Hapus",cancelText:"Batal",onClose:Se,onRequestClose:Se,onCancel:Se,onConfirm:Z,children:a.jsx("p",{children:"Apakah Anda yakin ingin menghapus adendum ini? Tindakan ini tidak dapat dibatalkan."})}),a.jsx(_t,{isOpen:Ee,type:(M==null?void 0:M.status)==="BELUM_DISETUJUI"?"info":"danger",title:(M==null?void 0:M.status)==="BELUM_DISETUJUI"?"Konfirmasi Persetujuan":"Konfirmasi Pembatalan",confirmButtonColor:(M==null?void 0:M.status)==="BELUM_DISETUJUI"?"blue-600":"red-600",confirmText:(M==null?void 0:M.status)==="BELUM_DISETUJUI"?"Setujui":"Batalkan",cancelText:"Batal",onClose:R,onRequestClose:R,onCancel:R,onConfirm:ce,children:(M==null?void 0:M.status)==="BELUM_DISETUJUI"?a.jsx("p",{children:"Apakah Anda yakin ingin menyetujui adendum ini? Nilai proyek akan diperbarui sesuai dengan adendum."}):a.jsx("p",{children:"Apakah Anda yakin ingin membatalkan persetujuan adendum ini? Nilai proyek akan dikembalikan ke nilai sebelumnya."})})]})})}})})}const Hx=Gt().shape({tempItem:Ze().required("Nama item harus diisi")}),qx=Gt().shape({tempUraian:Ze().required("Uraian harus diisi"),tempSatuan:Ze().required("Satuan harus diisi"),tempVolume:Ze().required("Volume harus diisi"),tempHargaSatuanMaterial:Ze().required("Harga satuan material harus diisi"),tempHargaSatuanJasa:Ze().required("Harga satuan jasa harus diisi")});Wn("proyekDetail",wa);function Jx(){const[h,m]=N.useState(!1),[u,Q]=N.useState(!1),[Ne,z]=N.useState(null),[K,he]=N.useState(null),[U,ye]=N.useState(null),[_e,G]=N.useState(!1),[V,Ee]=N.useState(!1),[je,pe]=N.useState(!1),[ne,O]=N.useState(null),[re,M]=N.useState(null),[H,ae]=N.useState({}),_=pn(),A=location.pathname.substring(location.pathname.lastIndexOf("/")+1),{loadingItemsByProyek:T,itemsByProyekData:J,satuansData:Y,loadingSatuan:Re}=Rt(q=>q.proyekDetail.data);Rt(q=>q.proyekDetail.data),N.useEffect(()=>{_(Mn({id:A})),_(Ui())},[_,A]);const y=q=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(q),F={tempItem:"",tempIdProject:A||""},S={tempUraian:"",tempSatuan:"",tempVolume:"",tempHargaSatuanMaterial:"",tempHargaSatuanJasa:"",tempJumlahHargaMaterial:"",tempJumlahHargaJasa:"",tempJumlah:"",tempIdItem:""},oe=q=>{ie.push(a.jsxs(se,{title:`Berhasil ${q}`,type:"success",duration:2500,children:["Data berhasil ",q]}),{placement:"top-center"})},we=q=>async(ce,R)=>{var Z,j;const w={...q,status:ce},Se={id:w.id,status:w.status};try{const fe=await wx(Se);((Z=fe.data)==null?void 0:Z.statusCode)===200?oe("updated"):ie.push(a.jsx(se,{title:"Error updating BASTP",type:"danger",duration:2500,children:(j=fe.data)==null?void 0:j.message}),{placement:"top-center"})}catch(fe){console.error("Error updating BASTP status:",fe),ie.push(a.jsx(se,{title:"Error updating BASTP",type:"danger",duration:2500,children:"An error occurred while updating the BASTP status"}),{placement:"top-center"})}},Pe=q=>{ae(ce=>({...ce,[q]:!ce[q]}))},Ge=q=>q.reduce((ce,R)=>(ce.totalMaterial+=R.jumlah_harga_material,ce.totalJasa+=R.jumlah_harga_jasa,ce.grandTotal+=R.jumlah,ce),{totalMaterial:0,totalJasa:0,grandTotal:0}),B=q=>q.reduce((ce,R)=>{const w=Ge(R.DetailItemProjects);return ce.totalMaterial+=w.totalMaterial,ce.totalJasa+=w.totalJasa,ce.grandTotal+=w.grandTotal,ce},{totalMaterial:0,totalJasa:0,grandTotal:0});return a.jsx(In,{loading:T||Re||_e,children:a.jsx(tn,{enableReinitialize:!0,initialValues:F,validationSchema:Hx,onSubmit:()=>{},children:q=>{const{values:ce,errors:R,touched:w,setFieldValue:Se}=q,Z=()=>{m(!0),z(null),Q(!1),he(null),Se("tempItem","")},j=async()=>{var k,P,C;if(!R.tempItem){G(!0);const le={item:ce.tempItem,idProject:ce.tempIdProject,detail:[]};try{let I;if(Ne!==null&&J){const Le=J[Ne].id;I=await Nx({id:Le,item:ce.tempItem})}else I=await Dx(le);G(!1),I&&((k=I.data)==null?void 0:k.statusCode)>=200&&((P=I.data)==null?void 0:P.statusCode)<300?(_(Mn({id:A})),oe(Ne!==null?"diperbarui":"ditambahkan"),Se("tempItem",""),m(!1),z(null)):ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:I?(C=I.data)==null?void 0:C.message:"Gagal menambahkan item"}),{placement:"top-center"})}catch(I){G(!1),console.error("Error:",I),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Terjadi kesalahan saat memproses permintaan"}),{placement:"top-center"})}}},fe=()=>{m(!1),z(null),Se("tempItem","")},xe=k=>{if(J){const P=J[k];Se("tempItem",P.nama),z(k),m(!0),Q(!1),he(null)}},Xe=k=>{O(k),Ee(!0)},Ke=()=>{Ee(!1),O(null)},Ae=async()=>{if(ne!==null&&J){const k=J[ne];G(!0);try{await Ix(k)&&(_(Mn({id:A})),oe("dihapus"))}catch(P){console.error("Error deleting item:",P),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Gagal menghapus item"}),{placement:"top-center"})}finally{G(!1),Ee(!1),O(null)}}};return a.jsx(hn,{children:a.jsxs(Hn,{divider:!0,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(gn,{title:"Informasi RAB",desc:"Daftar RAB dan detail RAB proyek"}),!h&&a.jsx($,{size:"sm",variant:"twoTone",onClick:Z,className:"w-fit text-xs",type:"button",children:"Tambah Item"})]}),h&&a.jsxs("div",{className:"mb-4 border bg-slate-50 rounded-md p-4",children:[a.jsx("h6",{className:"mb-3",children:Ne!==null?"Edit Item":"Tambah Item Baru"}),a.jsxs(Na,{children:[a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsx(ke,{label:"Nama Item",errorMessage:R.tempItem&&w.tempItem?R.tempItem:"",invalid:!!(R.tempItem&&w.tempItem),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempItem",placeholder:"Masukkan nama item",component:We})})}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[a.jsx($,{size:"sm",variant:"plain",onClick:fe,type:"button",children:"Batal"}),a.jsx($,{size:"sm",variant:"solid",onClick:j,type:"button",loading:_e,children:"Simpan"})]})]})]}),a.jsx(tn,{enableReinitialize:!0,initialValues:S,validationSchema:qx,onSubmit:()=>{},children:k=>{const{values:P,errors:C,touched:le,setFieldValue:I}=k,Le=()=>{const L=at(P.tempVolume),ue=at(P.tempHargaSatuanMaterial),Oe=L*ue;I("tempJumlahHargaMaterial",Oe),Ut()},dt=()=>{const L=at(P.tempVolume),ue=at(P.tempHargaSatuanJasa),Oe=L*ue;I("tempJumlahHargaJasa",Oe),Ut()},Ut=()=>{const L=at(P.tempJumlahHargaMaterial),ue=at(P.tempJumlahHargaJasa),Oe=L+ue;I("tempJumlah",Oe)},lt=L=>{J&&(ye(L),Q(!0),he(null),m(!1),I("tempIdItem",J[L].id),I("tempUraian",""),I("tempSatuan",""),I("tempVolume",""),I("tempHargaSatuanMaterial",""),I("tempHargaSatuanJasa",""),I("tempJumlahHargaMaterial",""),I("tempJumlahHargaJasa",""),I("tempJumlah",""))},Ye=async()=>{var L,ue,Oe;if(!C.tempUraian&&!C.tempSatuan&&!C.tempVolume&&!C.tempHargaSatuanMaterial&&!C.tempHargaSatuanJasa){G(!0);const De={uraian:P.tempUraian,idSatuan:P.tempSatuan,volume:at(P.tempVolume),harga_satuan_material:at(P.tempHargaSatuanMaterial),harga_satuan_jasa:at(P.tempHargaSatuanJasa),jumlah_harga_material:at(P.tempJumlahHargaMaterial),jumlah_harga_jasa:at(P.tempJumlahHargaJasa),jumlah:at(P.tempJumlah),idItemProject:P.tempIdItem};try{let Qe;if(K!==null&&U!==null&&J){const xn=J[U].DetailItemProjects[K].id;Qe=await Px({id:xn,...De})}else Qe=await Cx(De);G(!1),Qe&&((L=Qe.data)==null?void 0:L.statusCode)>=200&&((ue=Qe.data)==null?void 0:ue.statusCode)<300?(_(Mn({id:A})),oe(K!==null?"diperbarui":"ditambahkan"),I("tempUraian",""),I("tempSatuan",""),I("tempVolume",""),I("tempHargaSatuanMaterial",""),I("tempHargaSatuanJasa",""),I("tempJumlahHargaMaterial",""),I("tempJumlahHargaJasa",""),I("tempJumlah",""),Q(!1),he(null)):ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:Qe?(Oe=Qe.data)==null?void 0:Oe.message:"Gagal menambahkan detail item"}),{placement:"top-center"})}catch(Qe){G(!1),console.error("Error:",Qe),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Terjadi kesalahan saat memproses permintaan"}),{placement:"top-center"})}}},zt=()=>{Q(!1),he(null),ye(null),I("tempUraian",""),I("tempSatuan",""),I("tempVolume",""),I("tempHargaSatuanMaterial",""),I("tempHargaSatuanJasa",""),I("tempJumlahHargaMaterial",""),I("tempJumlahHargaJasa",""),I("tempJumlah","")},nn=(L,ue)=>{if(J){const Oe=J[L],De=Oe.DetailItemProjects[ue];ye(L),I("tempUraian",De.uraian),I("tempSatuan",De.idSatuan),I("tempVolume",De.volume),I("tempHargaSatuanMaterial",De.harga_satuan_material),I("tempHargaSatuanJasa",De.harga_satuan_jasa),I("tempJumlahHargaMaterial",De.jumlah_harga_material),I("tempJumlahHargaJasa",De.jumlah_harga_jasa),I("tempJumlah",De.jumlah),I("tempIdItem",Oe.id),he(ue),Q(!0),m(!1)}},qn=(L,ue)=>{ye(L),M(ue),pe(!0)},Kt=()=>{pe(!1),M(null),ye(null)},Jn=async()=>{if(re!==null&&U!==null&&J){const L=J[U].DetailItemProjects[re];G(!0);try{await Ax(L)&&(_(Mn({id:A})),oe("dihapus"))}catch(ue){console.error("Error deleting detail item:",ue),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Gagal menghapus detail item"}),{placement:"top-center"})}finally{G(!1),pe(!1),M(null),ye(null)}}};return a.jsxs(a.Fragment,{children:[u&&a.jsxs("div",{className:"mb-4 border bg-slate-50 rounded-md p-4",children:[a.jsx("h6",{className:"mb-3",children:K!==null?"Edit Detail Item":"Tambah Detail Item Baru"}),a.jsxs(Na,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ke,{label:"Uraian",errorMessage:C.tempUraian&&le.tempUraian?C.tempUraian:"",invalid:!!(C.tempUraian&&le.tempUraian),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempUraian",placeholder:"Masukkan uraian",component:We})}),a.jsx(ke,{label:"Satuan",errorMessage:C.tempSatuan&&le.tempSatuan?C.tempSatuan:"",invalid:!!(C.tempSatuan&&le.tempSatuan),children:a.jsx(Be,{name:"tempSatuan",children:({field:L,form:ue})=>{var Qe,xn;const Oe=L.value?(Qe=Y.data)==null?void 0:Qe.find(Ct=>Ct.id===L.value):null,De=(xn=Y.data)==null?void 0:xn.map(Ct=>({value:Ct.id,label:`${Ct.satuan}`}));return console.log("field",L),console.log("satuansData.data?",Y.data),a.jsx(Wi,{field:L,form:ue,options:De,value:Oe?{value:Oe.id,label:`${Oe.satuan}`}:null,placeholder:"Pilih satuan",onChange:Ct=>{ue.setFieldValue(L.name,Ct==null?void 0:Ct.value)}})}})}),a.jsx(ke,{label:"Volume",errorMessage:C.tempVolume&&le.tempVolume?C.tempVolume:"",invalid:!!(C.tempVolume&&le.tempVolume),children:a.jsx(Be,{name:"tempVolume",children:({field:L,form:ue})=>a.jsx(Mt,{thousandSeparator:".",decimalSeparator:",",placeholder:"Masukkan volume",customInput:We,...L,onValueChange:Oe=>{const{value:De}=Oe;ue.setFieldValue(L.name,De),Le(),dt()}})})}),a.jsx(ke,{label:"Harga Satuan Material",errorMessage:C.tempHargaSatuanMaterial&&le.tempHargaSatuanMaterial?C.tempHargaSatuanMaterial:"",invalid:!!(C.tempHargaSatuanMaterial&&le.tempHargaSatuanMaterial),children:a.jsx(Be,{name:"tempHargaSatuanMaterial",children:({field:L,form:ue})=>a.jsx(Mt,{thousandSeparator:".",decimalSeparator:",",prefix:"Rp ",placeholder:"Masukkan harga satuan material",customInput:We,...L,onValueChange:Oe=>{const{value:De}=Oe;ue.setFieldValue(L.name,De),Le()}})})}),a.jsx(ke,{label:"Harga Satuan Jasa",errorMessage:C.tempHargaSatuanJasa&&le.tempHargaSatuanJasa?C.tempHargaSatuanJasa:"",invalid:!!(C.tempHargaSatuanJasa&&le.tempHargaSatuanJasa),children:a.jsx(Be,{name:"tempHargaSatuanJasa",children:({field:L,form:ue})=>a.jsx(Mt,{thousandSeparator:".",decimalSeparator:",",prefix:"Rp ",placeholder:"Masukkan harga satuan jasa",customInput:We,...L,onValueChange:Oe=>{const{value:De}=Oe;ue.setFieldValue(L.name,De),dt()}})})}),a.jsx(ke,{label:"Jumlah Harga Material",children:a.jsx(Be,{name:"tempJumlahHargaMaterial",children:({field:L})=>a.jsx(Mt,{disabled:!0,thousandSeparator:".",decimalSeparator:",",prefix:"Rp ",placeholder:"Jumlah harga material",customInput:We,...L,readOnly:!0,value:L.value||"0"})})}),a.jsx(ke,{label:"Jumlah Harga Jasa",children:a.jsx(Be,{name:"tempJumlahHargaJasa",children:({field:L})=>a.jsx(Mt,{disabled:!0,thousandSeparator:".",decimalSeparator:",",prefix:"Rp ",placeholder:"Jumlah harga jasa",customInput:We,...L,readOnly:!0,value:L.value||"0"})})}),a.jsx(ke,{label:"Total",children:a.jsx(Be,{name:"tempJumlah",children:({field:L})=>a.jsx(Mt,{disabled:!0,thousandSeparator:".",decimalSeparator:",",prefix:"Rp ",placeholder:"Total",customInput:We,...L,readOnly:!0,value:L.value||"0"})})})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[a.jsx($,{size:"sm",variant:"plain",onClick:zt,type:"button",children:"Batal"}),a.jsx($,{size:"sm",variant:"solid",onClick:Ye,type:"button",loading:_e,children:"Simpan"})]})]})]}),J&&J.length>0?a.jsx("div",{className:"overflow-auto sm:overflow-auto",children:a.jsxs("div",{className:"mb-4 bg-red min-w-[1000px] sm:w-full",children:[a.jsxs("div",{className:"grid grid-cols-5  px-4 gap-4 font-semibold bg-gray-100 py-5 rounded-t-md",children:[a.jsx("div",{className:"col-span-1",children:"Item"}),a.jsx("div",{className:"col-span-1",children:"Total Material"}),a.jsx("div",{className:"col-span-1",children:"Total Jasa"}),a.jsx("div",{className:"col-span-1",children:"Grand Total"}),a.jsx("div",{className:"col-span-1 text-right",children:"Aksi"})]}),J.map((L,ue)=>{const Oe=Ge(L.DetailItemProjects);return a.jsxs("div",{className:la("border-b",{"border-b-0":ua(J,ue)}),children:[a.jsxs("div",{className:`grid grid-cols-5 gap-4 px-4 py-4
                                                                            ${H[ue]?"bg-gray-50":"bg-white"} hover:bg-gray-50`,children:[a.jsxs("div",{className:"col-span-1 flex items-center",children:[a.jsx("button",{onClick:()=>Pe(ue),className:"mr-2",type:"button",children:H[ue]?a.jsx(qg,{}):a.jsx(Jg,{})}),a.jsx("span",{className:"font-semibold",children:a.jsx(Nu,{defaultChecked:L.status,onChange:(De,Qe)=>we(L)(De,Qe),children:L.nama})})]}),a.jsx("div",{className:"col-span-1",children:y(Oe.totalMaterial)}),a.jsx("div",{className:"col-span-1",children:y(Oe.totalJasa)}),a.jsx("div",{className:"col-span-1",children:y(Oe.grandTotal)}),a.jsxs("div",{className:"col-span-1 flex justify-end space-x-2",children:[a.jsx($,{size:"xs",variant:"twoTone",onClick:()=>lt(ue),icon:a.jsx($g,{}),children:"Detail"}),a.jsx($,{size:"xs",variant:"twoTone",onClick:()=>xe(ue),icon:a.jsx(mn,{})}),a.jsx($,{size:"xs",variant:"twoTone",color:"red",onClick:()=>Xe(ue),icon:a.jsx($t,{})})]})]}),H[ue]&&L.DetailItemProjects.length>0&&a.jsxs("div",{className:"bg-gray-50 p-2",children:[a.jsxs("div",{className:"grid grid-cols-10 gap-4  px-4 font-semibold items-center text-sm py-2 bg-gray-100 rounded-md",children:[a.jsx("div",{className:"col-span-2",children:"Uraian"}),a.jsx("div",{className:"col-span-1",children:"Satuan"}),a.jsx("div",{className:"col-span-1",children:"Volume"}),a.jsx("div",{className:"col-span-1",children:"Harga Material"}),a.jsx("div",{className:"col-span-1",children:"Harga Jasa"}),a.jsx("div",{className:"col-span-1",children:"Jumlah Material"}),a.jsx("div",{className:"col-span-1",children:"Jumlah Jasa"}),a.jsx("div",{className:"col-span-1",children:"Total"}),a.jsx("div",{className:"col-span-1 text-right",children:"Aksi"})]}),L.DetailItemProjects.map((De,Qe)=>(console.log("detail",De),a.jsxs("div",{className:la("grid grid-cols-10 gap-4 px-4 py-4 text-sm bg-white border-b",{"rounded-b-md border-b-0":ua(L.DetailItemProjects,Qe)}),children:[a.jsx("div",{className:"col-span-2 truncate",children:De.uraian}),a.jsx("div",{className:"col-span-1",children:De.satuan}),a.jsx("div",{className:"col-span-1",children:De.volume.toLocaleString("id-ID")}),a.jsx("div",{className:"col-span-1",children:y(De.harga_satuan_material)}),a.jsx("div",{className:"col-span-1",children:y(De.harga_satuan_jasa)}),a.jsx("div",{className:"col-span-1",children:y(De.jumlah_harga_material)}),a.jsx("div",{className:"col-span-1",children:y(De.jumlah_harga_jasa)}),a.jsx("div",{className:"col-span-1",children:y(De.jumlah)}),a.jsxs("div",{className:"col-span-1 flex justify-end space-x-2",children:[a.jsx($,{size:"xs",variant:"twoTone",onClick:()=>nn(ue,Qe),icon:a.jsx(mn,{})}),a.jsx($,{size:"xs",variant:"twoTone",color:"red",onClick:()=>qn(ue,Qe),icon:a.jsx($t,{})})]})]},De.id)))]})]},L.id)}),J.length>0&&a.jsxs("div",{className:"grid grid-cols-5 gap-4 px-4 py-5 bg-gray-100 font-semibold rounded-b-md",children:[a.jsx("div",{className:"col-span-1",children:"Total Keseluruhan"}),(()=>{const L=B(J);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-1",children:y(L.totalMaterial)}),a.jsx("div",{className:"col-span-1",children:y(L.totalJasa)}),a.jsx("div",{className:"col-span-1",children:y(L.grandTotal)}),a.jsx("div",{className:"col-span-1"})]})})()]})]})}):a.jsxs("div",{className:"text-center py-5 bg-gray-50 rounded-lg",children:[a.jsx(Gg,{className:"mx-auto text-4xl text-gray-400 mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Belum ada item yang ditambahkan"}),a.jsx($,{size:"sm",variant:"twoTone",onClick:Z,className:"w-fit mt-3",type:"button",children:"Tambah Item"})]}),a.jsx(_t,{isOpen:V,onClose:Ke,onConfirm:Ae,title:"Hapus Item",confirmButtonColor:"red-600",children:a.jsxs("p",{children:["Apakah Anda yakin ingin menghapus item ini dan semua detail di dalamnya?",a.jsx("br",{}),"Tindakan ini tidak dapat dibatalkan."]})}),a.jsx(_t,{isOpen:je,onClose:Kt,onConfirm:Jn,title:"Hapus Detail Item",confirmButtonColor:"red-600",children:a.jsxs("p",{children:["Apakah Anda yakin ingin menghapus detail item ini?",a.jsx("br",{}),"Tindakan ini tidak dapat dibatalkan."]})})]})}})]})})}})})}const $x=Gt().shape({tempLokasi:Ze().required("Nama lokasi harus diisi"),tempLatitude:xu().required("Latitude harus diisi").typeError("Latitude harus berupa angka"),tempLongitude:xu().required("Longitude harus diisi").typeError("Longitude harus berupa angka")});Wn("proyekDetail",wa);function Gx(){const[h,m]=N.useState(!1),[u,Q]=N.useState(null),[Ne,z]=N.useState(!1),[K,he]=N.useState(!1),[U,ye]=N.useState(null),_e=pn(),G=location.pathname.substring(location.pathname.lastIndexOf("/")+1),V=Rt(ne=>{var O;return(O=ne.proyekDetail.data.lokasisByProyekData)==null?void 0:O.data}),Ee=Rt(ne=>ne.proyekDetail.data.loadingLokasiProyeks);N.useEffect(()=>{_e(sa({id:G}))},[_e,G]);const je={tempLokasi:"",tempLatitude:"",tempLongitude:"",tempIdProject:G||""},pe=ne=>{ie.push(a.jsxs(se,{title:`Berhasil ${ne}`,type:"success",duration:2500,children:["Data lokasi berhasil ",ne]}),{placement:"top-center"})};return a.jsx(In,{loading:Ee||Ne,children:a.jsx(tn,{enableReinitialize:!0,initialValues:je,validationSchema:$x,onSubmit:()=>{},children:ne=>{const{values:O,errors:re,touched:M,setFieldValue:H}=ne,ae=()=>{m(!0),Q(null),H("tempLokasi",""),H("tempLatitude",""),H("tempLongitude","")},_=async()=>{var F,S;if(!re.tempLokasi&&!re.tempLatitude&&!re.tempLongitude){z(!0);const oe={lokasi:O.tempLokasi,latitude:O.tempLatitude,longitude:O.tempLongitude,idProject:O.tempIdProject};try{let we;if(u!==null&&V){const Pe=V[u].id;we=await gx({id:Pe,...oe})}else we=await px(oe);z(!1),console.log("result",we),we&&((F=we.data)==null?void 0:F.statusCode)>=200&&((S=we.data)==null?void 0:S.statusCode)<300?(_e(sa({id:G})),pe(u!==null?"diperbarui":"ditambahkan"),A(),m(!1),Q(null)):ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:we?we.data.message:"Gagal menambahkan lokasi"}),{placement:"top-center"})}catch(we){z(!1),console.error("Error:",we),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Terjadi kesalahan saat memproses permintaan"}),{placement:"top-center"})}}},A=()=>{H("tempLokasi",""),H("tempLatitude",""),H("tempLongitude","")},T=()=>{m(!1),Q(null),A()},J=F=>{if(V){const S=V[F];H("tempLokasi",S.lokasi),H("tempLatitude",S.latitude),H("tempLongitude",S.longitude),H("tempIdProject",S.idProject),Q(F),m(!0)}},Y=F=>{ye(F),he(!0)},Re=()=>{he(!1),ye(null)},y=async()=>{if(U!==null&&V){const F=V[U];z(!0);try{console.log("lokasidata",V),console.log("id,lok",F),await xx(F)&&(_e(sa({id:G})),pe("dihapus"))}catch(S){console.error("Error deleting location:",S),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Gagal menghapus lokasi"}),{placement:"top-center"})}finally{z(!1),he(!1),ye(null)}}};return a.jsxs(hn,{children:[a.jsxs(Hn,{divider:!0,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(gn,{title:"Informasi Lokasi",desc:"Informasi lokasi proyek"}),!h&&a.jsx($,{size:"sm",variant:"twoTone",onClick:ae,className:"w-fit text-xs",type:"button",children:"Tambah Lokasi"})]}),h&&a.jsxs("div",{className:"mb-4 border bg-slate-50 rounded-md p-4",children:[a.jsx("h6",{className:"mb-3",children:u!==null?"Edit Lokasi":"Tambah Lokasi Baru"}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(ke,{className:"mb-3",label:"Nama Lokasi",errorMessage:re.tempLokasi&&M.tempLokasi?re.tempLokasi:"",invalid:!!(re.tempLokasi&&M.tempLokasi),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempLokasi",placeholder:"Nama lokasi",component:We})}),a.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsx(ke,{className:"mb-3",label:"Latitude",errorMessage:re.tempLatitude&&M.tempLatitude?re.tempLatitude:"",invalid:!!(re.tempLatitude&&M.tempLatitude),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempLatitude",placeholder:"Contoh: -6.2088",component:We})}),a.jsx(ke,{className:"mb-3",label:"Longitude",errorMessage:re.tempLongitude&&M.tempLongitude?re.tempLongitude:"",invalid:!!(re.tempLongitude&&M.tempLongitude),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempLongitude",placeholder:"Contoh: 106.8456",component:We})})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[a.jsx($,{size:"sm",variant:"plain",onClick:T,type:"button",children:"Batal"}),a.jsx($,{size:"sm",variant:"solid",onClick:_,type:"button",loading:Ne,children:"Simpan"})]})]}),V&&V.length>0?a.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600",children:V.map((F,S)=>u===S?null:a.jsxs("div",{className:la("flex items-center justify-between px-4 py-6",!ua(V,S)&&"border-b border-gray-200 dark:border-gray-600"),children:[a.jsxs("a",{href:`https://www.google.com/maps?q=${F.latitude},${F.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center group flex-grow",children:[a.jsx("div",{className:"text-3xl",children:a.jsx(ix,{className:"group-hover:text-blue-600 transition"})}),a.jsxs("div",{className:"ml-3 rtl:mr-3",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:F.lokasi})}),a.jsxs("span",{children:["lat:"," ",F.latitude,", long:"," ",F.longitude]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",icon:a.jsx(mn,{}),className:"text-indigo-500",onClick:()=>J(S)}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>Y(S)})]})]},F.id))}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Belum ada data lokasi. Klik 'Tambah Lokasi' untuk menambahkan."})]}),a.jsx(_t,{isOpen:K,type:"danger",title:"Hapus Lokasi",confirmButtonColor:"red-600",onClose:Re,onRequestClose:Re,onCancel:Re,onConfirm:y,children:a.jsx("p",{children:"Apakah kamu yakin ingin menghapus lokasi ini?"})})]})}})})}const zx=Gt().shape({tempNomorSurat:Ze().required("Nomor surat harus diisi"),tempNilaiSubkontrak:Ze().required("Nilai subkontrak harus diisi"),tempWaktuMulai:Mi().required("Waktu mulai pelaksanaan harus diisi").typeError("Format tanggal tidak valid"),tempWaktuSelesai:Mi().required("Waktu selesai pelaksanaan harus diisi").typeError("Format tanggal tidak valid").min(Qg("tempWaktuMulai"),"Waktu selesai harus setelah waktu mulai"),tempIdSubkon:Ze().required("Subkontraktor harus dipilih")});Wn("proyekDetail",wa);function Kx(){const[h,m]=N.useState(!1),[u,Q]=N.useState(null),[Ne,z]=N.useState(!1),[K,he]=N.useState(!1),[U,ye]=N.useState(null),[_e,G]=N.useState([]),V=pn(),Ee=location.pathname.substring(location.pathname.lastIndexOf("/")+1),je=Rt(_=>{var A;return(A=_.proyekDetail.data.subkonByProyekData)==null?void 0:A.data}),pe=Rt(_=>{var A;return(A=_.proyekDetail.data.subkontraktorsData)==null?void 0:A.data}),ne=Rt(_=>_.proyekDetail.data.loadingSubkonsByProyek),O=Rt(_=>_.proyekDetail.data.loadingSubkontraktors);N.useEffect(()=>{V(ia({id:Ee})),V(Ri())},[V,Ee]),N.useEffect(()=>{if(pe&&pe.length>0){const _=pe.map(A=>({value:A.id,label:A.nama}));G(_)}},[pe]);const re=_=>new Date(_).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),M=_=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(_),H={tempNomorSurat:"",tempNilaiSubkontrak:"",tempWaktuMulai:null,tempWaktuSelesai:null,tempKeterangan:"",tempIdProject:Ee||"",tempIdSubkon:""},ae=_=>{ie.push(a.jsxs(se,{title:`Berhasil ${_}`,type:"success",duration:2500,children:["Data subkontraktor berhasil ",_]}),{placement:"top-center"})};return a.jsx(In,{loading:ne||O||Ne,children:a.jsx(tn,{enableReinitialize:!0,initialValues:H,validationSchema:zx,onSubmit:()=>{},children:_=>{const{values:A,errors:T,touched:J,setFieldValue:Y}=_,Re=()=>{m(!0),Q(null),Y("tempNomorSurat",""),Y("tempNilaiSubkontrak",""),Y("tempWaktuMulai",null),Y("tempWaktuSelesai",null),Y("tempKeterangan",""),Y("tempIdSubkon","")},y=async()=>{var B,q,ce,R,w;if(!T.tempNomorSurat&&!T.tempNilaiSubkontrak&&!T.tempWaktuMulai&&!T.tempWaktuSelesai&&!T.tempIdSubkon){z(!0);const Se=pe==null?void 0:pe.find(j=>j.id===A.tempIdSubkon),Z={nomor_surat:A.tempNomorSurat,nilai_subkontrak:at(A.tempNilaiSubkontrak),waktu_mulai_pelaksanaan:(B=A.tempWaktuMulai)==null?void 0:B.toISOString(),waktu_selesai_pelaksanaan:(q=A.tempWaktuSelesai)==null?void 0:q.toISOString(),keterangan:A.tempKeterangan||"-",idProject:A.tempIdProject,idSubkon:A.tempIdSubkon,nama:(Se==null?void 0:Se.nama)||""};try{let j;if(u!==null&&je){const fe=je[u].id;j=await tx({id:fe,...Z})}else j=await nx(Z);z(!1),j&&((ce=j.data)==null?void 0:ce.statusCode)>=200&&((R=j.data)==null?void 0:R.statusCode)<300?(V(ia({id:Ee})),ae(u!==null?"diperbarui":"ditambahkan"),F(),m(!1),Q(null)):ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:j?(w=j.data)==null?void 0:w.message:"Gagal menambahkan subkontraktor"}),{placement:"top-center"})}catch(j){z(!1),console.error("Error:",j),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Terjadi kesalahan saat memproses permintaan"}),{placement:"top-center"})}}},F=()=>{Y("tempNomorSurat",""),Y("tempNilaiSubkontrak",""),Y("tempWaktuMulai",null),Y("tempWaktuSelesai",null),Y("tempKeterangan",""),Y("tempIdSubkon","")},S=()=>{m(!1),Q(null),F()},oe=B=>{if(je){const q=je[B];Y("tempNomorSurat",q.nomor_surat),Y("tempNilaiSubkontrak",q.nilai_subkontrak),Y("tempWaktuMulai",new Date(q.waktu_mulai_pelaksanaan)),Y("tempWaktuSelesai",new Date(q.waktu_selesai_pelaksanaan)),Y("tempKeterangan",q.keterangan),Y("tempIdProject",q.idProject),Y("tempIdSubkon",q.idSubkon),Q(B),m(!0)}},we=B=>{ye(B),he(!0)},Pe=()=>{he(!1),ye(null)},Ge=async()=>{if(U!==null&&je){const B=je[U];z(!0);try{await ax(B)&&(V(ia({id:Ee})),ae("dihapus"))}catch(q){console.error("Error deleting subkontraktor:",q),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:"Gagal menghapus subkontraktor"}),{placement:"top-center"})}finally{z(!1),he(!1),ye(null)}}};return a.jsxs(hn,{children:[a.jsxs(Hn,{divider:!0,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(gn,{title:"Informasi Subkontraktor",desc:"Informasi subkontraktor proyek"}),!h&&a.jsx($,{size:"sm",variant:"twoTone",onClick:Re,className:"w-fit text-xs",type:"button",children:"Tambah Subkontraktor"})]}),h&&a.jsxs("div",{className:"mb-4 border bg-slate-50 rounded-md p-4",children:[a.jsx("h6",{className:"mb-3",children:u!==null?"Edit Subkontraktor":"Tambah Subkontraktor Baru"}),a.jsxs(Na,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ke,{label:"Nama Subkontraktor",errorMessage:T.tempIdSubkon&&J.tempIdSubkon?T.tempIdSubkon:"",invalid:!!(T.tempIdSubkon&&J.tempIdSubkon),children:a.jsx(Be,{name:"tempIdSubkon",children:({field:B,form:q})=>{const ce=_e.find(R=>R.value===B.value);return a.jsx(Wi,{placeholder:"Pilih subkontraktor",options:_e,value:ce,onChange:R=>{q.setFieldValue(B.name,(R==null?void 0:R.value)||"")}})}})}),a.jsx(ke,{label:"Nomor Surat",errorMessage:T.tempNomorSurat&&J.tempNomorSurat?T.tempNomorSurat:"",invalid:!!(T.tempNomorSurat&&J.tempNomorSurat),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempNomorSurat",placeholder:"Contoh: 01/IV/2025",component:We})}),a.jsx(ke,{label:"Nilai Subkontrak",className:"mb-3",errorMessage:T.tempNilaiSubkontrak&&J.tempNilaiSubkontrak?T.tempNilaiSubkontrak:"",invalid:!!(T.tempNilaiSubkontrak&&J.tempNilaiSubkontrak),children:a.jsx(Be,{name:"tempNilaiSubkontrak",children:({field:B,form:q})=>a.jsx(Mt,{...B,placeholder:"Nilai dalam Rupiah",customInput:We,thousandSeparator:".",decimalSeparator:",",onValueChange:ce=>q.setFieldValue(B.name,ce.value)})})}),a.jsx(ke,{label:"Waktu Mulai Pelaksanaan",errorMessage:T.tempWaktuMulai&&J.tempWaktuMulai?T.tempWaktuMulai:"",invalid:!!(T.tempWaktuMulai&&J.tempWaktuMulai),children:a.jsx(wn,{placeholder:"Pilih tanggal mulai",value:A.tempWaktuMulai,inputFormat:"DD-MM-YYYY",onChange:B=>{Y("tempWaktuMulai",B)}})}),a.jsx(ke,{label:"Waktu Selesai Pelaksanaan",errorMessage:T.tempWaktuSelesai&&J.tempWaktuSelesai?T.tempWaktuSelesai:"",invalid:!!(T.tempWaktuSelesai&&J.tempWaktuSelesai),children:a.jsx(wn,{placeholder:"Pilih tanggal selesai",value:A.tempWaktuSelesai,inputFormat:"DD-MM-YYYY",onChange:B=>{Y("tempWaktuSelesai",B)}})}),a.jsx(ke,{label:"Keterangan",className:"col-span-2",children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempKeterangan",placeholder:"Keterangan (opsional)",component:We})})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[a.jsx($,{size:"sm",variant:"plain",onClick:S,type:"button",children:"Batal"}),a.jsx($,{size:"sm",variant:"solid",onClick:y,type:"button",loading:Ne,children:"Simpan"})]})]})]}),je&&je.length>0?a.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600",children:je.map((B,q)=>u===q?null:a.jsxs("div",{className:la("flex items-center justify-between px-4 py-6",!ua(je,q)&&"border-b border-gray-200 dark:border-gray-600"),children:[a.jsxs("div",{className:"flex items-center flex-grow",children:[a.jsx("div",{className:"text-3xl",children:a.jsx(zg,{className:"text-indigo-500"})}),a.jsxs("div",{className:"ml-3 rtl:mr-3",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:B.nama})}),a.jsxs("div",{className:"text-gray-500 text-sm mt-1",children:[a.jsxs("div",{children:["No. Surat:"," ",B.nomor_surat]}),a.jsxs("div",{children:["Nilai:"," ",M(B.nilai_subkontrak)]}),a.jsxs("div",{children:["Periode:"," ",re(B.waktu_mulai_pelaksanaan)," ","-"," ",re(B.waktu_selesai_pelaksanaan)]}),B.keterangan!=="-"&&a.jsxs("div",{children:["Keterangan:"," ",B.keterangan]})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",icon:a.jsx(mn,{}),className:"text-indigo-500",onClick:()=>oe(q)}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>we(q)})]})]},B.id))}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Belum ada data subkontraktor. Klik 'Tambah Subkontraktor' untuk menambahkan."})]}),a.jsx(_t,{isOpen:K,type:"danger",title:"Hapus Subkontraktor",confirmButtonColor:"red-600",onClose:Pe,onRequestClose:Pe,onCancel:Pe,onConfirm:Ge,children:a.jsx("p",{children:"Apakah kamu yakin ingin menghapus subkontraktor ini?"})})]})}})})}var xr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */xr.exports;(function(h,m){(function(){var u,Q="4.17.21",Ne=200,z="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",K="Expected a function",he="Invalid `variable` option passed into `_.template`",U="__lodash_hash_undefined__",ye=500,_e="__lodash_placeholder__",G=1,V=2,Ee=4,je=1,pe=2,ne=1,O=2,re=4,M=8,H=16,ae=32,_=64,A=128,T=256,J=512,Y=30,Re="...",y=800,F=16,S=1,oe=2,we=3,Pe=1/0,Ge=9007199254740991,B=17976931348623157e292,q=0/0,ce=4294967295,R=ce-1,w=ce>>>1,Se=[["ary",A],["bind",ne],["bindKey",O],["curry",M],["curryRight",H],["flip",J],["partial",ae],["partialRight",_],["rearg",T]],Z="[object Arguments]",j="[object Array]",fe="[object AsyncFunction]",xe="[object Boolean]",Xe="[object Date]",Ke="[object DOMException]",Ae="[object Error]",k="[object Function]",P="[object GeneratorFunction]",C="[object Map]",le="[object Number]",I="[object Null]",Le="[object Object]",dt="[object Promise]",Ut="[object Proxy]",lt="[object RegExp]",Ye="[object Set]",zt="[object String]",nn="[object Symbol]",qn="[object Undefined]",Kt="[object WeakMap]",Jn="[object WeakSet]",L="[object ArrayBuffer]",ue="[object DataView]",Oe="[object Float32Array]",De="[object Float64Array]",Qe="[object Int8Array]",xn="[object Int16Array]",Ct="[object Int32Array]",vr="[object Uint8Array]",br="[object Uint8ClampedArray]",kr="[object Uint16Array]",yr="[object Uint32Array]",Tu=/\b__p \+= '';/g,Eu=/\b(__p \+=) '' \+/g,Bu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Hi=/&(?:amp|lt|gt|quot|#39);/g,qi=/[&<>"']/g,Lu=RegExp(Hi.source),Ou=RegExp(qi.source),Fu=/<%-([\s\S]+?)%>/g,Mu=/<%([\s\S]+?)%>/g,Ji=/<%=([\s\S]+?)%>/g,Ru=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uu=/^\w*$/,Wu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_r=/[\\^$.*+?()[\]{}|]/g,Hu=RegExp(_r.source),jr=/^\s+/,qu=/\s/,Ju=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$u=/\{\n\/\* \[wrapped with (.+)\] \*/,Gu=/,? & /,zu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ku=/[()=,{}\[\]\/\s]/,Yu=/\\(\\)?/g,Vu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$i=/\w*$/,Zu=/^[-+]0x[0-9a-f]+$/i,Xu=/^0b[01]+$/i,Qu=/^\[object .+?Constructor\]$/,eo=/^0o[0-7]+$/i,to=/^(?:0|[1-9]\d*)$/,no=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ia=/($^)/,ao=/['\n\r\u2028\u2029\\]/g,Ca="\\ud800-\\udfff",ro="\\u0300-\\u036f",io="\\ufe20-\\ufe2f",so="\\u20d0-\\u20ff",Gi=ro+io+so,zi="\\u2700-\\u27bf",Ki="a-z\\xdf-\\xf6\\xf8-\\xff",lo="\\xac\\xb1\\xd7\\xf7",uo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",oo="\\u2000-\\u206f",co=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yi="A-Z\\xc0-\\xd6\\xd8-\\xde",Vi="\\ufe0e\\ufe0f",Zi=lo+uo+oo+co,Sr="['’]",fo="["+Ca+"]",Xi="["+Zi+"]",Pa="["+Gi+"]",Qi="\\d+",mo="["+zi+"]",es="["+Ki+"]",ts="[^"+Ca+Zi+Qi+zi+Ki+Yi+"]",Dr="\\ud83c[\\udffb-\\udfff]",ho="(?:"+Pa+"|"+Dr+")",ns="[^"+Ca+"]",Nr="(?:\\ud83c[\\udde6-\\uddff]){2}",wr="[\\ud800-\\udbff][\\udc00-\\udfff]",$n="["+Yi+"]",as="\\u200d",rs="(?:"+es+"|"+ts+")",po="(?:"+$n+"|"+ts+")",is="(?:"+Sr+"(?:d|ll|m|re|s|t|ve))?",ss="(?:"+Sr+"(?:D|LL|M|RE|S|T|VE))?",ls=ho+"?",us="["+Vi+"]?",go="(?:"+as+"(?:"+[ns,Nr,wr].join("|")+")"+us+ls+")*",xo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",os=us+ls+go,bo="(?:"+[mo,Nr,wr].join("|")+")"+os,ko="(?:"+[ns+Pa+"?",Pa,Nr,wr,fo].join("|")+")",yo=RegExp(Sr,"g"),_o=RegExp(Pa,"g"),Ir=RegExp(Dr+"(?="+Dr+")|"+ko+os,"g"),jo=RegExp([$n+"?"+es+"+"+is+"(?="+[Xi,$n,"$"].join("|")+")",po+"+"+ss+"(?="+[Xi,$n+rs,"$"].join("|")+")",$n+"?"+rs+"+"+is,$n+"+"+ss,vo,xo,Qi,bo].join("|"),"g"),So=RegExp("["+as+Ca+Gi+Vi+"]"),Do=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,No=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wo=-1,$e={};$e[Oe]=$e[De]=$e[Qe]=$e[xn]=$e[Ct]=$e[vr]=$e[br]=$e[kr]=$e[yr]=!0,$e[Z]=$e[j]=$e[L]=$e[xe]=$e[ue]=$e[Xe]=$e[Ae]=$e[k]=$e[C]=$e[le]=$e[Le]=$e[lt]=$e[Ye]=$e[zt]=$e[Kt]=!1;var Je={};Je[Z]=Je[j]=Je[L]=Je[ue]=Je[xe]=Je[Xe]=Je[Oe]=Je[De]=Je[Qe]=Je[xn]=Je[Ct]=Je[C]=Je[le]=Je[Le]=Je[lt]=Je[Ye]=Je[zt]=Je[nn]=Je[vr]=Je[br]=Je[kr]=Je[yr]=!0,Je[Ae]=Je[k]=Je[Kt]=!1;var Io={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Co={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Po={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ao={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},To=parseFloat,Eo=parseInt,cs=typeof Sa=="object"&&Sa&&Sa.Object===Object&&Sa,Bo=typeof self=="object"&&self&&self.Object===Object&&self,ut=cs||Bo||Function("return this")(),Cr=m&&!m.nodeType&&m,Cn=Cr&&!0&&h&&!h.nodeType&&h,ds=Cn&&Cn.exports===Cr,Pr=ds&&cs.process,Pt=function(){try{var d=Cn&&Cn.require&&Cn.require("util").types;return d||Pr&&Pr.binding&&Pr.binding("util")}catch{}}(),fs=Pt&&Pt.isArrayBuffer,ms=Pt&&Pt.isDate,hs=Pt&&Pt.isMap,ps=Pt&&Pt.isRegExp,gs=Pt&&Pt.isSet,xs=Pt&&Pt.isTypedArray;function jt(d,g,p){switch(p.length){case 0:return d.call(g);case 1:return d.call(g,p[0]);case 2:return d.call(g,p[0],p[1]);case 3:return d.call(g,p[0],p[1],p[2])}return d.apply(g,p)}function Lo(d,g,p,E){for(var de=-1,Fe=d==null?0:d.length;++de<Fe;){var rt=d[de];g(E,rt,p(rt),d)}return E}function At(d,g){for(var p=-1,E=d==null?0:d.length;++p<E&&g(d[p],p,d)!==!1;);return d}function Oo(d,g){for(var p=d==null?0:d.length;p--&&g(d[p],p,d)!==!1;);return d}function vs(d,g){for(var p=-1,E=d==null?0:d.length;++p<E;)if(!g(d[p],p,d))return!1;return!0}function vn(d,g){for(var p=-1,E=d==null?0:d.length,de=0,Fe=[];++p<E;){var rt=d[p];g(rt,p,d)&&(Fe[de++]=rt)}return Fe}function Aa(d,g){var p=d==null?0:d.length;return!!p&&Gn(d,g,0)>-1}function Ar(d,g,p){for(var E=-1,de=d==null?0:d.length;++E<de;)if(p(g,d[E]))return!0;return!1}function ze(d,g){for(var p=-1,E=d==null?0:d.length,de=Array(E);++p<E;)de[p]=g(d[p],p,d);return de}function bn(d,g){for(var p=-1,E=g.length,de=d.length;++p<E;)d[de+p]=g[p];return d}function Tr(d,g,p,E){var de=-1,Fe=d==null?0:d.length;for(E&&Fe&&(p=d[++de]);++de<Fe;)p=g(p,d[de],de,d);return p}function Fo(d,g,p,E){var de=d==null?0:d.length;for(E&&de&&(p=d[--de]);de--;)p=g(p,d[de],de,d);return p}function Er(d,g){for(var p=-1,E=d==null?0:d.length;++p<E;)if(g(d[p],p,d))return!0;return!1}var Mo=Br("length");function Ro(d){return d.split("")}function Uo(d){return d.match(zu)||[]}function bs(d,g,p){var E;return p(d,function(de,Fe,rt){if(g(de,Fe,rt))return E=Fe,!1}),E}function Ta(d,g,p,E){for(var de=d.length,Fe=p+(E?1:-1);E?Fe--:++Fe<de;)if(g(d[Fe],Fe,d))return Fe;return-1}function Gn(d,g,p){return g===g?Xo(d,g,p):Ta(d,ks,p)}function Wo(d,g,p,E){for(var de=p-1,Fe=d.length;++de<Fe;)if(E(d[de],g))return de;return-1}function ks(d){return d!==d}function ys(d,g){var p=d==null?0:d.length;return p?Or(d,g)/p:q}function Br(d){return function(g){return g==null?u:g[d]}}function Lr(d){return function(g){return d==null?u:d[g]}}function _s(d,g,p,E,de){return de(d,function(Fe,rt,He){p=E?(E=!1,Fe):g(p,Fe,rt,He)}),p}function Ho(d,g){var p=d.length;for(d.sort(g);p--;)d[p]=d[p].value;return d}function Or(d,g){for(var p,E=-1,de=d.length;++E<de;){var Fe=g(d[E]);Fe!==u&&(p=p===u?Fe:p+Fe)}return p}function Fr(d,g){for(var p=-1,E=Array(d);++p<d;)E[p]=g(p);return E}function qo(d,g){return ze(g,function(p){return[p,d[p]]})}function js(d){return d&&d.slice(0,ws(d)+1).replace(jr,"")}function St(d){return function(g){return d(g)}}function Mr(d,g){return ze(g,function(p){return d[p]})}function oa(d,g){return d.has(g)}function Ss(d,g){for(var p=-1,E=d.length;++p<E&&Gn(g,d[p],0)>-1;);return p}function Ds(d,g){for(var p=d.length;p--&&Gn(g,d[p],0)>-1;);return p}function Jo(d,g){for(var p=d.length,E=0;p--;)d[p]===g&&++E;return E}var $o=Lr(Io),Go=Lr(Co);function zo(d){return"\\"+Ao[d]}function Ko(d,g){return d==null?u:d[g]}function zn(d){return So.test(d)}function Yo(d){return Do.test(d)}function Vo(d){for(var g,p=[];!(g=d.next()).done;)p.push(g.value);return p}function Rr(d){var g=-1,p=Array(d.size);return d.forEach(function(E,de){p[++g]=[de,E]}),p}function Ns(d,g){return function(p){return d(g(p))}}function kn(d,g){for(var p=-1,E=d.length,de=0,Fe=[];++p<E;){var rt=d[p];(rt===g||rt===_e)&&(d[p]=_e,Fe[de++]=p)}return Fe}function Ea(d){var g=-1,p=Array(d.size);return d.forEach(function(E){p[++g]=E}),p}function Zo(d){var g=-1,p=Array(d.size);return d.forEach(function(E){p[++g]=[E,E]}),p}function Xo(d,g,p){for(var E=p-1,de=d.length;++E<de;)if(d[E]===g)return E;return-1}function Qo(d,g,p){for(var E=p+1;E--;)if(d[E]===g)return E;return E}function Kn(d){return zn(d)?tc(d):Mo(d)}function Wt(d){return zn(d)?nc(d):Ro(d)}function ws(d){for(var g=d.length;g--&&qu.test(d.charAt(g)););return g}var ec=Lr(Po);function tc(d){for(var g=Ir.lastIndex=0;Ir.test(d);)++g;return g}function nc(d){return d.match(Ir)||[]}function ac(d){return d.match(jo)||[]}var rc=function d(g){g=g==null?ut:Yn.defaults(ut.Object(),g,Yn.pick(ut,No));var p=g.Array,E=g.Date,de=g.Error,Fe=g.Function,rt=g.Math,He=g.Object,Ur=g.RegExp,ic=g.String,Tt=g.TypeError,Ba=p.prototype,sc=Fe.prototype,Vn=He.prototype,La=g["__core-js_shared__"],Oa=sc.toString,Ue=Vn.hasOwnProperty,lc=0,Is=function(){var e=/[^.]+$/.exec(La&&La.keys&&La.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fa=Vn.toString,uc=Oa.call(He),oc=ut._,cc=Ur("^"+Oa.call(Ue).replace(_r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ma=ds?g.Buffer:u,yn=g.Symbol,Ra=g.Uint8Array,Cs=Ma?Ma.allocUnsafe:u,Ua=Ns(He.getPrototypeOf,He),Ps=He.create,As=Vn.propertyIsEnumerable,Wa=Ba.splice,Ts=yn?yn.isConcatSpreadable:u,ca=yn?yn.iterator:u,Pn=yn?yn.toStringTag:u,Ha=function(){try{var e=Ln(He,"defineProperty");return e({},"",{}),e}catch{}}(),dc=g.clearTimeout!==ut.clearTimeout&&g.clearTimeout,fc=E&&E.now!==ut.Date.now&&E.now,mc=g.setTimeout!==ut.setTimeout&&g.setTimeout,qa=rt.ceil,Ja=rt.floor,Wr=He.getOwnPropertySymbols,hc=Ma?Ma.isBuffer:u,Es=g.isFinite,pc=Ba.join,gc=Ns(He.keys,He),it=rt.max,ft=rt.min,xc=E.now,vc=g.parseInt,Bs=rt.random,bc=Ba.reverse,Hr=Ln(g,"DataView"),da=Ln(g,"Map"),qr=Ln(g,"Promise"),Zn=Ln(g,"Set"),fa=Ln(g,"WeakMap"),ma=Ln(He,"create"),$a=fa&&new fa,Xn={},kc=On(Hr),yc=On(da),_c=On(qr),jc=On(Zn),Sc=On(fa),Ga=yn?yn.prototype:u,ha=Ga?Ga.valueOf:u,Ls=Ga?Ga.toString:u;function s(e){if(et(e)&&!me(e)&&!(e instanceof Ce)){if(e instanceof Et)return e;if(Ue.call(e,"__wrapped__"))return Ol(e)}return new Et(e)}var Qn=function(){function e(){}return function(t){if(!Ve(t))return{};if(Ps)return Ps(t);e.prototype=t;var n=new e;return e.prototype=u,n}}();function za(){}function Et(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=u}s.templateSettings={escape:Fu,evaluate:Mu,interpolate:Ji,variable:"",imports:{_:s}},s.prototype=za.prototype,s.prototype.constructor=s,Et.prototype=Qn(za.prototype),Et.prototype.constructor=Et;function Ce(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function Dc(){var e=new Ce(this.__wrapped__);return e.__actions__=vt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vt(this.__views__),e}function Nc(){if(this.__filtered__){var e=new Ce(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function wc(){var e=this.__wrapped__.value(),t=this.__dir__,n=me(e),r=t<0,i=n?e.length:0,l=Rd(0,i,this.__views__),o=l.start,c=l.end,f=c-o,x=r?c:o-1,v=this.__iteratees__,b=v.length,D=0,W=ft(f,this.__takeCount__);if(!n||!r&&i==f&&W==f)return il(e,this.__actions__);var ee=[];e:for(;f--&&D<W;){x+=t;for(var ve=-1,te=e[x];++ve<b;){var Ie=v[ve],Te=Ie.iteratee,wt=Ie.type,xt=Te(te);if(wt==oe)te=xt;else if(!xt){if(wt==S)continue e;break e}}ee[D++]=te}return ee}Ce.prototype=Qn(za.prototype),Ce.prototype.constructor=Ce;function An(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ic(){this.__data__=ma?ma(null):{},this.size=0}function Cc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Pc(e){var t=this.__data__;if(ma){var n=t[e];return n===U?u:n}return Ue.call(t,e)?t[e]:u}function Ac(e){var t=this.__data__;return ma?t[e]!==u:Ue.call(t,e)}function Tc(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ma&&t===u?U:t,this}An.prototype.clear=Ic,An.prototype.delete=Cc,An.prototype.get=Pc,An.prototype.has=Ac,An.prototype.set=Tc;function an(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ec(){this.__data__=[],this.size=0}function Bc(e){var t=this.__data__,n=Ka(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Wa.call(t,n,1),--this.size,!0}function Lc(e){var t=this.__data__,n=Ka(t,e);return n<0?u:t[n][1]}function Oc(e){return Ka(this.__data__,e)>-1}function Fc(e,t){var n=this.__data__,r=Ka(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}an.prototype.clear=Ec,an.prototype.delete=Bc,an.prototype.get=Lc,an.prototype.has=Oc,an.prototype.set=Fc;function rn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mc(){this.size=0,this.__data__={hash:new An,map:new(da||an),string:new An}}function Rc(e){var t=sr(this,e).delete(e);return this.size-=t?1:0,t}function Uc(e){return sr(this,e).get(e)}function Wc(e){return sr(this,e).has(e)}function Hc(e,t){var n=sr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}rn.prototype.clear=Mc,rn.prototype.delete=Rc,rn.prototype.get=Uc,rn.prototype.has=Wc,rn.prototype.set=Hc;function Tn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new rn;++t<n;)this.add(e[t])}function qc(e){return this.__data__.set(e,U),this}function Jc(e){return this.__data__.has(e)}Tn.prototype.add=Tn.prototype.push=qc,Tn.prototype.has=Jc;function Ht(e){var t=this.__data__=new an(e);this.size=t.size}function $c(){this.__data__=new an,this.size=0}function Gc(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function zc(e){return this.__data__.get(e)}function Kc(e){return this.__data__.has(e)}function Yc(e,t){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!da||r.length<Ne-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new rn(r)}return n.set(e,t),this.size=n.size,this}Ht.prototype.clear=$c,Ht.prototype.delete=Gc,Ht.prototype.get=zc,Ht.prototype.has=Kc,Ht.prototype.set=Yc;function Os(e,t){var n=me(e),r=!n&&Fn(e),i=!n&&!r&&Nn(e),l=!n&&!r&&!i&&aa(e),o=n||r||i||l,c=o?Fr(e.length,ic):[],f=c.length;for(var x in e)(t||Ue.call(e,x))&&!(o&&(x=="length"||i&&(x=="offset"||x=="parent")||l&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||on(x,f)))&&c.push(x);return c}function Fs(e){var t=e.length;return t?e[ei(0,t-1)]:u}function Vc(e,t){return lr(vt(e),En(t,0,e.length))}function Zc(e){return lr(vt(e))}function Jr(e,t,n){(n!==u&&!qt(e[t],n)||n===u&&!(t in e))&&sn(e,t,n)}function pa(e,t,n){var r=e[t];(!(Ue.call(e,t)&&qt(r,n))||n===u&&!(t in e))&&sn(e,t,n)}function Ka(e,t){for(var n=e.length;n--;)if(qt(e[n][0],t))return n;return-1}function Xc(e,t,n,r){return _n(e,function(i,l,o){t(r,i,n(i),o)}),r}function Ms(e,t){return e&&Vt(t,st(t),e)}function Qc(e,t){return e&&Vt(t,kt(t),e)}function sn(e,t,n){t=="__proto__"&&Ha?Ha(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function $r(e,t){for(var n=-1,r=t.length,i=p(r),l=e==null;++n<r;)i[n]=l?u:Di(e,t[n]);return i}function En(e,t,n){return e===e&&(n!==u&&(e=e<=n?e:n),t!==u&&(e=e>=t?e:t)),e}function Bt(e,t,n,r,i,l){var o,c=t&G,f=t&V,x=t&Ee;if(n&&(o=i?n(e,r,i,l):n(e)),o!==u)return o;if(!Ve(e))return e;var v=me(e);if(v){if(o=Wd(e),!c)return vt(e,o)}else{var b=mt(e),D=b==k||b==P;if(Nn(e))return ul(e,c);if(b==Le||b==Z||D&&!i){if(o=f||D?{}:wl(e),!c)return f?Pd(e,Qc(o,e)):Cd(e,Ms(o,e))}else{if(!Je[b])return i?e:{};o=Hd(e,b,c)}}l||(l=new Ht);var W=l.get(e);if(W)return W;l.set(e,o),nu(e)?e.forEach(function(te){o.add(Bt(te,t,n,te,e,l))}):eu(e)&&e.forEach(function(te,Ie){o.set(Ie,Bt(te,t,n,Ie,e,l))});var ee=x?f?di:ci:f?kt:st,ve=v?u:ee(e);return At(ve||e,function(te,Ie){ve&&(Ie=te,te=e[Ie]),pa(o,Ie,Bt(te,t,n,Ie,e,l))}),o}function ed(e){var t=st(e);return function(n){return Rs(n,e,t)}}function Rs(e,t,n){var r=n.length;if(e==null)return!r;for(e=He(e);r--;){var i=n[r],l=t[i],o=e[i];if(o===u&&!(i in e)||!l(o))return!1}return!0}function Us(e,t,n){if(typeof e!="function")throw new Tt(K);return _a(function(){e.apply(u,n)},t)}function ga(e,t,n,r){var i=-1,l=Aa,o=!0,c=e.length,f=[],x=t.length;if(!c)return f;n&&(t=ze(t,St(n))),r?(l=Ar,o=!1):t.length>=Ne&&(l=oa,o=!1,t=new Tn(t));e:for(;++i<c;){var v=e[i],b=n==null?v:n(v);if(v=r||v!==0?v:0,o&&b===b){for(var D=x;D--;)if(t[D]===b)continue e;f.push(v)}else l(t,b,r)||f.push(v)}return f}var _n=ml(Yt),Ws=ml(zr,!0);function td(e,t){var n=!0;return _n(e,function(r,i,l){return n=!!t(r,i,l),n}),n}function Ya(e,t,n){for(var r=-1,i=e.length;++r<i;){var l=e[r],o=t(l);if(o!=null&&(c===u?o===o&&!Nt(o):n(o,c)))var c=o,f=l}return f}function nd(e,t,n,r){var i=e.length;for(n=ge(n),n<0&&(n=-n>i?0:i+n),r=r===u||r>i?i:ge(r),r<0&&(r+=i),r=n>r?0:ru(r);n<r;)e[n++]=t;return e}function Hs(e,t){var n=[];return _n(e,function(r,i,l){t(r,i,l)&&n.push(r)}),n}function ot(e,t,n,r,i){var l=-1,o=e.length;for(n||(n=Jd),i||(i=[]);++l<o;){var c=e[l];t>0&&n(c)?t>1?ot(c,t-1,n,r,i):bn(i,c):r||(i[i.length]=c)}return i}var Gr=hl(),qs=hl(!0);function Yt(e,t){return e&&Gr(e,t,st)}function zr(e,t){return e&&qs(e,t,st)}function Va(e,t){return vn(t,function(n){return cn(e[n])})}function Bn(e,t){t=Sn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Zt(t[n++])];return n&&n==r?e:u}function Js(e,t,n){var r=t(e);return me(e)?r:bn(r,n(e))}function pt(e){return e==null?e===u?qn:I:Pn&&Pn in He(e)?Md(e):Zd(e)}function Kr(e,t){return e>t}function ad(e,t){return e!=null&&Ue.call(e,t)}function rd(e,t){return e!=null&&t in He(e)}function id(e,t,n){return e>=ft(t,n)&&e<it(t,n)}function Yr(e,t,n){for(var r=n?Ar:Aa,i=e[0].length,l=e.length,o=l,c=p(l),f=1/0,x=[];o--;){var v=e[o];o&&t&&(v=ze(v,St(t))),f=ft(v.length,f),c[o]=!n&&(t||i>=120&&v.length>=120)?new Tn(o&&v):u}v=e[0];var b=-1,D=c[0];e:for(;++b<i&&x.length<f;){var W=v[b],ee=t?t(W):W;if(W=n||W!==0?W:0,!(D?oa(D,ee):r(x,ee,n))){for(o=l;--o;){var ve=c[o];if(!(ve?oa(ve,ee):r(e[o],ee,n)))continue e}D&&D.push(ee),x.push(W)}}return x}function sd(e,t,n,r){return Yt(e,function(i,l,o){t(r,n(i),l,o)}),r}function xa(e,t,n){t=Sn(t,e),e=Al(e,t);var r=e==null?e:e[Zt(Ot(t))];return r==null?u:jt(r,e,n)}function $s(e){return et(e)&&pt(e)==Z}function ld(e){return et(e)&&pt(e)==L}function ud(e){return et(e)&&pt(e)==Xe}function va(e,t,n,r,i){return e===t?!0:e==null||t==null||!et(e)&&!et(t)?e!==e&&t!==t:od(e,t,n,r,va,i)}function od(e,t,n,r,i,l){var o=me(e),c=me(t),f=o?j:mt(e),x=c?j:mt(t);f=f==Z?Le:f,x=x==Z?Le:x;var v=f==Le,b=x==Le,D=f==x;if(D&&Nn(e)){if(!Nn(t))return!1;o=!0,v=!1}if(D&&!v)return l||(l=new Ht),o||aa(e)?Sl(e,t,n,r,i,l):Od(e,t,f,n,r,i,l);if(!(n&je)){var W=v&&Ue.call(e,"__wrapped__"),ee=b&&Ue.call(t,"__wrapped__");if(W||ee){var ve=W?e.value():e,te=ee?t.value():t;return l||(l=new Ht),i(ve,te,n,r,l)}}return D?(l||(l=new Ht),Fd(e,t,n,r,i,l)):!1}function cd(e){return et(e)&&mt(e)==C}function Vr(e,t,n,r){var i=n.length,l=i,o=!r;if(e==null)return!l;for(e=He(e);i--;){var c=n[i];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<l;){c=n[i];var f=c[0],x=e[f],v=c[1];if(o&&c[2]){if(x===u&&!(f in e))return!1}else{var b=new Ht;if(r)var D=r(x,v,f,e,t,b);if(!(D===u?va(v,x,je|pe,r,b):D))return!1}}return!0}function Gs(e){if(!Ve(e)||Gd(e))return!1;var t=cn(e)?cc:Qu;return t.test(On(e))}function dd(e){return et(e)&&pt(e)==lt}function fd(e){return et(e)&&mt(e)==Ye}function md(e){return et(e)&&mr(e.length)&&!!$e[pt(e)]}function zs(e){return typeof e=="function"?e:e==null?yt:typeof e=="object"?me(e)?Vs(e[0],e[1]):Ys(e):pu(e)}function Zr(e){if(!ya(e))return gc(e);var t=[];for(var n in He(e))Ue.call(e,n)&&n!="constructor"&&t.push(n);return t}function hd(e){if(!Ve(e))return Vd(e);var t=ya(e),n=[];for(var r in e)r=="constructor"&&(t||!Ue.call(e,r))||n.push(r);return n}function Xr(e,t){return e<t}function Ks(e,t){var n=-1,r=bt(e)?p(e.length):[];return _n(e,function(i,l,o){r[++n]=t(i,l,o)}),r}function Ys(e){var t=mi(e);return t.length==1&&t[0][2]?Cl(t[0][0],t[0][1]):function(n){return n===e||Vr(n,e,t)}}function Vs(e,t){return pi(e)&&Il(t)?Cl(Zt(e),t):function(n){var r=Di(n,e);return r===u&&r===t?Ni(n,e):va(t,r,je|pe)}}function Za(e,t,n,r,i){e!==t&&Gr(t,function(l,o){if(i||(i=new Ht),Ve(l))pd(e,t,o,n,Za,r,i);else{var c=r?r(xi(e,o),l,o+"",e,t,i):u;c===u&&(c=l),Jr(e,o,c)}},kt)}function pd(e,t,n,r,i,l,o){var c=xi(e,n),f=xi(t,n),x=o.get(f);if(x){Jr(e,n,x);return}var v=l?l(c,f,n+"",e,t,o):u,b=v===u;if(b){var D=me(f),W=!D&&Nn(f),ee=!D&&!W&&aa(f);v=f,D||W||ee?me(c)?v=c:tt(c)?v=vt(c):W?(b=!1,v=ul(f,!0)):ee?(b=!1,v=ol(f,!0)):v=[]:ja(f)||Fn(f)?(v=c,Fn(c)?v=iu(c):(!Ve(c)||cn(c))&&(v=wl(f))):b=!1}b&&(o.set(f,v),i(v,f,r,l,o),o.delete(f)),Jr(e,n,v)}function Zs(e,t){var n=e.length;if(n)return t+=t<0?n:0,on(t,n)?e[t]:u}function Xs(e,t,n){t.length?t=ze(t,function(l){return me(l)?function(o){return Bn(o,l.length===1?l[0]:l)}:l}):t=[yt];var r=-1;t=ze(t,St(X()));var i=Ks(e,function(l,o,c){var f=ze(t,function(x){return x(l)});return{criteria:f,index:++r,value:l}});return Ho(i,function(l,o){return Id(l,o,n)})}function gd(e,t){return Qs(e,t,function(n,r){return Ni(e,r)})}function Qs(e,t,n){for(var r=-1,i=t.length,l={};++r<i;){var o=t[r],c=Bn(e,o);n(c,o)&&ba(l,Sn(o,e),c)}return l}function xd(e){return function(t){return Bn(t,e)}}function Qr(e,t,n,r){var i=r?Wo:Gn,l=-1,o=t.length,c=e;for(e===t&&(t=vt(t)),n&&(c=ze(e,St(n)));++l<o;)for(var f=0,x=t[l],v=n?n(x):x;(f=i(c,v,f,r))>-1;)c!==e&&Wa.call(c,f,1),Wa.call(e,f,1);return e}function el(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==l){var l=i;on(i)?Wa.call(e,i,1):ai(e,i)}}return e}function ei(e,t){return e+Ja(Bs()*(t-e+1))}function vd(e,t,n,r){for(var i=-1,l=it(qa((t-e)/(n||1)),0),o=p(l);l--;)o[r?l:++i]=e,e+=n;return o}function ti(e,t){var n="";if(!e||t<1||t>Ge)return n;do t%2&&(n+=e),t=Ja(t/2),t&&(e+=e);while(t);return n}function be(e,t){return vi(Pl(e,t,yt),e+"")}function bd(e){return Fs(ra(e))}function kd(e,t){var n=ra(e);return lr(n,En(t,0,n.length))}function ba(e,t,n,r){if(!Ve(e))return e;t=Sn(t,e);for(var i=-1,l=t.length,o=l-1,c=e;c!=null&&++i<l;){var f=Zt(t[i]),x=n;if(f==="__proto__"||f==="constructor"||f==="prototype")return e;if(i!=o){var v=c[f];x=r?r(v,f,c):u,x===u&&(x=Ve(v)?v:on(t[i+1])?[]:{})}pa(c,f,x),c=c[f]}return e}var tl=$a?function(e,t){return $a.set(e,t),e}:yt,yd=Ha?function(e,t){return Ha(e,"toString",{configurable:!0,enumerable:!1,value:Ii(t),writable:!0})}:yt;function _d(e){return lr(ra(e))}function Lt(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var l=p(i);++r<i;)l[r]=e[r+t];return l}function jd(e,t){var n;return _n(e,function(r,i,l){return n=t(r,i,l),!n}),!!n}function Xa(e,t,n){var r=0,i=e==null?r:e.length;if(typeof t=="number"&&t===t&&i<=w){for(;r<i;){var l=r+i>>>1,o=e[l];o!==null&&!Nt(o)&&(n?o<=t:o<t)?r=l+1:i=l}return i}return ni(e,t,yt,n)}function ni(e,t,n,r){var i=0,l=e==null?0:e.length;if(l===0)return 0;t=n(t);for(var o=t!==t,c=t===null,f=Nt(t),x=t===u;i<l;){var v=Ja((i+l)/2),b=n(e[v]),D=b!==u,W=b===null,ee=b===b,ve=Nt(b);if(o)var te=r||ee;else x?te=ee&&(r||D):c?te=ee&&D&&(r||!W):f?te=ee&&D&&!W&&(r||!ve):W||ve?te=!1:te=r?b<=t:b<t;te?i=v+1:l=v}return ft(l,R)}function nl(e,t){for(var n=-1,r=e.length,i=0,l=[];++n<r;){var o=e[n],c=t?t(o):o;if(!n||!qt(c,f)){var f=c;l[i++]=o===0?0:o}}return l}function al(e){return typeof e=="number"?e:Nt(e)?q:+e}function Dt(e){if(typeof e=="string")return e;if(me(e))return ze(e,Dt)+"";if(Nt(e))return Ls?Ls.call(e):"";var t=e+"";return t=="0"&&1/e==-Pe?"-0":t}function jn(e,t,n){var r=-1,i=Aa,l=e.length,o=!0,c=[],f=c;if(n)o=!1,i=Ar;else if(l>=Ne){var x=t?null:Bd(e);if(x)return Ea(x);o=!1,i=oa,f=new Tn}else f=t?[]:c;e:for(;++r<l;){var v=e[r],b=t?t(v):v;if(v=n||v!==0?v:0,o&&b===b){for(var D=f.length;D--;)if(f[D]===b)continue e;t&&f.push(b),c.push(v)}else i(f,b,n)||(f!==c&&f.push(b),c.push(v))}return c}function ai(e,t){return t=Sn(t,e),e=Al(e,t),e==null||delete e[Zt(Ot(t))]}function rl(e,t,n,r){return ba(e,t,n(Bn(e,t)),r)}function Qa(e,t,n,r){for(var i=e.length,l=r?i:-1;(r?l--:++l<i)&&t(e[l],l,e););return n?Lt(e,r?0:l,r?l+1:i):Lt(e,r?l+1:0,r?i:l)}function il(e,t){var n=e;return n instanceof Ce&&(n=n.value()),Tr(t,function(r,i){return i.func.apply(i.thisArg,bn([r],i.args))},n)}function ri(e,t,n){var r=e.length;if(r<2)return r?jn(e[0]):[];for(var i=-1,l=p(r);++i<r;)for(var o=e[i],c=-1;++c<r;)c!=i&&(l[i]=ga(l[i]||o,e[c],t,n));return jn(ot(l,1),t,n)}function sl(e,t,n){for(var r=-1,i=e.length,l=t.length,o={};++r<i;){var c=r<l?t[r]:u;n(o,e[r],c)}return o}function ii(e){return tt(e)?e:[]}function si(e){return typeof e=="function"?e:yt}function Sn(e,t){return me(e)?e:pi(e,t)?[e]:Ll(Me(e))}var Sd=be;function Dn(e,t,n){var r=e.length;return n=n===u?r:n,!t&&n>=r?e:Lt(e,t,n)}var ll=dc||function(e){return ut.clearTimeout(e)};function ul(e,t){if(t)return e.slice();var n=e.length,r=Cs?Cs(n):new e.constructor(n);return e.copy(r),r}function li(e){var t=new e.constructor(e.byteLength);return new Ra(t).set(new Ra(e)),t}function Dd(e,t){var n=t?li(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Nd(e){var t=new e.constructor(e.source,$i.exec(e));return t.lastIndex=e.lastIndex,t}function wd(e){return ha?He(ha.call(e)):{}}function ol(e,t){var n=t?li(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function cl(e,t){if(e!==t){var n=e!==u,r=e===null,i=e===e,l=Nt(e),o=t!==u,c=t===null,f=t===t,x=Nt(t);if(!c&&!x&&!l&&e>t||l&&o&&f&&!c&&!x||r&&o&&f||!n&&f||!i)return 1;if(!r&&!l&&!x&&e<t||x&&n&&i&&!r&&!l||c&&n&&i||!o&&i||!f)return-1}return 0}function Id(e,t,n){for(var r=-1,i=e.criteria,l=t.criteria,o=i.length,c=n.length;++r<o;){var f=cl(i[r],l[r]);if(f){if(r>=c)return f;var x=n[r];return f*(x=="desc"?-1:1)}}return e.index-t.index}function dl(e,t,n,r){for(var i=-1,l=e.length,o=n.length,c=-1,f=t.length,x=it(l-o,0),v=p(f+x),b=!r;++c<f;)v[c]=t[c];for(;++i<o;)(b||i<l)&&(v[n[i]]=e[i]);for(;x--;)v[c++]=e[i++];return v}function fl(e,t,n,r){for(var i=-1,l=e.length,o=-1,c=n.length,f=-1,x=t.length,v=it(l-c,0),b=p(v+x),D=!r;++i<v;)b[i]=e[i];for(var W=i;++f<x;)b[W+f]=t[f];for(;++o<c;)(D||i<l)&&(b[W+n[o]]=e[i++]);return b}function vt(e,t){var n=-1,r=e.length;for(t||(t=p(r));++n<r;)t[n]=e[n];return t}function Vt(e,t,n,r){var i=!n;n||(n={});for(var l=-1,o=t.length;++l<o;){var c=t[l],f=r?r(n[c],e[c],c,n,e):u;f===u&&(f=e[c]),i?sn(n,c,f):pa(n,c,f)}return n}function Cd(e,t){return Vt(e,hi(e),t)}function Pd(e,t){return Vt(e,Dl(e),t)}function er(e,t){return function(n,r){var i=me(n)?Lo:Xc,l=t?t():{};return i(n,e,X(r,2),l)}}function ea(e){return be(function(t,n){var r=-1,i=n.length,l=i>1?n[i-1]:u,o=i>2?n[2]:u;for(l=e.length>3&&typeof l=="function"?(i--,l):u,o&&gt(n[0],n[1],o)&&(l=i<3?u:l,i=1),t=He(t);++r<i;){var c=n[r];c&&e(t,c,r,l)}return t})}function ml(e,t){return function(n,r){if(n==null)return n;if(!bt(n))return e(n,r);for(var i=n.length,l=t?i:-1,o=He(n);(t?l--:++l<i)&&r(o[l],l,o)!==!1;);return n}}function hl(e){return function(t,n,r){for(var i=-1,l=He(t),o=r(t),c=o.length;c--;){var f=o[e?c:++i];if(n(l[f],f,l)===!1)break}return t}}function Ad(e,t,n){var r=t&ne,i=ka(e);function l(){var o=this&&this!==ut&&this instanceof l?i:e;return o.apply(r?n:this,arguments)}return l}function pl(e){return function(t){t=Me(t);var n=zn(t)?Wt(t):u,r=n?n[0]:t.charAt(0),i=n?Dn(n,1).join(""):t.slice(1);return r[e]()+i}}function ta(e){return function(t){return Tr(mu(fu(t).replace(yo,"")),e,"")}}function ka(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Qn(e.prototype),r=e.apply(n,t);return Ve(r)?r:n}}function Td(e,t,n){var r=ka(e);function i(){for(var l=arguments.length,o=p(l),c=l,f=na(i);c--;)o[c]=arguments[c];var x=l<3&&o[0]!==f&&o[l-1]!==f?[]:kn(o,f);if(l-=x.length,l<n)return kl(e,t,tr,i.placeholder,u,o,x,u,u,n-l);var v=this&&this!==ut&&this instanceof i?r:e;return jt(v,this,o)}return i}function gl(e){return function(t,n,r){var i=He(t);if(!bt(t)){var l=X(n,3);t=st(t),n=function(c){return l(i[c],c,i)}}var o=e(t,n,r);return o>-1?i[l?t[o]:o]:u}}function xl(e){return un(function(t){var n=t.length,r=n,i=Et.prototype.thru;for(e&&t.reverse();r--;){var l=t[r];if(typeof l!="function")throw new Tt(K);if(i&&!o&&ir(l)=="wrapper")var o=new Et([],!0)}for(r=o?r:n;++r<n;){l=t[r];var c=ir(l),f=c=="wrapper"?fi(l):u;f&&gi(f[0])&&f[1]==(A|M|ae|T)&&!f[4].length&&f[9]==1?o=o[ir(f[0])].apply(o,f[3]):o=l.length==1&&gi(l)?o[c]():o.thru(l)}return function(){var x=arguments,v=x[0];if(o&&x.length==1&&me(v))return o.plant(v).value();for(var b=0,D=n?t[b].apply(this,x):v;++b<n;)D=t[b].call(this,D);return D}})}function tr(e,t,n,r,i,l,o,c,f,x){var v=t&A,b=t&ne,D=t&O,W=t&(M|H),ee=t&J,ve=D?u:ka(e);function te(){for(var Ie=arguments.length,Te=p(Ie),wt=Ie;wt--;)Te[wt]=arguments[wt];if(W)var xt=na(te),It=Jo(Te,xt);if(r&&(Te=dl(Te,r,i,W)),l&&(Te=fl(Te,l,o,W)),Ie-=It,W&&Ie<x){var nt=kn(Te,xt);return kl(e,t,tr,te.placeholder,n,Te,nt,c,f,x-Ie)}var Jt=b?n:this,fn=D?Jt[e]:e;return Ie=Te.length,c?Te=Xd(Te,c):ee&&Ie>1&&Te.reverse(),v&&f<Ie&&(Te.length=f),this&&this!==ut&&this instanceof te&&(fn=ve||ka(fn)),fn.apply(Jt,Te)}return te}function vl(e,t){return function(n,r){return sd(n,e,t(r),{})}}function nr(e,t){return function(n,r){var i;if(n===u&&r===u)return t;if(n!==u&&(i=n),r!==u){if(i===u)return r;typeof n=="string"||typeof r=="string"?(n=Dt(n),r=Dt(r)):(n=al(n),r=al(r)),i=e(n,r)}return i}}function ui(e){return un(function(t){return t=ze(t,St(X())),be(function(n){var r=this;return e(t,function(i){return jt(i,r,n)})})})}function ar(e,t){t=t===u?" ":Dt(t);var n=t.length;if(n<2)return n?ti(t,e):t;var r=ti(t,qa(e/Kn(t)));return zn(t)?Dn(Wt(r),0,e).join(""):r.slice(0,e)}function Ed(e,t,n,r){var i=t&ne,l=ka(e);function o(){for(var c=-1,f=arguments.length,x=-1,v=r.length,b=p(v+f),D=this&&this!==ut&&this instanceof o?l:e;++x<v;)b[x]=r[x];for(;f--;)b[x++]=arguments[++c];return jt(D,i?n:this,b)}return o}function bl(e){return function(t,n,r){return r&&typeof r!="number"&&gt(t,n,r)&&(n=r=u),t=dn(t),n===u?(n=t,t=0):n=dn(n),r=r===u?t<n?1:-1:dn(r),vd(t,n,r,e)}}function rr(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Ft(t),n=Ft(n)),e(t,n)}}function kl(e,t,n,r,i,l,o,c,f,x){var v=t&M,b=v?o:u,D=v?u:o,W=v?l:u,ee=v?u:l;t|=v?ae:_,t&=~(v?_:ae),t&re||(t&=~(ne|O));var ve=[e,t,i,W,b,ee,D,c,f,x],te=n.apply(u,ve);return gi(e)&&Tl(te,ve),te.placeholder=r,El(te,e,t)}function oi(e){var t=rt[e];return function(n,r){if(n=Ft(n),r=r==null?0:ft(ge(r),292),r&&Es(n)){var i=(Me(n)+"e").split("e"),l=t(i[0]+"e"+(+i[1]+r));return i=(Me(l)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var Bd=Zn&&1/Ea(new Zn([,-0]))[1]==Pe?function(e){return new Zn(e)}:Ai;function yl(e){return function(t){var n=mt(t);return n==C?Rr(t):n==Ye?Zo(t):qo(t,e(t))}}function ln(e,t,n,r,i,l,o,c){var f=t&O;if(!f&&typeof e!="function")throw new Tt(K);var x=r?r.length:0;if(x||(t&=~(ae|_),r=i=u),o=o===u?o:it(ge(o),0),c=c===u?c:ge(c),x-=i?i.length:0,t&_){var v=r,b=i;r=i=u}var D=f?u:fi(e),W=[e,t,n,r,i,v,b,l,o,c];if(D&&Yd(W,D),e=W[0],t=W[1],n=W[2],r=W[3],i=W[4],c=W[9]=W[9]===u?f?0:e.length:it(W[9]-x,0),!c&&t&(M|H)&&(t&=~(M|H)),!t||t==ne)var ee=Ad(e,t,n);else t==M||t==H?ee=Td(e,t,c):(t==ae||t==(ne|ae))&&!i.length?ee=Ed(e,t,n,r):ee=tr.apply(u,W);var ve=D?tl:Tl;return El(ve(ee,W),e,t)}function _l(e,t,n,r){return e===u||qt(e,Vn[n])&&!Ue.call(r,n)?t:e}function jl(e,t,n,r,i,l){return Ve(e)&&Ve(t)&&(l.set(t,e),Za(e,t,u,jl,l),l.delete(t)),e}function Ld(e){return ja(e)?u:e}function Sl(e,t,n,r,i,l){var o=n&je,c=e.length,f=t.length;if(c!=f&&!(o&&f>c))return!1;var x=l.get(e),v=l.get(t);if(x&&v)return x==t&&v==e;var b=-1,D=!0,W=n&pe?new Tn:u;for(l.set(e,t),l.set(t,e);++b<c;){var ee=e[b],ve=t[b];if(r)var te=o?r(ve,ee,b,t,e,l):r(ee,ve,b,e,t,l);if(te!==u){if(te)continue;D=!1;break}if(W){if(!Er(t,function(Ie,Te){if(!oa(W,Te)&&(ee===Ie||i(ee,Ie,n,r,l)))return W.push(Te)})){D=!1;break}}else if(!(ee===ve||i(ee,ve,n,r,l))){D=!1;break}}return l.delete(e),l.delete(t),D}function Od(e,t,n,r,i,l,o){switch(n){case ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!l(new Ra(e),new Ra(t)));case xe:case Xe:case le:return qt(+e,+t);case Ae:return e.name==t.name&&e.message==t.message;case lt:case zt:return e==t+"";case C:var c=Rr;case Ye:var f=r&je;if(c||(c=Ea),e.size!=t.size&&!f)return!1;var x=o.get(e);if(x)return x==t;r|=pe,o.set(e,t);var v=Sl(c(e),c(t),r,i,l,o);return o.delete(e),v;case nn:if(ha)return ha.call(e)==ha.call(t)}return!1}function Fd(e,t,n,r,i,l){var o=n&je,c=ci(e),f=c.length,x=ci(t),v=x.length;if(f!=v&&!o)return!1;for(var b=f;b--;){var D=c[b];if(!(o?D in t:Ue.call(t,D)))return!1}var W=l.get(e),ee=l.get(t);if(W&&ee)return W==t&&ee==e;var ve=!0;l.set(e,t),l.set(t,e);for(var te=o;++b<f;){D=c[b];var Ie=e[D],Te=t[D];if(r)var wt=o?r(Te,Ie,D,t,e,l):r(Ie,Te,D,e,t,l);if(!(wt===u?Ie===Te||i(Ie,Te,n,r,l):wt)){ve=!1;break}te||(te=D=="constructor")}if(ve&&!te){var xt=e.constructor,It=t.constructor;xt!=It&&"constructor"in e&&"constructor"in t&&!(typeof xt=="function"&&xt instanceof xt&&typeof It=="function"&&It instanceof It)&&(ve=!1)}return l.delete(e),l.delete(t),ve}function un(e){return vi(Pl(e,u,Rl),e+"")}function ci(e){return Js(e,st,hi)}function di(e){return Js(e,kt,Dl)}var fi=$a?function(e){return $a.get(e)}:Ai;function ir(e){for(var t=e.name+"",n=Xn[t],r=Ue.call(Xn,t)?n.length:0;r--;){var i=n[r],l=i.func;if(l==null||l==e)return i.name}return t}function na(e){var t=Ue.call(s,"placeholder")?s:e;return t.placeholder}function X(){var e=s.iteratee||Ci;return e=e===Ci?zs:e,arguments.length?e(arguments[0],arguments[1]):e}function sr(e,t){var n=e.__data__;return $d(t)?n[typeof t=="string"?"string":"hash"]:n.map}function mi(e){for(var t=st(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Il(i)]}return t}function Ln(e,t){var n=Ko(e,t);return Gs(n)?n:u}function Md(e){var t=Ue.call(e,Pn),n=e[Pn];try{e[Pn]=u;var r=!0}catch{}var i=Fa.call(e);return r&&(t?e[Pn]=n:delete e[Pn]),i}var hi=Wr?function(e){return e==null?[]:(e=He(e),vn(Wr(e),function(t){return As.call(e,t)}))}:Ti,Dl=Wr?function(e){for(var t=[];e;)bn(t,hi(e)),e=Ua(e);return t}:Ti,mt=pt;(Hr&&mt(new Hr(new ArrayBuffer(1)))!=ue||da&&mt(new da)!=C||qr&&mt(qr.resolve())!=dt||Zn&&mt(new Zn)!=Ye||fa&&mt(new fa)!=Kt)&&(mt=function(e){var t=pt(e),n=t==Le?e.constructor:u,r=n?On(n):"";if(r)switch(r){case kc:return ue;case yc:return C;case _c:return dt;case jc:return Ye;case Sc:return Kt}return t});function Rd(e,t,n){for(var r=-1,i=n.length;++r<i;){var l=n[r],o=l.size;switch(l.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=ft(t,e+o);break;case"takeRight":e=it(e,t-o);break}}return{start:e,end:t}}function Ud(e){var t=e.match($u);return t?t[1].split(Gu):[]}function Nl(e,t,n){t=Sn(t,e);for(var r=-1,i=t.length,l=!1;++r<i;){var o=Zt(t[r]);if(!(l=e!=null&&n(e,o)))break;e=e[o]}return l||++r!=i?l:(i=e==null?0:e.length,!!i&&mr(i)&&on(o,i)&&(me(e)||Fn(e)))}function Wd(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Ue.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function wl(e){return typeof e.constructor=="function"&&!ya(e)?Qn(Ua(e)):{}}function Hd(e,t,n){var r=e.constructor;switch(t){case L:return li(e);case xe:case Xe:return new r(+e);case ue:return Dd(e,n);case Oe:case De:case Qe:case xn:case Ct:case vr:case br:case kr:case yr:return ol(e,n);case C:return new r;case le:case zt:return new r(e);case lt:return Nd(e);case Ye:return new r;case nn:return wd(e)}}function qd(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ju,`{
/* [wrapped with `+t+`] */
`)}function Jd(e){return me(e)||Fn(e)||!!(Ts&&e&&e[Ts])}function on(e,t){var n=typeof e;return t=t??Ge,!!t&&(n=="number"||n!="symbol"&&to.test(e))&&e>-1&&e%1==0&&e<t}function gt(e,t,n){if(!Ve(n))return!1;var r=typeof t;return(r=="number"?bt(n)&&on(t,n.length):r=="string"&&t in n)?qt(n[t],e):!1}function pi(e,t){if(me(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Nt(e)?!0:Uu.test(e)||!Ru.test(e)||t!=null&&e in He(t)}function $d(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function gi(e){var t=ir(e),n=s[t];if(typeof n!="function"||!(t in Ce.prototype))return!1;if(e===n)return!0;var r=fi(n);return!!r&&e===r[0]}function Gd(e){return!!Is&&Is in e}var zd=La?cn:Ei;function ya(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Vn;return e===n}function Il(e){return e===e&&!Ve(e)}function Cl(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==u||e in He(n))}}function Kd(e){var t=dr(e,function(r){return n.size===ye&&n.clear(),r}),n=t.cache;return t}function Yd(e,t){var n=e[1],r=t[1],i=n|r,l=i<(ne|O|A),o=r==A&&n==M||r==A&&n==T&&e[7].length<=t[8]||r==(A|T)&&t[7].length<=t[8]&&n==M;if(!(l||o))return e;r&ne&&(e[2]=t[2],i|=n&ne?0:re);var c=t[3];if(c){var f=e[3];e[3]=f?dl(f,c,t[4]):c,e[4]=f?kn(e[3],_e):t[4]}return c=t[5],c&&(f=e[5],e[5]=f?fl(f,c,t[6]):c,e[6]=f?kn(e[5],_e):t[6]),c=t[7],c&&(e[7]=c),r&A&&(e[8]=e[8]==null?t[8]:ft(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Vd(e){var t=[];if(e!=null)for(var n in He(e))t.push(n);return t}function Zd(e){return Fa.call(e)}function Pl(e,t,n){return t=it(t===u?e.length-1:t,0),function(){for(var r=arguments,i=-1,l=it(r.length-t,0),o=p(l);++i<l;)o[i]=r[t+i];i=-1;for(var c=p(t+1);++i<t;)c[i]=r[i];return c[t]=n(o),jt(e,this,c)}}function Al(e,t){return t.length<2?e:Bn(e,Lt(t,0,-1))}function Xd(e,t){for(var n=e.length,r=ft(t.length,n),i=vt(e);r--;){var l=t[r];e[r]=on(l,n)?i[l]:u}return e}function xi(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Tl=Bl(tl),_a=mc||function(e,t){return ut.setTimeout(e,t)},vi=Bl(yd);function El(e,t,n){var r=t+"";return vi(e,qd(r,Qd(Ud(r),n)))}function Bl(e){var t=0,n=0;return function(){var r=xc(),i=F-(r-n);if(n=r,i>0){if(++t>=y)return arguments[0]}else t=0;return e.apply(u,arguments)}}function lr(e,t){var n=-1,r=e.length,i=r-1;for(t=t===u?r:t;++n<t;){var l=ei(n,i),o=e[l];e[l]=e[n],e[n]=o}return e.length=t,e}var Ll=Kd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Wu,function(n,r,i,l){t.push(i?l.replace(Yu,"$1"):r||n)}),t});function Zt(e){if(typeof e=="string"||Nt(e))return e;var t=e+"";return t=="0"&&1/e==-Pe?"-0":t}function On(e){if(e!=null){try{return Oa.call(e)}catch{}try{return e+""}catch{}}return""}function Qd(e,t){return At(Se,function(n){var r="_."+n[0];t&n[1]&&!Aa(e,r)&&e.push(r)}),e.sort()}function Ol(e){if(e instanceof Ce)return e.clone();var t=new Et(e.__wrapped__,e.__chain__);return t.__actions__=vt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function ef(e,t,n){(n?gt(e,t,n):t===u)?t=1:t=it(ge(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,l=0,o=p(qa(r/t));i<r;)o[l++]=Lt(e,i,i+=t);return o}function tf(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var l=e[t];l&&(i[r++]=l)}return i}function nf(){var e=arguments.length;if(!e)return[];for(var t=p(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return bn(me(n)?vt(n):[n],ot(t,1))}var af=be(function(e,t){return tt(e)?ga(e,ot(t,1,tt,!0)):[]}),rf=be(function(e,t){var n=Ot(t);return tt(n)&&(n=u),tt(e)?ga(e,ot(t,1,tt,!0),X(n,2)):[]}),sf=be(function(e,t){var n=Ot(t);return tt(n)&&(n=u),tt(e)?ga(e,ot(t,1,tt,!0),u,n):[]});function lf(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:ge(t),Lt(e,t<0?0:t,r)):[]}function uf(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:ge(t),t=r-t,Lt(e,0,t<0?0:t)):[]}function of(e,t){return e&&e.length?Qa(e,X(t,3),!0,!0):[]}function cf(e,t){return e&&e.length?Qa(e,X(t,3),!0):[]}function df(e,t,n,r){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&gt(e,t,n)&&(n=0,r=i),nd(e,t,n,r)):[]}function Fl(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:ge(n);return i<0&&(i=it(r+i,0)),Ta(e,X(t,3),i)}function Ml(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return n!==u&&(i=ge(n),i=n<0?it(r+i,0):ft(i,r-1)),Ta(e,X(t,3),i,!0)}function Rl(e){var t=e==null?0:e.length;return t?ot(e,1):[]}function ff(e){var t=e==null?0:e.length;return t?ot(e,Pe):[]}function mf(e,t){var n=e==null?0:e.length;return n?(t=t===u?1:ge(t),ot(e,t)):[]}function hf(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function Ul(e){return e&&e.length?e[0]:u}function pf(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:ge(n);return i<0&&(i=it(r+i,0)),Gn(e,t,i)}function gf(e){var t=e==null?0:e.length;return t?Lt(e,0,-1):[]}var xf=be(function(e){var t=ze(e,ii);return t.length&&t[0]===e[0]?Yr(t):[]}),vf=be(function(e){var t=Ot(e),n=ze(e,ii);return t===Ot(n)?t=u:n.pop(),n.length&&n[0]===e[0]?Yr(n,X(t,2)):[]}),bf=be(function(e){var t=Ot(e),n=ze(e,ii);return t=typeof t=="function"?t:u,t&&n.pop(),n.length&&n[0]===e[0]?Yr(n,u,t):[]});function kf(e,t){return e==null?"":pc.call(e,t)}function Ot(e){var t=e==null?0:e.length;return t?e[t-1]:u}function yf(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=r;return n!==u&&(i=ge(n),i=i<0?it(r+i,0):ft(i,r-1)),t===t?Qo(e,t,i):Ta(e,ks,i,!0)}function _f(e,t){return e&&e.length?Zs(e,ge(t)):u}var jf=be(Wl);function Wl(e,t){return e&&e.length&&t&&t.length?Qr(e,t):e}function Sf(e,t,n){return e&&e.length&&t&&t.length?Qr(e,t,X(n,2)):e}function Df(e,t,n){return e&&e.length&&t&&t.length?Qr(e,t,u,n):e}var Nf=un(function(e,t){var n=e==null?0:e.length,r=$r(e,t);return el(e,ze(t,function(i){return on(i,n)?+i:i}).sort(cl)),r});function wf(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],l=e.length;for(t=X(t,3);++r<l;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return el(e,i),n}function bi(e){return e==null?e:bc.call(e)}function If(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&gt(e,t,n)?(t=0,n=r):(t=t==null?0:ge(t),n=n===u?r:ge(n)),Lt(e,t,n)):[]}function Cf(e,t){return Xa(e,t)}function Pf(e,t,n){return ni(e,t,X(n,2))}function Af(e,t){var n=e==null?0:e.length;if(n){var r=Xa(e,t);if(r<n&&qt(e[r],t))return r}return-1}function Tf(e,t){return Xa(e,t,!0)}function Ef(e,t,n){return ni(e,t,X(n,2),!0)}function Bf(e,t){var n=e==null?0:e.length;if(n){var r=Xa(e,t,!0)-1;if(qt(e[r],t))return r}return-1}function Lf(e){return e&&e.length?nl(e):[]}function Of(e,t){return e&&e.length?nl(e,X(t,2)):[]}function Ff(e){var t=e==null?0:e.length;return t?Lt(e,1,t):[]}function Mf(e,t,n){return e&&e.length?(t=n||t===u?1:ge(t),Lt(e,0,t<0?0:t)):[]}function Rf(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:ge(t),t=r-t,Lt(e,t<0?0:t,r)):[]}function Uf(e,t){return e&&e.length?Qa(e,X(t,3),!1,!0):[]}function Wf(e,t){return e&&e.length?Qa(e,X(t,3)):[]}var Hf=be(function(e){return jn(ot(e,1,tt,!0))}),qf=be(function(e){var t=Ot(e);return tt(t)&&(t=u),jn(ot(e,1,tt,!0),X(t,2))}),Jf=be(function(e){var t=Ot(e);return t=typeof t=="function"?t:u,jn(ot(e,1,tt,!0),u,t)});function $f(e){return e&&e.length?jn(e):[]}function Gf(e,t){return e&&e.length?jn(e,X(t,2)):[]}function zf(e,t){return t=typeof t=="function"?t:u,e&&e.length?jn(e,u,t):[]}function ki(e){if(!(e&&e.length))return[];var t=0;return e=vn(e,function(n){if(tt(n))return t=it(n.length,t),!0}),Fr(t,function(n){return ze(e,Br(n))})}function Hl(e,t){if(!(e&&e.length))return[];var n=ki(e);return t==null?n:ze(n,function(r){return jt(t,u,r)})}var Kf=be(function(e,t){return tt(e)?ga(e,t):[]}),Yf=be(function(e){return ri(vn(e,tt))}),Vf=be(function(e){var t=Ot(e);return tt(t)&&(t=u),ri(vn(e,tt),X(t,2))}),Zf=be(function(e){var t=Ot(e);return t=typeof t=="function"?t:u,ri(vn(e,tt),u,t)}),Xf=be(ki);function Qf(e,t){return sl(e||[],t||[],pa)}function em(e,t){return sl(e||[],t||[],ba)}var tm=be(function(e){var t=e.length,n=t>1?e[t-1]:u;return n=typeof n=="function"?(e.pop(),n):u,Hl(e,n)});function ql(e){var t=s(e);return t.__chain__=!0,t}function nm(e,t){return t(e),e}function ur(e,t){return t(e)}var am=un(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(l){return $r(l,e)};return t>1||this.__actions__.length||!(r instanceof Ce)||!on(n)?this.thru(i):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:ur,args:[i],thisArg:u}),new Et(r,this.__chain__).thru(function(l){return t&&!l.length&&l.push(u),l}))});function rm(){return ql(this)}function im(){return new Et(this.value(),this.__chain__)}function sm(){this.__values__===u&&(this.__values__=au(this.value()));var e=this.__index__>=this.__values__.length,t=e?u:this.__values__[this.__index__++];return{done:e,value:t}}function lm(){return this}function um(e){for(var t,n=this;n instanceof za;){var r=Ol(n);r.__index__=0,r.__values__=u,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function om(){var e=this.__wrapped__;if(e instanceof Ce){var t=e;return this.__actions__.length&&(t=new Ce(this)),t=t.reverse(),t.__actions__.push({func:ur,args:[bi],thisArg:u}),new Et(t,this.__chain__)}return this.thru(bi)}function cm(){return il(this.__wrapped__,this.__actions__)}var dm=er(function(e,t,n){Ue.call(e,n)?++e[n]:sn(e,n,1)});function fm(e,t,n){var r=me(e)?vs:td;return n&&gt(e,t,n)&&(t=u),r(e,X(t,3))}function mm(e,t){var n=me(e)?vn:Hs;return n(e,X(t,3))}var hm=gl(Fl),pm=gl(Ml);function gm(e,t){return ot(or(e,t),1)}function xm(e,t){return ot(or(e,t),Pe)}function vm(e,t,n){return n=n===u?1:ge(n),ot(or(e,t),n)}function Jl(e,t){var n=me(e)?At:_n;return n(e,X(t,3))}function $l(e,t){var n=me(e)?Oo:Ws;return n(e,X(t,3))}var bm=er(function(e,t,n){Ue.call(e,n)?e[n].push(t):sn(e,n,[t])});function km(e,t,n,r){e=bt(e)?e:ra(e),n=n&&!r?ge(n):0;var i=e.length;return n<0&&(n=it(i+n,0)),hr(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Gn(e,t,n)>-1}var ym=be(function(e,t,n){var r=-1,i=typeof t=="function",l=bt(e)?p(e.length):[];return _n(e,function(o){l[++r]=i?jt(t,o,n):xa(o,t,n)}),l}),_m=er(function(e,t,n){sn(e,n,t)});function or(e,t){var n=me(e)?ze:Ks;return n(e,X(t,3))}function jm(e,t,n,r){return e==null?[]:(me(t)||(t=t==null?[]:[t]),n=r?u:n,me(n)||(n=n==null?[]:[n]),Xs(e,t,n))}var Sm=er(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Dm(e,t,n){var r=me(e)?Tr:_s,i=arguments.length<3;return r(e,X(t,4),n,i,_n)}function Nm(e,t,n){var r=me(e)?Fo:_s,i=arguments.length<3;return r(e,X(t,4),n,i,Ws)}function wm(e,t){var n=me(e)?vn:Hs;return n(e,fr(X(t,3)))}function Im(e){var t=me(e)?Fs:bd;return t(e)}function Cm(e,t,n){(n?gt(e,t,n):t===u)?t=1:t=ge(t);var r=me(e)?Vc:kd;return r(e,t)}function Pm(e){var t=me(e)?Zc:_d;return t(e)}function Am(e){if(e==null)return 0;if(bt(e))return hr(e)?Kn(e):e.length;var t=mt(e);return t==C||t==Ye?e.size:Zr(e).length}function Tm(e,t,n){var r=me(e)?Er:jd;return n&&gt(e,t,n)&&(t=u),r(e,X(t,3))}var Em=be(function(e,t){if(e==null)return[];var n=t.length;return n>1&&gt(e,t[0],t[1])?t=[]:n>2&&gt(t[0],t[1],t[2])&&(t=[t[0]]),Xs(e,ot(t,1),[])}),cr=fc||function(){return ut.Date.now()};function Bm(e,t){if(typeof t!="function")throw new Tt(K);return e=ge(e),function(){if(--e<1)return t.apply(this,arguments)}}function Gl(e,t,n){return t=n?u:t,t=e&&t==null?e.length:t,ln(e,A,u,u,u,u,t)}function zl(e,t){var n;if(typeof t!="function")throw new Tt(K);return e=ge(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=u),n}}var yi=be(function(e,t,n){var r=ne;if(n.length){var i=kn(n,na(yi));r|=ae}return ln(e,r,t,n,i)}),Kl=be(function(e,t,n){var r=ne|O;if(n.length){var i=kn(n,na(Kl));r|=ae}return ln(t,r,e,n,i)});function Yl(e,t,n){t=n?u:t;var r=ln(e,M,u,u,u,u,u,t);return r.placeholder=Yl.placeholder,r}function Vl(e,t,n){t=n?u:t;var r=ln(e,H,u,u,u,u,u,t);return r.placeholder=Vl.placeholder,r}function Zl(e,t,n){var r,i,l,o,c,f,x=0,v=!1,b=!1,D=!0;if(typeof e!="function")throw new Tt(K);t=Ft(t)||0,Ve(n)&&(v=!!n.leading,b="maxWait"in n,l=b?it(Ft(n.maxWait)||0,t):l,D="trailing"in n?!!n.trailing:D);function W(nt){var Jt=r,fn=i;return r=i=u,x=nt,o=e.apply(fn,Jt),o}function ee(nt){return x=nt,c=_a(Ie,t),v?W(nt):o}function ve(nt){var Jt=nt-f,fn=nt-x,gu=t-Jt;return b?ft(gu,l-fn):gu}function te(nt){var Jt=nt-f,fn=nt-x;return f===u||Jt>=t||Jt<0||b&&fn>=l}function Ie(){var nt=cr();if(te(nt))return Te(nt);c=_a(Ie,ve(nt))}function Te(nt){return c=u,D&&r?W(nt):(r=i=u,o)}function wt(){c!==u&&ll(c),x=0,r=f=i=c=u}function xt(){return c===u?o:Te(cr())}function It(){var nt=cr(),Jt=te(nt);if(r=arguments,i=this,f=nt,Jt){if(c===u)return ee(f);if(b)return ll(c),c=_a(Ie,t),W(f)}return c===u&&(c=_a(Ie,t)),o}return It.cancel=wt,It.flush=xt,It}var Lm=be(function(e,t){return Us(e,1,t)}),Om=be(function(e,t,n){return Us(e,Ft(t)||0,n)});function Fm(e){return ln(e,J)}function dr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Tt(K);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],l=n.cache;if(l.has(i))return l.get(i);var o=e.apply(this,r);return n.cache=l.set(i,o)||l,o};return n.cache=new(dr.Cache||rn),n}dr.Cache=rn;function fr(e){if(typeof e!="function")throw new Tt(K);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Mm(e){return zl(2,e)}var Rm=Sd(function(e,t){t=t.length==1&&me(t[0])?ze(t[0],St(X())):ze(ot(t,1),St(X()));var n=t.length;return be(function(r){for(var i=-1,l=ft(r.length,n);++i<l;)r[i]=t[i].call(this,r[i]);return jt(e,this,r)})}),_i=be(function(e,t){var n=kn(t,na(_i));return ln(e,ae,u,t,n)}),Xl=be(function(e,t){var n=kn(t,na(Xl));return ln(e,_,u,t,n)}),Um=un(function(e,t){return ln(e,T,u,u,u,t)});function Wm(e,t){if(typeof e!="function")throw new Tt(K);return t=t===u?t:ge(t),be(e,t)}function Hm(e,t){if(typeof e!="function")throw new Tt(K);return t=t==null?0:it(ge(t),0),be(function(n){var r=n[t],i=Dn(n,0,t);return r&&bn(i,r),jt(e,this,i)})}function qm(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new Tt(K);return Ve(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Zl(e,t,{leading:r,maxWait:t,trailing:i})}function Jm(e){return Gl(e,1)}function $m(e,t){return _i(si(t),e)}function Gm(){if(!arguments.length)return[];var e=arguments[0];return me(e)?e:[e]}function zm(e){return Bt(e,Ee)}function Km(e,t){return t=typeof t=="function"?t:u,Bt(e,Ee,t)}function Ym(e){return Bt(e,G|Ee)}function Vm(e,t){return t=typeof t=="function"?t:u,Bt(e,G|Ee,t)}function Zm(e,t){return t==null||Rs(e,t,st(t))}function qt(e,t){return e===t||e!==e&&t!==t}var Xm=rr(Kr),Qm=rr(function(e,t){return e>=t}),Fn=$s(function(){return arguments}())?$s:function(e){return et(e)&&Ue.call(e,"callee")&&!As.call(e,"callee")},me=p.isArray,eh=fs?St(fs):ld;function bt(e){return e!=null&&mr(e.length)&&!cn(e)}function tt(e){return et(e)&&bt(e)}function th(e){return e===!0||e===!1||et(e)&&pt(e)==xe}var Nn=hc||Ei,nh=ms?St(ms):ud;function ah(e){return et(e)&&e.nodeType===1&&!ja(e)}function rh(e){if(e==null)return!0;if(bt(e)&&(me(e)||typeof e=="string"||typeof e.splice=="function"||Nn(e)||aa(e)||Fn(e)))return!e.length;var t=mt(e);if(t==C||t==Ye)return!e.size;if(ya(e))return!Zr(e).length;for(var n in e)if(Ue.call(e,n))return!1;return!0}function ih(e,t){return va(e,t)}function sh(e,t,n){n=typeof n=="function"?n:u;var r=n?n(e,t):u;return r===u?va(e,t,u,n):!!r}function ji(e){if(!et(e))return!1;var t=pt(e);return t==Ae||t==Ke||typeof e.message=="string"&&typeof e.name=="string"&&!ja(e)}function lh(e){return typeof e=="number"&&Es(e)}function cn(e){if(!Ve(e))return!1;var t=pt(e);return t==k||t==P||t==fe||t==Ut}function Ql(e){return typeof e=="number"&&e==ge(e)}function mr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ge}function Ve(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function et(e){return e!=null&&typeof e=="object"}var eu=hs?St(hs):cd;function uh(e,t){return e===t||Vr(e,t,mi(t))}function oh(e,t,n){return n=typeof n=="function"?n:u,Vr(e,t,mi(t),n)}function ch(e){return tu(e)&&e!=+e}function dh(e){if(zd(e))throw new de(z);return Gs(e)}function fh(e){return e===null}function mh(e){return e==null}function tu(e){return typeof e=="number"||et(e)&&pt(e)==le}function ja(e){if(!et(e)||pt(e)!=Le)return!1;var t=Ua(e);if(t===null)return!0;var n=Ue.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Oa.call(n)==uc}var Si=ps?St(ps):dd;function hh(e){return Ql(e)&&e>=-Ge&&e<=Ge}var nu=gs?St(gs):fd;function hr(e){return typeof e=="string"||!me(e)&&et(e)&&pt(e)==zt}function Nt(e){return typeof e=="symbol"||et(e)&&pt(e)==nn}var aa=xs?St(xs):md;function ph(e){return e===u}function gh(e){return et(e)&&mt(e)==Kt}function xh(e){return et(e)&&pt(e)==Jn}var vh=rr(Xr),bh=rr(function(e,t){return e<=t});function au(e){if(!e)return[];if(bt(e))return hr(e)?Wt(e):vt(e);if(ca&&e[ca])return Vo(e[ca]());var t=mt(e),n=t==C?Rr:t==Ye?Ea:ra;return n(e)}function dn(e){if(!e)return e===0?e:0;if(e=Ft(e),e===Pe||e===-Pe){var t=e<0?-1:1;return t*B}return e===e?e:0}function ge(e){var t=dn(e),n=t%1;return t===t?n?t-n:t:0}function ru(e){return e?En(ge(e),0,ce):0}function Ft(e){if(typeof e=="number")return e;if(Nt(e))return q;if(Ve(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ve(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=js(e);var n=Xu.test(e);return n||eo.test(e)?Eo(e.slice(2),n?2:8):Zu.test(e)?q:+e}function iu(e){return Vt(e,kt(e))}function kh(e){return e?En(ge(e),-Ge,Ge):e===0?e:0}function Me(e){return e==null?"":Dt(e)}var yh=ea(function(e,t){if(ya(t)||bt(t)){Vt(t,st(t),e);return}for(var n in t)Ue.call(t,n)&&pa(e,n,t[n])}),su=ea(function(e,t){Vt(t,kt(t),e)}),pr=ea(function(e,t,n,r){Vt(t,kt(t),e,r)}),_h=ea(function(e,t,n,r){Vt(t,st(t),e,r)}),jh=un($r);function Sh(e,t){var n=Qn(e);return t==null?n:Ms(n,t)}var Dh=be(function(e,t){e=He(e);var n=-1,r=t.length,i=r>2?t[2]:u;for(i&&gt(t[0],t[1],i)&&(r=1);++n<r;)for(var l=t[n],o=kt(l),c=-1,f=o.length;++c<f;){var x=o[c],v=e[x];(v===u||qt(v,Vn[x])&&!Ue.call(e,x))&&(e[x]=l[x])}return e}),Nh=be(function(e){return e.push(u,jl),jt(lu,u,e)});function wh(e,t){return bs(e,X(t,3),Yt)}function Ih(e,t){return bs(e,X(t,3),zr)}function Ch(e,t){return e==null?e:Gr(e,X(t,3),kt)}function Ph(e,t){return e==null?e:qs(e,X(t,3),kt)}function Ah(e,t){return e&&Yt(e,X(t,3))}function Th(e,t){return e&&zr(e,X(t,3))}function Eh(e){return e==null?[]:Va(e,st(e))}function Bh(e){return e==null?[]:Va(e,kt(e))}function Di(e,t,n){var r=e==null?u:Bn(e,t);return r===u?n:r}function Lh(e,t){return e!=null&&Nl(e,t,ad)}function Ni(e,t){return e!=null&&Nl(e,t,rd)}var Oh=vl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Fa.call(t)),e[t]=n},Ii(yt)),Fh=vl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Fa.call(t)),Ue.call(e,t)?e[t].push(n):e[t]=[n]},X),Mh=be(xa);function st(e){return bt(e)?Os(e):Zr(e)}function kt(e){return bt(e)?Os(e,!0):hd(e)}function Rh(e,t){var n={};return t=X(t,3),Yt(e,function(r,i,l){sn(n,t(r,i,l),r)}),n}function Uh(e,t){var n={};return t=X(t,3),Yt(e,function(r,i,l){sn(n,i,t(r,i,l))}),n}var Wh=ea(function(e,t,n){Za(e,t,n)}),lu=ea(function(e,t,n,r){Za(e,t,n,r)}),Hh=un(function(e,t){var n={};if(e==null)return n;var r=!1;t=ze(t,function(l){return l=Sn(l,e),r||(r=l.length>1),l}),Vt(e,di(e),n),r&&(n=Bt(n,G|V|Ee,Ld));for(var i=t.length;i--;)ai(n,t[i]);return n});function qh(e,t){return uu(e,fr(X(t)))}var Jh=un(function(e,t){return e==null?{}:gd(e,t)});function uu(e,t){if(e==null)return{};var n=ze(di(e),function(r){return[r]});return t=X(t),Qs(e,n,function(r,i){return t(r,i[0])})}function $h(e,t,n){t=Sn(t,e);var r=-1,i=t.length;for(i||(i=1,e=u);++r<i;){var l=e==null?u:e[Zt(t[r])];l===u&&(r=i,l=n),e=cn(l)?l.call(e):l}return e}function Gh(e,t,n){return e==null?e:ba(e,t,n)}function zh(e,t,n,r){return r=typeof r=="function"?r:u,e==null?e:ba(e,t,n,r)}var ou=yl(st),cu=yl(kt);function Kh(e,t,n){var r=me(e),i=r||Nn(e)||aa(e);if(t=X(t,4),n==null){var l=e&&e.constructor;i?n=r?new l:[]:Ve(e)?n=cn(l)?Qn(Ua(e)):{}:n={}}return(i?At:Yt)(e,function(o,c,f){return t(n,o,c,f)}),n}function Yh(e,t){return e==null?!0:ai(e,t)}function Vh(e,t,n){return e==null?e:rl(e,t,si(n))}function Zh(e,t,n,r){return r=typeof r=="function"?r:u,e==null?e:rl(e,t,si(n),r)}function ra(e){return e==null?[]:Mr(e,st(e))}function Xh(e){return e==null?[]:Mr(e,kt(e))}function Qh(e,t,n){return n===u&&(n=t,t=u),n!==u&&(n=Ft(n),n=n===n?n:0),t!==u&&(t=Ft(t),t=t===t?t:0),En(Ft(e),t,n)}function ep(e,t,n){return t=dn(t),n===u?(n=t,t=0):n=dn(n),e=Ft(e),id(e,t,n)}function tp(e,t,n){if(n&&typeof n!="boolean"&&gt(e,t,n)&&(t=n=u),n===u&&(typeof t=="boolean"?(n=t,t=u):typeof e=="boolean"&&(n=e,e=u)),e===u&&t===u?(e=0,t=1):(e=dn(e),t===u?(t=e,e=0):t=dn(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Bs();return ft(e+i*(t-e+To("1e-"+((i+"").length-1))),t)}return ei(e,t)}var np=ta(function(e,t,n){return t=t.toLowerCase(),e+(n?du(t):t)});function du(e){return wi(Me(e).toLowerCase())}function fu(e){return e=Me(e),e&&e.replace(no,$o).replace(_o,"")}function ap(e,t,n){e=Me(e),t=Dt(t);var r=e.length;n=n===u?r:En(ge(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function rp(e){return e=Me(e),e&&Ou.test(e)?e.replace(qi,Go):e}function ip(e){return e=Me(e),e&&Hu.test(e)?e.replace(_r,"\\$&"):e}var sp=ta(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),lp=ta(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),up=pl("toLowerCase");function op(e,t,n){e=Me(e),t=ge(t);var r=t?Kn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ar(Ja(i),n)+e+ar(qa(i),n)}function cp(e,t,n){e=Me(e),t=ge(t);var r=t?Kn(e):0;return t&&r<t?e+ar(t-r,n):e}function dp(e,t,n){e=Me(e),t=ge(t);var r=t?Kn(e):0;return t&&r<t?ar(t-r,n)+e:e}function fp(e,t,n){return n||t==null?t=0:t&&(t=+t),vc(Me(e).replace(jr,""),t||0)}function mp(e,t,n){return(n?gt(e,t,n):t===u)?t=1:t=ge(t),ti(Me(e),t)}function hp(){var e=arguments,t=Me(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var pp=ta(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function gp(e,t,n){return n&&typeof n!="number"&&gt(e,t,n)&&(t=n=u),n=n===u?ce:n>>>0,n?(e=Me(e),e&&(typeof t=="string"||t!=null&&!Si(t))&&(t=Dt(t),!t&&zn(e))?Dn(Wt(e),0,n):e.split(t,n)):[]}var xp=ta(function(e,t,n){return e+(n?" ":"")+wi(t)});function vp(e,t,n){return e=Me(e),n=n==null?0:En(ge(n),0,e.length),t=Dt(t),e.slice(n,n+t.length)==t}function bp(e,t,n){var r=s.templateSettings;n&&gt(e,t,n)&&(t=u),e=Me(e),t=pr({},t,r,_l);var i=pr({},t.imports,r.imports,_l),l=st(i),o=Mr(i,l),c,f,x=0,v=t.interpolate||Ia,b="__p += '",D=Ur((t.escape||Ia).source+"|"+v.source+"|"+(v===Ji?Vu:Ia).source+"|"+(t.evaluate||Ia).source+"|$","g"),W="//# sourceURL="+(Ue.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wo+"]")+`
`;e.replace(D,function(te,Ie,Te,wt,xt,It){return Te||(Te=wt),b+=e.slice(x,It).replace(ao,zo),Ie&&(c=!0,b+=`' +
__e(`+Ie+`) +
'`),xt&&(f=!0,b+=`';
`+xt+`;
__p += '`),Te&&(b+=`' +
((__t = (`+Te+`)) == null ? '' : __t) +
'`),x=It+te.length,te}),b+=`';
`;var ee=Ue.call(t,"variable")&&t.variable;if(!ee)b=`with (obj) {
`+b+`
}
`;else if(Ku.test(ee))throw new de(he);b=(f?b.replace(Tu,""):b).replace(Eu,"$1").replace(Bu,"$1;"),b="function("+(ee||"obj")+`) {
`+(ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(f?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var ve=hu(function(){return Fe(l,W+"return "+b).apply(u,o)});if(ve.source=b,ji(ve))throw ve;return ve}function kp(e){return Me(e).toLowerCase()}function yp(e){return Me(e).toUpperCase()}function _p(e,t,n){if(e=Me(e),e&&(n||t===u))return js(e);if(!e||!(t=Dt(t)))return e;var r=Wt(e),i=Wt(t),l=Ss(r,i),o=Ds(r,i)+1;return Dn(r,l,o).join("")}function jp(e,t,n){if(e=Me(e),e&&(n||t===u))return e.slice(0,ws(e)+1);if(!e||!(t=Dt(t)))return e;var r=Wt(e),i=Ds(r,Wt(t))+1;return Dn(r,0,i).join("")}function Sp(e,t,n){if(e=Me(e),e&&(n||t===u))return e.replace(jr,"");if(!e||!(t=Dt(t)))return e;var r=Wt(e),i=Ss(r,Wt(t));return Dn(r,i).join("")}function Dp(e,t){var n=Y,r=Re;if(Ve(t)){var i="separator"in t?t.separator:i;n="length"in t?ge(t.length):n,r="omission"in t?Dt(t.omission):r}e=Me(e);var l=e.length;if(zn(e)){var o=Wt(e);l=o.length}if(n>=l)return e;var c=n-Kn(r);if(c<1)return r;var f=o?Dn(o,0,c).join(""):e.slice(0,c);if(i===u)return f+r;if(o&&(c+=f.length-c),Si(i)){if(e.slice(c).search(i)){var x,v=f;for(i.global||(i=Ur(i.source,Me($i.exec(i))+"g")),i.lastIndex=0;x=i.exec(v);)var b=x.index;f=f.slice(0,b===u?c:b)}}else if(e.indexOf(Dt(i),c)!=c){var D=f.lastIndexOf(i);D>-1&&(f=f.slice(0,D))}return f+r}function Np(e){return e=Me(e),e&&Lu.test(e)?e.replace(Hi,ec):e}var wp=ta(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),wi=pl("toUpperCase");function mu(e,t,n){return e=Me(e),t=n?u:t,t===u?Yo(e)?ac(e):Uo(e):e.match(t)||[]}var hu=be(function(e,t){try{return jt(e,u,t)}catch(n){return ji(n)?n:new de(n)}}),Ip=un(function(e,t){return At(t,function(n){n=Zt(n),sn(e,n,yi(e[n],e))}),e});function Cp(e){var t=e==null?0:e.length,n=X();return e=t?ze(e,function(r){if(typeof r[1]!="function")throw new Tt(K);return[n(r[0]),r[1]]}):[],be(function(r){for(var i=-1;++i<t;){var l=e[i];if(jt(l[0],this,r))return jt(l[1],this,r)}})}function Pp(e){return ed(Bt(e,G))}function Ii(e){return function(){return e}}function Ap(e,t){return e==null||e!==e?t:e}var Tp=xl(),Ep=xl(!0);function yt(e){return e}function Ci(e){return zs(typeof e=="function"?e:Bt(e,G))}function Bp(e){return Ys(Bt(e,G))}function Lp(e,t){return Vs(e,Bt(t,G))}var Op=be(function(e,t){return function(n){return xa(n,e,t)}}),Fp=be(function(e,t){return function(n){return xa(e,n,t)}});function Pi(e,t,n){var r=st(t),i=Va(t,r);n==null&&!(Ve(t)&&(i.length||!r.length))&&(n=t,t=e,e=this,i=Va(t,st(t)));var l=!(Ve(n)&&"chain"in n)||!!n.chain,o=cn(e);return At(i,function(c){var f=t[c];e[c]=f,o&&(e.prototype[c]=function(){var x=this.__chain__;if(l||x){var v=e(this.__wrapped__),b=v.__actions__=vt(this.__actions__);return b.push({func:f,args:arguments,thisArg:e}),v.__chain__=x,v}return f.apply(e,bn([this.value()],arguments))})}),e}function Mp(){return ut._===this&&(ut._=oc),this}function Ai(){}function Rp(e){return e=ge(e),be(function(t){return Zs(t,e)})}var Up=ui(ze),Wp=ui(vs),Hp=ui(Er);function pu(e){return pi(e)?Br(Zt(e)):xd(e)}function qp(e){return function(t){return e==null?u:Bn(e,t)}}var Jp=bl(),$p=bl(!0);function Ti(){return[]}function Ei(){return!1}function Gp(){return{}}function zp(){return""}function Kp(){return!0}function Yp(e,t){if(e=ge(e),e<1||e>Ge)return[];var n=ce,r=ft(e,ce);t=X(t),e-=ce;for(var i=Fr(r,t);++n<e;)t(n);return i}function Vp(e){return me(e)?ze(e,Zt):Nt(e)?[e]:vt(Ll(Me(e)))}function Zp(e){var t=++lc;return Me(e)+t}var Xp=nr(function(e,t){return e+t},0),Qp=oi("ceil"),eg=nr(function(e,t){return e/t},1),tg=oi("floor");function ng(e){return e&&e.length?Ya(e,yt,Kr):u}function ag(e,t){return e&&e.length?Ya(e,X(t,2),Kr):u}function rg(e){return ys(e,yt)}function ig(e,t){return ys(e,X(t,2))}function sg(e){return e&&e.length?Ya(e,yt,Xr):u}function lg(e,t){return e&&e.length?Ya(e,X(t,2),Xr):u}var ug=nr(function(e,t){return e*t},1),og=oi("round"),cg=nr(function(e,t){return e-t},0);function dg(e){return e&&e.length?Or(e,yt):0}function fg(e,t){return e&&e.length?Or(e,X(t,2)):0}return s.after=Bm,s.ary=Gl,s.assign=yh,s.assignIn=su,s.assignInWith=pr,s.assignWith=_h,s.at=jh,s.before=zl,s.bind=yi,s.bindAll=Ip,s.bindKey=Kl,s.castArray=Gm,s.chain=ql,s.chunk=ef,s.compact=tf,s.concat=nf,s.cond=Cp,s.conforms=Pp,s.constant=Ii,s.countBy=dm,s.create=Sh,s.curry=Yl,s.curryRight=Vl,s.debounce=Zl,s.defaults=Dh,s.defaultsDeep=Nh,s.defer=Lm,s.delay=Om,s.difference=af,s.differenceBy=rf,s.differenceWith=sf,s.drop=lf,s.dropRight=uf,s.dropRightWhile=of,s.dropWhile=cf,s.fill=df,s.filter=mm,s.flatMap=gm,s.flatMapDeep=xm,s.flatMapDepth=vm,s.flatten=Rl,s.flattenDeep=ff,s.flattenDepth=mf,s.flip=Fm,s.flow=Tp,s.flowRight=Ep,s.fromPairs=hf,s.functions=Eh,s.functionsIn=Bh,s.groupBy=bm,s.initial=gf,s.intersection=xf,s.intersectionBy=vf,s.intersectionWith=bf,s.invert=Oh,s.invertBy=Fh,s.invokeMap=ym,s.iteratee=Ci,s.keyBy=_m,s.keys=st,s.keysIn=kt,s.map=or,s.mapKeys=Rh,s.mapValues=Uh,s.matches=Bp,s.matchesProperty=Lp,s.memoize=dr,s.merge=Wh,s.mergeWith=lu,s.method=Op,s.methodOf=Fp,s.mixin=Pi,s.negate=fr,s.nthArg=Rp,s.omit=Hh,s.omitBy=qh,s.once=Mm,s.orderBy=jm,s.over=Up,s.overArgs=Rm,s.overEvery=Wp,s.overSome=Hp,s.partial=_i,s.partialRight=Xl,s.partition=Sm,s.pick=Jh,s.pickBy=uu,s.property=pu,s.propertyOf=qp,s.pull=jf,s.pullAll=Wl,s.pullAllBy=Sf,s.pullAllWith=Df,s.pullAt=Nf,s.range=Jp,s.rangeRight=$p,s.rearg=Um,s.reject=wm,s.remove=wf,s.rest=Wm,s.reverse=bi,s.sampleSize=Cm,s.set=Gh,s.setWith=zh,s.shuffle=Pm,s.slice=If,s.sortBy=Em,s.sortedUniq=Lf,s.sortedUniqBy=Of,s.split=gp,s.spread=Hm,s.tail=Ff,s.take=Mf,s.takeRight=Rf,s.takeRightWhile=Uf,s.takeWhile=Wf,s.tap=nm,s.throttle=qm,s.thru=ur,s.toArray=au,s.toPairs=ou,s.toPairsIn=cu,s.toPath=Vp,s.toPlainObject=iu,s.transform=Kh,s.unary=Jm,s.union=Hf,s.unionBy=qf,s.unionWith=Jf,s.uniq=$f,s.uniqBy=Gf,s.uniqWith=zf,s.unset=Yh,s.unzip=ki,s.unzipWith=Hl,s.update=Vh,s.updateWith=Zh,s.values=ra,s.valuesIn=Xh,s.without=Kf,s.words=mu,s.wrap=$m,s.xor=Yf,s.xorBy=Vf,s.xorWith=Zf,s.zip=Xf,s.zipObject=Qf,s.zipObjectDeep=em,s.zipWith=tm,s.entries=ou,s.entriesIn=cu,s.extend=su,s.extendWith=pr,Pi(s,s),s.add=Xp,s.attempt=hu,s.camelCase=np,s.capitalize=du,s.ceil=Qp,s.clamp=Qh,s.clone=zm,s.cloneDeep=Ym,s.cloneDeepWith=Vm,s.cloneWith=Km,s.conformsTo=Zm,s.deburr=fu,s.defaultTo=Ap,s.divide=eg,s.endsWith=ap,s.eq=qt,s.escape=rp,s.escapeRegExp=ip,s.every=fm,s.find=hm,s.findIndex=Fl,s.findKey=wh,s.findLast=pm,s.findLastIndex=Ml,s.findLastKey=Ih,s.floor=tg,s.forEach=Jl,s.forEachRight=$l,s.forIn=Ch,s.forInRight=Ph,s.forOwn=Ah,s.forOwnRight=Th,s.get=Di,s.gt=Xm,s.gte=Qm,s.has=Lh,s.hasIn=Ni,s.head=Ul,s.identity=yt,s.includes=km,s.indexOf=pf,s.inRange=ep,s.invoke=Mh,s.isArguments=Fn,s.isArray=me,s.isArrayBuffer=eh,s.isArrayLike=bt,s.isArrayLikeObject=tt,s.isBoolean=th,s.isBuffer=Nn,s.isDate=nh,s.isElement=ah,s.isEmpty=rh,s.isEqual=ih,s.isEqualWith=sh,s.isError=ji,s.isFinite=lh,s.isFunction=cn,s.isInteger=Ql,s.isLength=mr,s.isMap=eu,s.isMatch=uh,s.isMatchWith=oh,s.isNaN=ch,s.isNative=dh,s.isNil=mh,s.isNull=fh,s.isNumber=tu,s.isObject=Ve,s.isObjectLike=et,s.isPlainObject=ja,s.isRegExp=Si,s.isSafeInteger=hh,s.isSet=nu,s.isString=hr,s.isSymbol=Nt,s.isTypedArray=aa,s.isUndefined=ph,s.isWeakMap=gh,s.isWeakSet=xh,s.join=kf,s.kebabCase=sp,s.last=Ot,s.lastIndexOf=yf,s.lowerCase=lp,s.lowerFirst=up,s.lt=vh,s.lte=bh,s.max=ng,s.maxBy=ag,s.mean=rg,s.meanBy=ig,s.min=sg,s.minBy=lg,s.stubArray=Ti,s.stubFalse=Ei,s.stubObject=Gp,s.stubString=zp,s.stubTrue=Kp,s.multiply=ug,s.nth=_f,s.noConflict=Mp,s.noop=Ai,s.now=cr,s.pad=op,s.padEnd=cp,s.padStart=dp,s.parseInt=fp,s.random=tp,s.reduce=Dm,s.reduceRight=Nm,s.repeat=mp,s.replace=hp,s.result=$h,s.round=og,s.runInContext=d,s.sample=Im,s.size=Am,s.snakeCase=pp,s.some=Tm,s.sortedIndex=Cf,s.sortedIndexBy=Pf,s.sortedIndexOf=Af,s.sortedLastIndex=Tf,s.sortedLastIndexBy=Ef,s.sortedLastIndexOf=Bf,s.startCase=xp,s.startsWith=vp,s.subtract=cg,s.sum=dg,s.sumBy=fg,s.template=bp,s.times=Yp,s.toFinite=dn,s.toInteger=ge,s.toLength=ru,s.toLower=kp,s.toNumber=Ft,s.toSafeInteger=kh,s.toString=Me,s.toUpper=yp,s.trim=_p,s.trimEnd=jp,s.trimStart=Sp,s.truncate=Dp,s.unescape=Np,s.uniqueId=Zp,s.upperCase=wp,s.upperFirst=wi,s.each=Jl,s.eachRight=$l,s.first=Ul,Pi(s,function(){var e={};return Yt(s,function(t,n){Ue.call(s.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),s.VERSION=Q,At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){s[e].placeholder=s}),At(["drop","take"],function(e,t){Ce.prototype[e]=function(n){n=n===u?1:it(ge(n),0);var r=this.__filtered__&&!t?new Ce(this):this.clone();return r.__filtered__?r.__takeCount__=ft(n,r.__takeCount__):r.__views__.push({size:ft(n,ce),type:e+(r.__dir__<0?"Right":"")}),r},Ce.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),At(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==S||n==we;Ce.prototype[e]=function(i){var l=this.clone();return l.__iteratees__.push({iteratee:X(i,3),type:n}),l.__filtered__=l.__filtered__||r,l}}),At(["head","last"],function(e,t){var n="take"+(t?"Right":"");Ce.prototype[e]=function(){return this[n](1).value()[0]}}),At(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Ce.prototype[e]=function(){return this.__filtered__?new Ce(this):this[n](1)}}),Ce.prototype.compact=function(){return this.filter(yt)},Ce.prototype.find=function(e){return this.filter(e).head()},Ce.prototype.findLast=function(e){return this.reverse().find(e)},Ce.prototype.invokeMap=be(function(e,t){return typeof e=="function"?new Ce(this):this.map(function(n){return xa(n,e,t)})}),Ce.prototype.reject=function(e){return this.filter(fr(X(e)))},Ce.prototype.slice=function(e,t){e=ge(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ce(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==u&&(t=ge(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Ce.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ce.prototype.toArray=function(){return this.take(ce)},Yt(Ce.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=s[r?"take"+(t=="last"?"Right":""):t],l=r||/^find/.test(t);i&&(s.prototype[t]=function(){var o=this.__wrapped__,c=r?[1]:arguments,f=o instanceof Ce,x=c[0],v=f||me(o),b=function(Ie){var Te=i.apply(s,bn([Ie],c));return r&&D?Te[0]:Te};v&&n&&typeof x=="function"&&x.length!=1&&(f=v=!1);var D=this.__chain__,W=!!this.__actions__.length,ee=l&&!D,ve=f&&!W;if(!l&&v){o=ve?o:new Ce(this);var te=e.apply(o,c);return te.__actions__.push({func:ur,args:[b],thisArg:u}),new Et(te,D)}return ee&&ve?e.apply(this,c):(te=this.thru(b),ee?r?te.value()[0]:te.value():te)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ba[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);s.prototype[e]=function(){var i=arguments;if(r&&!this.__chain__){var l=this.value();return t.apply(me(l)?l:[],i)}return this[n](function(o){return t.apply(me(o)?o:[],i)})}}),Yt(Ce.prototype,function(e,t){var n=s[t];if(n){var r=n.name+"";Ue.call(Xn,r)||(Xn[r]=[]),Xn[r].push({name:t,func:n})}}),Xn[tr(u,O).name]=[{name:"wrapper",func:u}],Ce.prototype.clone=Dc,Ce.prototype.reverse=Nc,Ce.prototype.value=wc,s.prototype.at=am,s.prototype.chain=rm,s.prototype.commit=im,s.prototype.next=sm,s.prototype.plant=um,s.prototype.reverse=om,s.prototype.toJSON=s.prototype.valueOf=s.prototype.value=cm,s.prototype.first=s.prototype.head,ca&&(s.prototype[ca]=lm),s},Yn=rc();Cn?((Cn.exports=Yn)._=Yn,Cr._=Yn):ut._=Yn}).call(Sa)})(xr,xr.exports);var Yx=xr.exports;Wn("proyekEdit",Du);const Vx=Gt().shape({idBerkas:Ze().required("Required")});function Zx(){var Y,Re;const h=pn(),[m,u]=N.useState(!1),[Q,Ne]=N.useState(null),[z,K]=N.useState(!1),[he,U]=N.useState(!1),[ye,_e]=N.useState(null),G=en(y=>y.proyekEdit.data.proyekData),V=en(y=>y.proyekEdit.data.selectBerkasData.data),Ee=en(y=>y.proyekEdit.data.loading);en(y=>y.proyekEdit.data.loadingSelectBerkas);const je={idProject:"",keterangan:"",idBerkas:""},pe=y=>(F,S)=>{_e({id:y.id,nama:y.nama,status:y.status,newStatus:F}),U(!0),S.preventDefault()},ne=async()=>{if(ye)try{const y={id:ye.id,status:ye.newStatus},F=await h(Kg(y));F.payload.statusCode===200?T("updated"):ie.push(a.jsx(se,{title:"Error updating status",type:"danger",duration:2500,children:F.payload.message}),{placement:"top-center"})}catch(y){console.error("Error updating status:",y),ie.push(a.jsx(se,{title:"Error updating status",type:"danger",duration:2500,children:"An error occurred while updating the status"}),{placement:"top-center"})}finally{U(!1),_e(null);const y=location.pathname.substring(location.pathname.lastIndexOf("/")+1);re({id:y})}},O=()=>{U(!1),_e(null)},re=y=>{h(Oi(y)),h(Yg())},M=()=>{u(!0)},H=y=>{console.log("onDialogClose",y),u(!1)},ae=y=>{Ne(y),K(!0)},_=()=>{K(!1),Ne(null)},A=async()=>{if(Q)try{if(await Vg({id:Q})){const F=location.pathname.substring(location.pathname.lastIndexOf("/")+1);T("deleted"),re({id:F})}}catch(y){console.error("Error deleting BASTP:",y),ie.push(a.jsx(se,{title:"Error deleting BASTP",type:"danger",duration:2500,children:"An error occurred while deleting the BASTP"}),{placement:"top-center"})}finally{K(!1),Ne(null)}},T=y=>{ie.push(a.jsxs(se,{title:`Successfully ${y}`,type:"success",duration:2500,children:["BASTP successfully ",y]}),{placement:"top-center"})},J=async(y,{setSubmitting:F})=>{F(!0);try{const S=location.pathname.substring(location.pathname.lastIndexOf("/")+1),oe={...y,idProject:S};console.log("requestData",oe),await Zg(oe)&&(T("added"),re({id:S}))}catch(S){console.error("Error creating BASTP:",S)}finally{F(!1),u(!1)}};return N.useEffect(()=>{const F={id:location.pathname.substring(location.pathname.lastIndexOf("/")+1)};re(F)},[location.pathname]),a.jsx(In,{loading:Ee,children:a.jsxs(a.Fragment,{children:[a.jsx(Hn,{divider:!0,className:"border-none",children:a.jsxs("div",{className:"flex justify-between items-center ",children:[a.jsx(gn,{title:"Informasi berkas Tagihan",desc:"Informasi berkas tagihan proyek"}),a.jsx($,{size:"sm",variant:"twoTone",onClick:M,className:"w-fit text-xs",type:"button",children:"Tambah Berkas"})]})}),a.jsx("div",{className:"flex flex-col",children:!Yx.isEmpty(G)&&a.jsx(a.Fragment,{children:((Y=G==null?void 0:G.BerkasProjects)==null?void 0:Y.length)>0?(Re=G.BerkasProjects)==null?void 0:Re.map((y,F)=>{var S;return a.jsxs("div",{className:`flex flex-row justify-between items-center  p-4
                                        ${F===((S=G==null?void 0:G.BerkasProjects)==null?void 0:S.length)-1?"rounded-b-md border":F===0?"rounded-t-md border-t border-x":"border-t border-x"}
                                            `,children:[a.jsx(Nu,{checked:y.status,onChange:(oe,we)=>pe(y)(oe,we),children:y.nama}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>ae(y.id)})]},y.id)}):a.jsx("div",{children:"Tidak ada data berkas Tagihan"})})}),a.jsx(_t,{isOpen:z,onClose:_,onRequestClose:_,onCancel:_,type:"danger",title:"Delete BASTP",onConfirm:A,children:a.jsx("p",{children:"Apakah kamu yakin ingin menghapus berkas Tagihan ini?"})}),a.jsx(_t,{isOpen:he,onClose:O,onRequestClose:O,onCancel:O,type:"warning",title:"Ubah Status",onConfirm:ne,children:a.jsxs("p",{children:['Apakah kamu yakin ingin mengubah status berkas "',ye==null?void 0:ye.nama,'" menjadi'," ",a.jsx("strong",{children:ye!=null&&ye.newStatus?"aktif":"tidak aktif"}),"?"]})}),a.jsx(tn,{initialValues:je,validationSchema:Vx,onSubmit:J,children:({errors:y,touched:F,isSubmitting:S})=>a.jsx(Fi,{isOpen:m,onClose:H,onRequestClose:H,children:a.jsxs(hn,{children:[a.jsx("h5",{className:"mb-4",children:"Tambah BASTP"}),a.jsx("div",{className:"flex flex-col max-h-[60vh] border-b-[1px] pb-4 ",children:a.jsx(ke,{label:"Pilih Berkas Tagihan",invalid:y.idBerkas&&F.idBerkas,errorMessage:y.idBerkas,children:a.jsx(Be,{name:"idBerkas",children:({field:oe,form:we})=>{const Pe=oe.value?V.find(B=>B.id===oe.value):null,Ge=V.map(B=>({value:B.id,label:`${B.nama}`}));return a.jsx(Wi,{field:oe,form:we,options:Ge,value:Pe?{value:Pe.id,label:`${Pe.nama}`}:null,placeholder:"Pilih berkas",onChange:B=>{we.setFieldValue(oe.name,B==null?void 0:B.value)}})}})})}),a.jsxs("div",{className:"text-right mt-6",children:[a.jsx($,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:H,type:"button",disabled:S,children:"Cancel"}),a.jsx($,{variant:"solid",type:"submit",loading:S,children:"Simpan"})]})]})})})]})})}const Xx=Gt().shape({tempKeterangan:Ze().required("Keterangan harus diisi"),tempTanggal:Mi().required("Tanggal harus diisi").typeError("Format tanggal tidak valid")});Wn("proyekDetail",wa);function Qx(){const[h,m]=N.useState(!1),[u,Q]=N.useState(null),[Ne,z]=N.useState(!1),[K,he]=N.useState(!1),[U,ye]=N.useState(null),_e=pn(),G=location.pathname.substring(location.pathname.lastIndexOf("/")+1),V=Rt(O=>O.proyekDetail.data.bastpProyekData.data),Ee=Rt(O=>O.proyekDetail.data.loadingBastpsByProyek);N.useEffect(()=>{_e(Da({id:G}))},[_e,G]);const je=O=>new Date(O).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),pe={tempTanggal:null,tempKeterangan:"",tempIdProject:G||""},ne=O=>{ie.push(a.jsxs(se,{title:`Berhasil ${O}`,type:"success",duration:2500,children:["Data BASTP berhasil ",O]}),{placement:"top-center"})};return console.log("bastpsByProyekData",V),a.jsx(In,{loading:Ee||Ne,children:a.jsx(tn,{enableReinitialize:!0,initialValues:pe,validationSchema:Xx,onSubmit:()=>{},children:O=>{const{values:re,errors:M,touched:H,setFieldValue:ae}=O,_=()=>{m(!0),Q(null),ae("tempTanggal",null),ae("tempKeterangan","")},A=async()=>{var S,oe,we,Pe;if(!M.tempKeterangan&&!M.tempTanggal){z(!0);const Ge={tanggal:(S=re.tempTanggal)==null?void 0:S.toISOString(),keterangan:re.tempKeterangan,idProject:re.tempIdProject};try{let B;if(u!==null&&V){const q=V[u].id;B=await Bx({id:q,...Ge})}else B=await Lx(Ge);z(!1),B&&((oe=B.data)==null?void 0:oe.statusCode)>=200&&((we=B.data)==null?void 0:we.statusCode)<300?(console.log("result",B),_e(Da({id:G})),ne(u!==null?"diperbarui":"ditambahkan"),T(),m(!1),Q(null)):ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:B?B==null?void 0:B.message:"Gagal menambahkan BASTP"}),{placement:"top-center"})}catch(B){z(!1),console.error("Error:",B),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:B?(Pe=B.response.data)==null?void 0:Pe.message:"Gagal menambahkan BASTP"}),{placement:"top-center"})}}},T=()=>{ae("tempTanggal",null),ae("tempKeterangan","")},J=()=>{m(!1),Q(null),T()},Y=S=>{if(V){const oe=V[S];ae("tempTanggal",new Date(oe.tanggal)),ae("tempKeterangan",oe.keterangan),ae("tempIdProject",oe.idProject),Q(S),m(!0)}},Re=S=>{ye(S),he(!0)},y=()=>{he(!1),ye(null)},F=async()=>{var S;if(U!==null&&V){const oe=V[U].id;z(!0);try{await Ex({id:oe})&&(console.log("projectId sebelum refresh",G),_e(Da({id:G})),console.log("projectId setelah refresh",G),ne("dihapus"))}catch(we){console.error("Error deleting BASTP:",we),ie.push(a.jsx(se,{title:"Error",type:"danger",duration:2500,children:((S=we.response.data)==null?void 0:S.message)||"Gagal menghapus BASTP"}),{placement:"top-center"})}finally{z(!1),he(!1),ye(null)}}};return a.jsxs(hn,{children:[a.jsxs(Hn,{divider:!0,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(gn,{title:"Informasi BASTP",desc:"Informasi Berita Acara Serah Terima Pekerjaan"}),!h&&a.jsx($,{size:"sm",variant:"twoTone",onClick:_,className:"w-fit text-xs",type:"button",children:"Tambah BASTP"})]}),h&&a.jsxs("div",{className:"mb-4 border bg-slate-50 rounded-md p-4",children:[a.jsx("h6",{className:"mb-3",children:u!==null?"Edit BASTP":"Tambah BASTP Baru"}),a.jsxs(Na,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ke,{label:"Tanggal",errorMessage:M.tempTanggal&&H.tempTanggal?M.tempTanggal:"",invalid:!!(M.tempTanggal&&H.tempTanggal),children:a.jsx(wn,{placeholder:"Pilih tanggal",value:re.tempTanggal,inputFormat:"DD-MM-YYYY",onChange:S=>{ae("tempTanggal",S)}})}),a.jsx(ke,{label:"Keterangan",errorMessage:M.tempKeterangan&&H.tempKeterangan?M.tempKeterangan:"",invalid:!!(M.tempKeterangan&&H.tempKeterangan),children:a.jsx(Be,{type:"text",autoComplete:"off",name:"tempKeterangan",placeholder:"Masukkan keterangan BASTP",component:We})})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[a.jsx($,{size:"sm",variant:"plain",onClick:J,type:"button",children:"Batal"}),a.jsx($,{size:"sm",variant:"solid",onClick:A,type:"button",loading:Ne,children:"Simpan"})]})]})]}),V&&V.length>0?a.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600",children:V.map((S,oe)=>u===oe?null:a.jsxs("div",{className:la("flex items-center justify-between px-4 py-6",!ua(V,oe)&&"border-b border-gray-200 dark:border-gray-600"),children:[a.jsxs("div",{className:"flex items-center flex-grow",children:[a.jsx("div",{className:"text-3xl",children:a.jsx(Cu,{className:"text-indigo-500"})}),a.jsxs("div",{className:"ml-3 rtl:mr-3",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:["BASTP"," ",oe+1]})}),a.jsxs("div",{className:"text-gray-500 text-sm mt-1",children:[a.jsxs("div",{children:["Tanggal:"," ",je(S.tanggal)]}),a.jsxs("div",{children:["Keterangan:"," ",S.keterangan]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",icon:a.jsx(mn,{}),className:"text-indigo-500",onClick:()=>Y(oe)}),a.jsx($,{type:"button",shape:"circle",variant:"plain",size:"sm",className:"text-red-500",icon:a.jsx($t,{}),onClick:()=>Re(oe)})]})]},S.id))}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Belum ada data BASTP. Klik 'Tambah BASTP' untuk menambahkan."})]}),a.jsx(_t,{isOpen:K,type:"danger",title:"Hapus BASTP",confirmButtonColor:"red-600",onClose:y,onRequestClose:y,onCancel:y,onConfirm:F,children:a.jsx("p",{children:"Apakah kamu yakin ingin menghapus BASTP ini?"})})]})}})})}function e0(){return a.jsx("div",{children:"Timeline"})}const{TabNav:Xt,TabList:t0,TabContent:Qt}=wu;function x0(){return a.jsx("div",{children:a.jsxs(wu,{defaultValue:"tab1",variant:"pill",children:[a.jsxs(t0,{className:"pb-4 border-b border-gray-200",children:[a.jsx(Xt,{value:"tab1",children:"Detail"}),a.jsx(Xt,{value:"tab2",children:"Lokasi"}),a.jsx(Xt,{value:"tab3",children:"Subkon"}),a.jsx(Xt,{value:"tab4",children:"PO (Barang)"}),a.jsx(Xt,{value:"tab5",children:"RAB/Progress"}),a.jsx(Xt,{value:"tab6",children:"Termin"}),a.jsx(Xt,{value:"tab7",children:"Adendum"}),a.jsx(Xt,{value:"tab8",children:"BASTP"}),a.jsx(Xt,{value:"tab9",children:"Berkas Tagihan"}),a.jsx(Xt,{value:"tab10",children:"Timeline"})]}),a.jsxs("div",{className:"px-4",children:[a.jsx(Qt,{value:"tab1",children:a.jsx(lx,{})}),a.jsx(Qt,{value:"tab2",children:a.jsx(Gx,{})}),a.jsx(Qt,{value:"tab3",children:a.jsx(Kx,{})}),a.jsx(Qt,{value:"tab4",children:a.jsx(cx,{})}),a.jsx(Qt,{value:"tab5",children:a.jsx(Jx,{})}),a.jsx(Qt,{value:"tab6",children:a.jsx(mx,{})}),a.jsx(Qt,{value:"tab7",children:a.jsx(Wx,{})}),a.jsx(Qt,{value:"tab8",children:a.jsx(Qx,{})}),a.jsx(Qt,{value:"tab9",children:a.jsx(Zx,{})}),a.jsx(Qt,{value:"tab10",children:a.jsx(e0,{})})]})]})})}export{x0 as default};
