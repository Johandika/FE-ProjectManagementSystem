import{r as t,u as H,j as e,c,S as L,L as T}from"./index-b009c0ac.js";import{u as E,H as B,M as R,U as _}from"./navigation-icon.config-136aa2df.js";import{w as M,S as U}from"./SidePanel-0fbf85fd.js";import{S as D,a as G}from"./SideNav-a277db05.js";import{t as x,N as p,D as m,T as O,B as $,H as I,S as z,A as F,a as n,b as j,V as Q}from"./Views-3aa30f3b.js";import{i as V}from"./isLastChild-83eb4c23.js";import{u as P}from"./useThemeClass-c7400041.js";import{a as W,b as q,c as J}from"./NotificationService-bb524ea4.js";import{f as K}from"./formatDate-07229bbd.js";import"./Logo-45b24830.js";import"./VerticalMenuContent-06e186ac.js";const u="h-72",X=({className:d,dot:s})=>e.jsx("div",{className:c("text-2xl",d),children:s?e.jsx(j,{badgeStyle:{top:"3px",right:"6px"},children:e.jsx(n,{})}):e.jsx(n,{})}),Y=({className:d})=>{const[s,f]=t.useState([]),[b,l]=t.useState(!1),[y,h]=t.useState(!1),[N,o]=t.useState(!1),{bgTheme:k}=P(),{larger:v}=E(),w=H(a=>a.theme.direction),g=t.useCallback(async()=>{(await W()).data.data>0?(h(!1),l(!0)):h(!0)},[l]);t.useEffect(()=>{g()},[g]);const S=t.useCallback(async()=>{if(s.length===0){o(!0);try{const a=await q();o(!1),f(a.data.data)}catch(a){console.log("error",a),o(!1)}}},[s]),C=t.useCallback(async()=>{var a,r;o(!0);try{await J()?x.push(e.jsx(p,{title:"Berhasil",type:"success",duration:2500,children:"Berhasil menghapus notifikasi yang sudah dibaca"}),{placement:"top-center"}):x.push(e.jsx(p,{title:"Error",type:"danger",duration:2500,children:"Gagal menghapus notifikasi"}),{placement:"top-center"})}catch(i){x.push(e.jsx(p,{title:"Error",type:"danger",duration:2500,children:((r=(a=i.response)==null?void 0:a.data)==null?void 0:r.message)||"Gagal menghapus notifikasi"}),{placement:"top-center"})}finally{o(!1)}},[s]),A=t.useCallback(a=>{const r=s.map(i=>i.id===a?{...i,status_baca:!0}:i);f(r),l(r.some(i=>!i.status_baca))},[s]);return t.useEffect(()=>{l(s.some(a=>!a.status_baca))},[s]),e.jsxs(m,{renderTitle:e.jsx(X,{dot:b,className:d}),menuClass:"p-0 min-w-[280px] md:min-w-[340px]",placement:v.md?"bottom-end":"bottom-center",onOpen:S,children:[e.jsx(m.Item,{variant:"header",children:e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-600 px-4 py-2 flex items-center justify-between",children:[e.jsx("h6",{children:"Notifikasi"}),e.jsx(O,{title:"Hapus pesan yg sudah dibaca",children:e.jsx($,{variant:"plain",shape:"circle",size:"sm",icon:e.jsx(I,{className:"text-xl"}),onClick:C})})]})}),e.jsx("div",{className:c("overflow-y-auto",u),children:e.jsxs(z,{direction:w,children:[s.length>0&&s.map((a,r)=>e.jsxs("div",{className:`relative flex px-4 py-4 cursor-pointer hover:bg-gray-50 active:bg-gray-100 dark:hover:bg-black dark:hover:bg-opacity-20  ${V(s,r)?"":"border-b border-gray-200 dark:border-gray-600"}`,onClick:()=>A(a.id),children:[e.jsx("div",{children:e.jsx(F,{shape:"circle",className:`
                                             ${a.type==="timeline"?"bg-amber-100 text-amber-600":a.type==="adendum"?"bg-blue-100 text-blue-600":a.type==="faktur_pajak"?"bg-green-100 text-green-600":""}
                                             dark:bg-blue-500/20 dark:text-blue-100`,icon:a.type==="adendum"?e.jsx(n,{}):a.type==="faktur_pajak"?e.jsx(n,{}):a.type==="timeline"?e.jsx(n,{}):""})}),e.jsxs("div",{className:"ltr:ml-3 rtl:mr-3",children:[e.jsxs("div",{className:"flex flex-col",children:[a.type&&e.jsx("span",{className:"font-semibold heading-text",children:a.type.charAt(0).toUpperCase()+a.type.slice(1).toLowerCase()}),e.jsx("span",{children:a.pesan})]}),e.jsx("span",{className:"text-xs",children:K(a.createdAt)})]}),e.jsx(j,{className:"absolute top-4 ltr:right-4 rtl:left-4 mt-1.5",innerClass:`${a.status_baca?"bg-gray-300":k} `})]},a.id)),N&&e.jsx("div",{className:c("flex items-center justify-center",u),children:e.jsx(L,{size:40})}),y&&s.length===0&&e.jsx("div",{className:c("flex items-center justify-center",u),children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{className:"mx-auto mb-2 max-w-[150px]",src:"/img/others/no-notification.png",alt:"no-notification"}),e.jsx("h6",{className:"font-semibold",children:"Tidak Ada Notifikasi"}),e.jsx("p",{className:"mt-1",children:"Coba lagi!"})]})})]})}),e.jsx(m.Item,{variant:"header",children:e.jsx("div",{className:"flex justify-center border-t border-gray-200 dark:border-gray-600 px-4 py-2",children:e.jsx(T,{to:"/semua-notifikasi",className:"font-semibold cursor-pointer p-2 px-3 text-gray-600 hover:text-gray-900 dark:text-gray-200 dark:hover:text-white",children:"Lihat Semua"})})})]})},Z=M(Y),ee=()=>e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx(G,{})]}),ae=()=>e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),e.jsx(U,{}),e.jsx(_,{hoverable:!1})]}),me=()=>e.jsx("div",{className:"app-layout-modern flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[e.jsx(D,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700",children:[e.jsx(B,{className:"border-b border-gray-200 dark:border-gray-700",headerEnd:e.jsx(ae,{}),headerStart:e.jsx(ee,{})}),e.jsx(Q,{})]})]})});export{me as default};
